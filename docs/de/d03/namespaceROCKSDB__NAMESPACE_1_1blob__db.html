<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RocksDB Doxygen: ROCKSDB_NAMESPACE::blob_db 네임스페이스 참조</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RocksDB Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">클래스</a> &#124;
<a href="#func-members">함수</a> &#124;
<a href="#var-members">변수</a>  </div>
  <div class="headertitle"><div class="title">ROCKSDB_NAMESPACE::blob_db 네임스페이스 참조</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
클래스</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d2e/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobCompactionContext.html">BlobCompactionContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dc2/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobCompactionContextGC.html">BlobCompactionContextGC</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d90/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDB.html">BlobDB</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7f/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBGarbageCollectionStats.html">BlobDBGarbageCollectionStats</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dfb/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBImpl.html">BlobDBImpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d29/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBIterator.html">BlobDBIterator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/ddc/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBListener.html">BlobDBListener</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d3b/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBListenerGC.html">BlobDBListenerGC</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d9e/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDumpTool.html">BlobDumpTool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d6f/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobFile.html">BlobFile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d5e/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobFileComparator.html">BlobFileComparator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d9a/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobFileComparatorTTL.html">BlobFileComparatorTTL</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d07/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilter.html">BlobIndexCompactionFilter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/dbc/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilterBase.html">BlobIndexCompactionFilterBase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d36/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilterFactory.html">BlobIndexCompactionFilterFactory</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d9f/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilterFactoryBase.html">BlobIndexCompactionFilterFactoryBase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d96/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilterFactoryGC.html">BlobIndexCompactionFilterFactoryGC</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dac/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobIndexCompactionFilterGC.html">BlobIndexCompactionFilterGC</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:ae5b126d4dc2c07bd45e43ead26d0a41e" id="r_ae5b126d4dc2c07bd45e43ead26d0a41e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae5b126d4dc2c07bd45e43ead26d0a41e">DestroyBlobDB</a> (const std::string &amp;<a class="el" href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a>, const <a class="el" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> &amp;options, const <a class="el" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> &amp;bdb_options)</td></tr>
<tr class="separator:ae5b126d4dc2c07bd45e43ead26d0a41e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38da761c7e4dcb831d9b2b2672a399e5" id="r_a38da761c7e4dcb831d9b2b2672a399e5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a38da761c7e4dcb831d9b2b2672a399e5">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, Put)</td></tr>
<tr class="separator:a38da761c7e4dcb831d9b2b2672a399e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93023c149cf18e34ed48bcffc8df6246" id="r_a93023c149cf18e34ed48bcffc8df6246"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a93023c149cf18e34ed48bcffc8df6246">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, PutWithTTL)</td></tr>
<tr class="separator:a93023c149cf18e34ed48bcffc8df6246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5410a187064e2b4c8a32ef2cbf4fed" id="r_a6f5410a187064e2b4c8a32ef2cbf4fed"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f5410a187064e2b4c8a32ef2cbf4fed">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, PutUntil)</td></tr>
<tr class="separator:a6f5410a187064e2b4c8a32ef2cbf4fed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7628ccf00a02145428a73870abe6fa" id="r_a0f7628ccf00a02145428a73870abe6fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f7628ccf00a02145428a73870abe6fa">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, StackableDBGet)</td></tr>
<tr class="separator:a0f7628ccf00a02145428a73870abe6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfffcc1acce452365a221d01a2a05087" id="r_adfffcc1acce452365a221d01a2a05087"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfffcc1acce452365a221d01a2a05087">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, GetExpiration)</td></tr>
<tr class="separator:adfffcc1acce452365a221d01a2a05087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2614bfc0fe0ac62fd8bf6fd8020f1817" id="r_a2614bfc0fe0ac62fd8bf6fd8020f1817"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2614bfc0fe0ac62fd8bf6fd8020f1817">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, GetIOError)</td></tr>
<tr class="separator:a2614bfc0fe0ac62fd8bf6fd8020f1817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7b23f7d4cf715b8e7e7fc92f07b9a89" id="r_aa7b23f7d4cf715b8e7e7fc92f07b9a89"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa7b23f7d4cf715b8e7e7fc92f07b9a89">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, PutIOError)</td></tr>
<tr class="separator:aa7b23f7d4cf715b8e7e7fc92f07b9a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad35a412f9eb915082fc0469575046af6" id="r_ad35a412f9eb915082fc0469575046af6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad35a412f9eb915082fc0469575046af6">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, <a class="el" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a>)</td></tr>
<tr class="separator:ad35a412f9eb915082fc0469575046af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd1e79bcfb0af527f569594e841a5d7" id="r_acdd1e79bcfb0af527f569594e841a5d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acdd1e79bcfb0af527f569594e841a5d7">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, Delete)</td></tr>
<tr class="separator:acdd1e79bcfb0af527f569594e841a5d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4171c6845e227f59aa8654ea1cd09f39" id="r_a4171c6845e227f59aa8654ea1cd09f39"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4171c6845e227f59aa8654ea1cd09f39">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, DeleteBatch)</td></tr>
<tr class="separator:a4171c6845e227f59aa8654ea1cd09f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da698485cf9e9c1557281858c0b16fe" id="r_a7da698485cf9e9c1557281858c0b16fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7da698485cf9e9c1557281858c0b16fe">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, Override)</td></tr>
<tr class="separator:a7da698485cf9e9c1557281858c0b16fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10fbb75c816bfdc56d7ecb059bfa220e" id="r_a10fbb75c816bfdc56d7ecb059bfa220e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10fbb75c816bfdc56d7ecb059bfa220e">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, MultipleWriters)</td></tr>
<tr class="separator:a10fbb75c816bfdc56d7ecb059bfa220e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b51f5c733b8e5b02796205bd100024c" id="r_a6b51f5c733b8e5b02796205bd100024c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6b51f5c733b8e5b02796205bd100024c">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, <a class="el" href="../../d9/db9/classROCKSDB__NAMESPACE_1_1SstFileManager.html">SstFileManager</a>)</td></tr>
<tr class="separator:a6b51f5c733b8e5b02796205bd100024c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5943cdcf2d065bbbce097aa7db9224" id="r_a5c5943cdcf2d065bbbce097aa7db9224"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c5943cdcf2d065bbbce097aa7db9224">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, SstFileManagerRestart)</td></tr>
<tr class="separator:a5c5943cdcf2d065bbbce097aa7db9224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b03621f81f787f10eb2e6cfa515d2d5" id="r_a3b03621f81f787f10eb2e6cfa515d2d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3b03621f81f787f10eb2e6cfa515d2d5">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, SnapshotAndGarbageCollection)</td></tr>
<tr class="separator:a3b03621f81f787f10eb2e6cfa515d2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37497b934b2371dd9c506c906536a2b7" id="r_a37497b934b2371dd9c506c906536a2b7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a37497b934b2371dd9c506c906536a2b7">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, ColumnFamilyNotSupported)</td></tr>
<tr class="separator:a37497b934b2371dd9c506c906536a2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59525b3609e1e16f755fe6ff8fb5bbc5" id="r_a59525b3609e1e16f755fe6ff8fb5bbc5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a59525b3609e1e16f755fe6ff8fb5bbc5">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, GetLiveFilesMetaData)</td></tr>
<tr class="separator:a59525b3609e1e16f755fe6ff8fb5bbc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10574a4107fa7542f962955ad06e6dfc" id="r_a10574a4107fa7542f962955ad06e6dfc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10574a4107fa7542f962955ad06e6dfc">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, MigrateFromPlainRocksDB)</td></tr>
<tr class="separator:a10574a4107fa7542f962955ad06e6dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49afa3d811aaf3e4a59e23af09b9ac70" id="r_a49afa3d811aaf3e4a59e23af09b9ac70"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a49afa3d811aaf3e4a59e23af09b9ac70">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, OutOfSpace)</td></tr>
<tr class="separator:a49afa3d811aaf3e4a59e23af09b9ac70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4a4bb06333fe51562f83c6c3a11f38" id="r_acd4a4bb06333fe51562f83c6c3a11f38"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#acd4a4bb06333fe51562f83c6c3a11f38">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FIFOEviction)</td></tr>
<tr class="separator:acd4a4bb06333fe51562f83c6c3a11f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10af16b64fbc9b051844e67ae777c46c" id="r_a10af16b64fbc9b051844e67ae777c46c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10af16b64fbc9b051844e67ae777c46c">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FIFOEviction_NoOldestFileToEvict)</td></tr>
<tr class="separator:a10af16b64fbc9b051844e67ae777c46c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c6a7b66d0d75039ba61a40f96051a99" id="r_a6c6a7b66d0d75039ba61a40f96051a99"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6c6a7b66d0d75039ba61a40f96051a99">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FIFOEviction_NoEnoughBlobFilesToEvict)</td></tr>
<tr class="separator:a6c6a7b66d0d75039ba61a40f96051a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c4b07ba120e0478e56ab6052d4836c5" id="r_a4c4b07ba120e0478e56ab6052d4836c5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c4b07ba120e0478e56ab6052d4836c5">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FIFOEviction_TriggerOnSSTSizeChange)</td></tr>
<tr class="separator:a4c4b07ba120e0478e56ab6052d4836c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d8e677e26dc80b9334fddb3567be253" id="r_a0d8e677e26dc80b9334fddb3567be253"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d8e677e26dc80b9334fddb3567be253">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, InlineSmallValues)</td></tr>
<tr class="separator:a0d8e677e26dc80b9334fddb3567be253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97cb5584053f7e8ca3007adabd446a7e" id="r_a97cb5584053f7e8ca3007adabd446a7e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97cb5584053f7e8ca3007adabd446a7e">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, UserCompactionFilter)</td></tr>
<tr class="separator:a97cb5584053f7e8ca3007adabd446a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5be5c676bdb02666a9bf8288cac077" id="r_a9c5be5c676bdb02666a9bf8288cac077"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c5be5c676bdb02666a9bf8288cac077">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, UserCompactionFilter_BlobIOError)</td></tr>
<tr class="separator:a9c5be5c676bdb02666a9bf8288cac077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c0ab647804cbebc4ee70e26454446b" id="r_a29c0ab647804cbebc4ee70e26454446b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a29c0ab647804cbebc4ee70e26454446b">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FilterExpiredBlobIndex)</td></tr>
<tr class="separator:a29c0ab647804cbebc4ee70e26454446b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad575a30bfa04b81e4bed4393a4ce49e8" id="r_ad575a30bfa04b81e4bed4393a4ce49e8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad575a30bfa04b81e4bed4393a4ce49e8">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FilterFileNotAvailable)</td></tr>
<tr class="separator:ad575a30bfa04b81e4bed4393a4ce49e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad15b797f791e0e021f120b7ba76f7ec9" id="r_ad15b797f791e0e021f120b7ba76f7ec9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad15b797f791e0e021f120b7ba76f7ec9">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, FilterForFIFOEviction)</td></tr>
<tr class="separator:ad15b797f791e0e021f120b7ba76f7ec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dded820b854fb7b8917641b1d86b1dc" id="r_a7dded820b854fb7b8917641b1d86b1dc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7dded820b854fb7b8917641b1d86b1dc">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, GarbageCollection)</td></tr>
<tr class="separator:a7dded820b854fb7b8917641b1d86b1dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b4f8557e080f20f599d9bf3a7031a6" id="r_ab8b4f8557e080f20f599d9bf3a7031a6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8b4f8557e080f20f599d9bf3a7031a6">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, GarbageCollectionFailure)</td></tr>
<tr class="separator:ab8b4f8557e080f20f599d9bf3a7031a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a679d7603de363fac03d4a65422ece27c" id="r_a679d7603de363fac03d4a65422ece27c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a679d7603de363fac03d4a65422ece27c">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, EvictExpiredFile)</td></tr>
<tr class="separator:a679d7603de363fac03d4a65422ece27c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5efcff8cd82df7c11012b8aab63ee97b" id="r_a5efcff8cd82df7c11012b8aab63ee97b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5efcff8cd82df7c11012b8aab63ee97b">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, DisableFileDeletions)</td></tr>
<tr class="separator:a5efcff8cd82df7c11012b8aab63ee97b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67ae071fb784ef74f6b8f5e7a0cfcdf4" id="r_a67ae071fb784ef74f6b8f5e7a0cfcdf4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67ae071fb784ef74f6b8f5e7a0cfcdf4">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, MaintainBlobFileToSstMapping)</td></tr>
<tr class="separator:a67ae071fb784ef74f6b8f5e7a0cfcdf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad871de9663ad7b0939b7e8ed7348a16" id="r_aad871de9663ad7b0939b7e8ed7348a16"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad871de9663ad7b0939b7e8ed7348a16">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, ShutdownWait)</td></tr>
<tr class="separator:aad871de9663ad7b0939b7e8ed7348a16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a933a7a4b0c91bb64ff2970be5f3e2f00" id="r_a933a7a4b0c91bb64ff2970be5f3e2f00"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a933a7a4b0c91bb64ff2970be5f3e2f00">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, SyncBlobFileBeforeClose)</td></tr>
<tr class="separator:a933a7a4b0c91bb64ff2970be5f3e2f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8c72d94a9bd1255e493fa4656d9d25b" id="r_aa8c72d94a9bd1255e493fa4656d9d25b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8c72d94a9bd1255e493fa4656d9d25b">TEST_F</a> (<a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a>, SyncBlobFileBeforeCloseIOError)</td></tr>
<tr class="separator:aa8c72d94a9bd1255e493fa4656d9d25b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
변수</h2></td></tr>
<tr class="memitem:a370c88ffe8d625dd0f8b028c385ea1d2" id="r_a370c88ffe8d625dd0f8b028c385ea1d2"><td class="memItemLeft" align="right" valign="top">constexpr uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a370c88ffe8d625dd0f8b028c385ea1d2">kNoExpiration</a> = std::numeric_limits&lt;uint64_t&gt;::max()</td></tr>
<tr class="separator:a370c88ffe8d625dd0f8b028c385ea1d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="ae5b126d4dc2c07bd45e43ead26d0a41e" name="ae5b126d4dc2c07bd45e43ead26d0a41e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5b126d4dc2c07bd45e43ead26d0a41e">&#9670;&#160;</a></span>DestroyBlobDB()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> ROCKSDB_NAMESPACE::blob_db::DestroyBlobDB </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>dbname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>options</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>bdb_options</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../de/d1d/blob__db__impl_8cc_source.html">blob_db_impl.cc</a> 파일의 <a class="el" href="../../de/d1d/blob__db__impl_8cc_source.html#l02151">2151</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2152</span>                                                       {</div>
<div class="line"><span class="lineno"> 2153</span>  <span class="keyword">const</span> <a class="code hl_struct" href="../../d5/d2e/structROCKSDB__NAMESPACE_1_1ImmutableDBOptions.html">ImmutableDBOptions</a> soptions(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a9a87a9b892741d50d9860ff148c377cf">SanitizeOptions</a>(<a class="code hl_variable" href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a>, options));</div>
<div class="line"><span class="lineno"> 2154</span>  <a class="code hl_class" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html">Env</a>* env = soptions.env;</div>
<div class="line"><span class="lineno"> 2155</span> </div>
<div class="line"><span class="lineno"> 2156</span>  <a class="code hl_class" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> status;</div>
<div class="line"><span class="lineno"> 2157</span>  std::string blobdir;</div>
<div class="line"><span class="lineno"> 2158</span>  blobdir = (bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ae2d11ea7eb0b29f3db2b5d5aa14b32dc">path_relative</a>) ? <a class="code hl_variable" href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a> + <span class="stringliteral">&quot;/&quot;</span> + bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a52d9f19d5ffa5110a6d6050b6fc1e241">blob_dir</a></div>
<div class="line"><span class="lineno"> 2159</span>                                        : bdb_options.blob_dir;</div>
<div class="line"><span class="lineno"> 2160</span> </div>
<div class="line"><span class="lineno"> 2161</span>  std::vector&lt;std::string&gt; filenames;</div>
<div class="line"><span class="lineno"> 2162</span>  <span class="keywordflow">if</span> (env-&gt;<a class="code hl_function" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ad821c7a23e52c37cab15fbaa14d31388">GetChildren</a>(blobdir, &amp;filenames).<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73">ok</a>()) {</div>
<div class="line"><span class="lineno"> 2163</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; f : filenames) {</div>
<div class="line"><span class="lineno"> 2164</span>      uint64_t number;</div>
<div class="line"><span class="lineno"> 2165</span>      <a class="code hl_enumeration" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a572c40b059615a4b9755748d810fc3ad">FileType</a> <a class="code hl_class" href="../../de/da8/structROCKSDB__NAMESPACE_1_1aligned__storage.html">type</a>;</div>
<div class="line"><span class="lineno"> 2166</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a7d87aaca453b4f1ca5f4475ef9b0ff31">ParseFileName</a>(f, &amp;number, &amp;<a class="code hl_class" href="../../de/da8/structROCKSDB__NAMESPACE_1_1aligned__storage.html">type</a>) &amp;&amp; <a class="code hl_class" href="../../de/da8/structROCKSDB__NAMESPACE_1_1aligned__storage.html">type</a> == <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a572c40b059615a4b9755748d810fc3ada810a2dda7079cf2c6b58ef1401784771">kBlobFile</a>) {</div>
<div class="line"><span class="lineno"> 2167</span>        <a class="code hl_class" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> del = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a092d2d4cd5612dbbf33cdb2adc9fdf8e">DeleteDBFile</a>(&amp;soptions, blobdir + <span class="stringliteral">&quot;/&quot;</span> + f, blobdir, <span class="keyword">true</span>,</div>
<div class="line"><span class="lineno"> 2168</span>                                  <span class="comment">/*force_fg=*/</span><span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 2169</span>        <span class="keywordflow">if</span> (status.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73">ok</a>() &amp;&amp; !del.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73">ok</a>()) {</div>
<div class="line"><span class="lineno"> 2170</span>          status = del;</div>
<div class="line"><span class="lineno"> 2171</span>        }</div>
<div class="line"><span class="lineno"> 2172</span>      }</div>
<div class="line"><span class="lineno"> 2173</span>    }</div>
<div class="line"><span class="lineno"> 2174</span>    <span class="comment">// TODO: What to do if we cannot delete the directory?</span></div>
<div class="line"><span class="lineno"> 2175</span>    env-&gt;<a class="code hl_function" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a5092f628ea8316e17d9fa83f47849a06">DeleteDir</a>(blobdir).<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#aaf1532cf0c0cf8fb93620d09e41d624f">PermitUncheckedError</a>();</div>
<div class="line"><span class="lineno"> 2176</span>  }</div>
<div class="line"><span class="lineno"> 2177</span>  Status destroy = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a18634f1aa447e30554266ec43f3a50f9">DestroyDB</a>(<a class="code hl_variable" href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a>, options);</div>
<div class="line"><span class="lineno"> 2178</span>  <span class="keywordflow">if</span> (status.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73">ok</a>() &amp;&amp; !destroy.ok()) {</div>
<div class="line"><span class="lineno"> 2179</span>    status = destroy;</div>
<div class="line"><span class="lineno"> 2180</span>  }</div>
<div class="line"><span class="lineno"> 2181</span> </div>
<div class="line"><span class="lineno"> 2182</span>  <span class="keywordflow">return</span> status;</div>
<div class="line"><span class="lineno"> 2183</span>}</div>
<div class="ttc" id="ac__test_8c_html_a75d845559336df6843f3b599960f89d2"><div class="ttname"><a href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a></div><div class="ttdeci">static char dbname[200]</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d62/c__test_8c_source.html#l00036">c_test.c:36</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Env_html"><div class="ttname"><a href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html">ROCKSDB_NAMESPACE::Env</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d81/env_8h_source.html#l00154">env.h:154</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Env_html_a5092f628ea8316e17d9fa83f47849a06"><div class="ttname"><a href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a5092f628ea8316e17d9fa83f47849a06">ROCKSDB_NAMESPACE::Env::DeleteDir</a></div><div class="ttdeci">virtual Status DeleteDir(const std::string &amp;dirname)=0</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Env_html_ad821c7a23e52c37cab15fbaa14d31388"><div class="ttname"><a href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ad821c7a23e52c37cab15fbaa14d31388">ROCKSDB_NAMESPACE::Env::GetChildren</a></div><div class="ttdeci">virtual Status GetChildren(const std::string &amp;dir, std::vector&lt; std::string &gt; *result)=0</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">ROCKSDB_NAMESPACE::Status</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00035">status.h:35</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html_a44cf4d9e0f59181d4838378a46b41c73"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73">ROCKSDB_NAMESPACE::Status::ok</a></div><div class="ttdeci">bool ok() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00320">status.h:320</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html_aaf1532cf0c0cf8fb93620d09e41d624f"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#aaf1532cf0c0cf8fb93620d09e41d624f">ROCKSDB_NAMESPACE::Status::PermitUncheckedError</a></div><div class="ttdeci">void PermitUncheckedError() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00067">status.h:67</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a092d2d4cd5612dbbf33cdb2adc9fdf8e"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a092d2d4cd5612dbbf33cdb2adc9fdf8e">ROCKSDB_NAMESPACE::DeleteDBFile</a></div><div class="ttdeci">Status DeleteDBFile(const ImmutableDBOptions *db_options, const std::string &amp;fname, const std::string &amp;dir_to_sync, const bool force_bg, const bool force_fg)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d2b/file__util_8cc_source.html#l00125">file_util.cc:125</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a18634f1aa447e30554266ec43f3a50f9"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a18634f1aa447e30554266ec43f3a50f9">ROCKSDB_NAMESPACE::DestroyDB</a></div><div class="ttdeci">Status DestroyDB(const std::string &amp;dbname, const Options &amp;options, const std::vector&lt; ColumnFamilyDescriptor &gt; &amp;column_families)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d75/db__impl_8cc_source.html#l05348">db_impl.cc:5348</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a572c40b059615a4b9755748d810fc3ad"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a572c40b059615a4b9755748d810fc3ad">ROCKSDB_NAMESPACE::FileType</a></div><div class="ttdeci">FileType</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00045">types.h:45</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a572c40b059615a4b9755748d810fc3ada810a2dda7079cf2c6b58ef1401784771"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a572c40b059615a4b9755748d810fc3ada810a2dda7079cf2c6b58ef1401784771">ROCKSDB_NAMESPACE::kBlobFile</a></div><div class="ttdeci">@ kBlobFile</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00056">types.h:56</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a7d87aaca453b4f1ca5f4475ef9b0ff31"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a7d87aaca453b4f1ca5f4475ef9b0ff31">ROCKSDB_NAMESPACE::ParseFileName</a></div><div class="ttdeci">bool ParseFileName(const std::string &amp;fname, uint64_t *number, FileType *type, WalFileType *log_type)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d86/filename_8cc_source.html#l00268">filename.cc:268</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a9a87a9b892741d50d9860ff148c377cf"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a9a87a9b892741d50d9860ff148c377cf">ROCKSDB_NAMESPACE::SanitizeOptions</a></div><div class="ttdeci">ColumnFamilyOptions SanitizeOptions(const ImmutableDBOptions &amp;db_options, const ColumnFamilyOptions &amp;src)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/df7/column__family_8cc_source.html#l00202">column_family.cc:202</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ImmutableDBOptions_html"><div class="ttname"><a href="../../d5/d2e/structROCKSDB__NAMESPACE_1_1ImmutableDBOptions.html">ROCKSDB_NAMESPACE::ImmutableDBOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d9a/db__options_8h_source.html#l00016">db_options.h:16</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1aligned__storage_html"><div class="ttname"><a href="../../de/da8/structROCKSDB__NAMESPACE_1_1aligned__storage.html">ROCKSDB_NAMESPACE::type</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a52d9f19d5ffa5110a6d6050b6fc1e241"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a52d9f19d5ffa5110a6d6050b6fc1e241">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::blob_dir</a></div><div class="ttdeci">std::string blob_dir</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00034">blob_db.h:34</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_ae2d11ea7eb0b29f3db2b5d5aa14b32dc"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ae2d11ea7eb0b29f3db2b5d5aa14b32dc">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::path_relative</a></div><div class="ttdeci">bool path_relative</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00037">blob_db.h:37</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_cgraph">
<area shape="rect" title=" " alt="" coords="5,1032,187,1077"/>
<area shape="poly" title=" " alt="" coords="52,1032,51,1022,58,1013,73,1007,96,1005,121,1008,136,1014,133,1019,119,1013,96,1011,75,1013,61,1017,56,1023,57,1031"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a092d2d4cd5612dbbf33cdb2adc9fdf8e" title=" " alt="" coords="482,364,663,409"/>
<area shape="poly" title=" " alt="" coords="99,1031,113,962,139,864,178,752,203,697,232,645,283,569,330,514,386,468,463,419,472,413,475,418,465,423,389,473,334,518,287,572,237,648,208,699,183,754,144,865,118,963,104,1032"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a5092f628ea8316e17d9fa83f47849a06" title=" " alt="" coords="482,433,663,478"/>
<area shape="poly" title=" " alt="" coords="104,1030,148,936,224,795,274,717,330,640,393,566,462,500,488,483,491,488,466,504,397,570,334,643,278,720,229,798,153,938,109,1033"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a18634f1aa447e30554266ec43f3a50f9" title=" " alt="" coords="235,943,416,987"/>
<area shape="poly" title=" " alt="" coords="154,1029,251,991,253,996,156,1034"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73" title=" " alt="" coords="1296,1257,1477,1302"/>
<area shape="poly" title=" " alt="" coords="113,1076,162,1150,197,1192,236,1231,318,1299,354,1325,389,1345,426,1361,467,1371,515,1378,571,1380,863,1380,983,1372,1102,1353,1210,1329,1300,1304,1301,1310,1211,1334,1103,1359,983,1377,863,1385,571,1385,514,1383,466,1377,425,1366,387,1350,351,1329,315,1303,233,1235,193,1196,158,1153,108,1079"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a7d87aaca453b4f1ca5f4475ef9b0ff31" title=" " alt="" coords="482,1300,663,1345"/>
<area shape="poly" title=" " alt="" coords="139,1075,519,1290,516,1294,136,1080"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#aaf1532cf0c0cf8fb93620d09e41d624f" title=" " alt="" coords="464,1420,680,1465"/>
<area shape="poly" title=" " alt="" coords="101,1077,110,1142,131,1231,149,1278,171,1323,200,1364,236,1399,285,1427,339,1444,395,1452,449,1453,449,1459,394,1457,338,1449,283,1432,233,1403,196,1368,167,1326,144,1280,126,1233,105,1143,96,1078"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a9a87a9b892741d50d9860ff148c377cf" title=" " alt="" coords="482,264,663,309"/>
<area shape="poly" title=" " alt="" coords="96,1031,105,945,126,817,144,745,167,671,196,598,232,530,282,459,331,411,388,371,463,325,486,313,488,318,465,330,391,375,334,415,286,462,237,533,201,601,172,672,149,746,132,818,110,946,101,1032"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ad821c7a23e52c37cab15fbaa14d31388" title=" " alt="" coords="235,1521,416,1566"/>
<area shape="poly" title=" " alt="" coords="104,1077,118,1144,144,1241,183,1350,208,1403,237,1454,259,1483,285,1509,281,1513,255,1487,232,1457,204,1406,179,1352,139,1242,113,1146,99,1078"/>
<area shape="poly" title=" " alt="" coords="525,364,524,354,532,345,548,339,572,337,599,340,615,346,613,351,598,345,572,343,549,345,535,349,529,355,530,363"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a1b83f773eb9d5293128c2270e7f6ca4a" title=" " alt="" coords="1055,625,1236,670"/>
<area shape="poly" title=" " alt="" coords="655,407,682,419,706,437,730,455,768,469,802,476,863,480,924,485,959,494,997,511,1033,533,1066,559,1118,612,1115,615,1062,563,1030,537,994,515,957,499,923,491,863,486,801,482,766,474,727,459,702,442,679,423,653,412"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ac490dd5f6d64cc6790886ab544d1dc59" title=" " alt="" coords="1055,445,1236,506"/>
<area shape="poly" title=" " alt="" coords="664,399,729,409,1040,457,1040,463,728,414,663,404"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#abfbc137fc639f1f3dce840cdb45f588c" title=" " alt="" coords="771,549,953,594"/>
<area shape="poly" title=" " alt="" coords="664,407,682,419,700,440,708,462,715,483,730,504,755,524,783,540,780,545,752,528,726,508,710,485,703,464,695,443,679,423,661,412"/>
<area shape="poly" title=" " alt="" coords="1098,444,1100,434,1109,426,1124,420,1146,418,1171,421,1187,428,1184,433,1170,426,1146,423,1125,425,1111,430,1105,437,1104,445"/>
<area shape="poly" title=" " alt="" coords="808,549,807,539,816,530,834,525,862,523,892,525,910,531,908,536,891,530,862,528,835,530,819,535,812,541,814,548"/>
<area shape="poly" title=" " alt="" coords="337,987,354,1027,381,1076,418,1124,440,1144,465,1160,495,1174,521,1182,545,1185,569,1185,619,1176,680,1160,778,1135,854,1108,888,1090,921,1067,994,998,1024,961,1050,920,1091,833,1119,750,1135,684,1140,686,1124,751,1096,834,1055,922,1028,964,998,1001,924,1071,891,1094,856,1113,780,1140,681,1165,620,1181,569,1190,545,1191,520,1187,493,1179,463,1165,437,1148,414,1127,376,1079,349,1029,332,989"/>
<area shape="poly" title=" " alt="" coords="331,941,462,539,502,517,545,504,590,499,635,500,680,507,723,516,797,541,796,546,722,522,679,512,635,506,590,504,546,509,504,522,466,543,337,943"/>
<area shape="poly" title=" " alt="" coords="332,941,369,832,413,687,423,631,425,585,433,542,444,519,462,495,473,485,477,489,466,499,449,522,438,543,430,586,428,632,419,688,374,834,337,943"/>
<area shape="poly" title=" " alt="" coords="281,943,280,933,288,924,303,918,325,916,350,919,365,925,363,930,349,924,325,921,304,923,291,928,285,934,287,942"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#adcb80fad2891ef2f98764b1d8c643f36" title=" " alt="" coords="482,740,663,785"/>
<area shape="poly" title=" " alt="" coords="337,941,386,869,421,829,462,795,470,790,473,795,466,799,425,833,390,873,341,944"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a1c29c12e75f5e7c4ab704be60c6b1b86" title=" " alt="" coords="477,647,667,691"/>
<area shape="poly" title=" " alt="" coords="330,941,345,892,372,827,410,760,434,729,462,702,467,698,470,702,466,706,438,733,415,763,376,830,350,894,335,943"/>
<area shape="rect" href="../../d5/d2e/structROCKSDB__NAMESPACE_1_1ImmutableDBOptions.html#a52852ca917f0b5d850ddf8021db32598" title=" " alt="" coords="482,833,663,894"/>
<area shape="poly" title=" " alt="" coords="378,940,463,904,477,898,479,903,465,909,380,945"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a2ee3dbd44cb4787205ada3c20362429c" title=" " alt="" coords="482,1012,663,1057"/>
<area shape="poly" title=" " alt="" coords="408,985,476,1005,475,1010,407,991"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a1ef0765f1e6ddb37a0de424187478272" title=" " alt="" coords="482,1105,663,1150"/>
<area shape="poly" title=" " alt="" coords="356,986,406,1025,465,1067,514,1095,511,1100,463,1071,403,1029,353,990"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0713ac9fa17de1b8c4ff9cdd3aa8dee2" title=" " alt="" coords="482,943,663,987"/>
<area shape="poly" title=" " alt="" coords="417,962,466,962,466,968,417,968"/>
<area shape="poly" title=" " alt="" coords="335,987,351,1032,377,1089,415,1145,439,1170,465,1191,494,1205,530,1218,619,1240,725,1256,843,1267,1082,1277,1281,1279,1281,1284,1082,1283,843,1272,725,1261,618,1245,528,1224,492,1210,463,1195,435,1174,411,1149,372,1091,346,1034,330,989"/>
<area shape="poly" title=" " alt="" coords="335,987,351,1039,378,1109,416,1186,439,1222,466,1255,486,1274,509,1290,506,1294,483,1278,462,1259,435,1225,411,1188,373,1112,346,1041,330,988"/>
<area shape="poly" title=" " alt="" coords="333,987,346,1055,371,1149,410,1255,436,1307,466,1355,492,1385,522,1409,519,1413,489,1389,462,1359,431,1310,405,1258,366,1151,341,1056,327,988"/>
<area shape="poly" title=" " alt="" coords="326,942,340,816,366,632,385,537,407,449,432,377,447,348,462,326,472,316,476,320,466,329,451,351,437,379,412,451,390,538,372,633,345,817,331,942"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a173018d818f3e2bf871b35a27d15af82" title=" " alt="" coords="482,553,663,598"/>
<area shape="poly" title=" " alt="" coords="330,942,352,867,384,767,422,672,442,634,462,609,467,604,470,608,466,612,447,637,427,674,389,769,357,868,335,943"/>
<area shape="poly" title=" " alt="" coords="525,740,524,730,532,721,548,715,572,713,599,716,615,722,613,727,598,721,572,719,549,721,535,725,529,731,530,739"/>
<area shape="poly" title=" " alt="" coords="643,689,729,713,804,724,863,729,921,726,995,713,1046,697,1092,675,1095,680,1048,702,996,718,922,731,862,734,803,729,728,718,642,694"/>
<area shape="poly" title=" " alt="" coords="624,644,727,604,756,595,757,600,729,609,626,649"/>
<area shape="poly" title=" " alt="" coords="525,647,524,637,532,628,548,622,572,620,599,623,615,629,613,634,598,628,572,625,549,627,535,632,529,638,530,646"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#afe340179b85fe1cf1c31ef8fb6093136" title=" " alt="" coords="741,642,983,704"/>
<area shape="poly" title=" " alt="" coords="668,668,726,668,726,674,668,673"/>
<area shape="poly" title=" " alt="" coords="807,642,808,632,818,623,836,617,862,616,892,618,910,626,908,631,891,624,862,621,837,623,821,628,813,634,812,642"/>
<area shape="poly" title=" " alt="" coords="524,832,525,822,534,814,550,808,572,806,598,809,614,816,612,821,597,814,572,811,551,813,537,818,530,825,529,833"/>
<area shape="poly" title=" " alt="" coords="525,1105,524,1095,532,1086,548,1081,572,1079,599,1081,615,1088,613,1093,598,1086,572,1084,549,1086,535,1091,529,1097,530,1104"/>
<area shape="poly" title=" " alt="" coords="525,943,524,933,532,924,548,918,572,916,599,919,615,925,613,930,598,924,572,921,549,923,535,928,529,934,530,942"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8910cf71f46f3b6f793e7f71a4c29f2e" title=" " alt="" coords="771,943,953,987"/>
<area shape="poly" title=" " alt="" coords="663,962,756,962,756,968,663,968"/>
<area shape="poly" title=" " alt="" coords="808,943,807,932,816,923,834,918,862,916,892,918,910,925,908,930,891,924,862,921,835,923,819,928,812,934,814,942"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="1525,1257,1707,1302"/>
<area shape="poly" title=" " alt="" coords="1478,1277,1510,1277,1510,1282,1478,1282"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="1755,1317,1936,1362"/>
<area shape="poly" title=" " alt="" coords="1470,1300,1526,1312,1636,1325,1739,1333,1739,1338,1635,1331,1525,1317,1469,1305"/>
<area shape="poly" title=" " alt="" coords="1704,1300,1743,1310,1742,1315,1703,1305"/>
<area shape="poly" title=" " alt="" coords="525,1300,524,1290,532,1281,548,1275,572,1273,599,1276,615,1282,613,1287,598,1281,572,1279,549,1281,535,1285,529,1291,530,1299"/>
<area shape="poly" title=" " alt="" coords="680,1437,1144,1430,1388,1430,1489,1424,1590,1408,1683,1386,1760,1365,1762,1370,1684,1392,1591,1413,1490,1429,1388,1436,1145,1436,680,1442"/>
<area shape="poly" title=" " alt="" coords="525,264,524,254,532,245,548,239,572,237,599,240,615,246,613,251,598,245,572,243,549,245,535,249,529,255,530,263"/>
<area shape="rect" href="../../d7/d74/classROCKSDB__NAMESPACE_1_1DeleteScheduler.html#a0e6f552f55112ea67d59f5b0bbb82e2f" title=" " alt="" coords="737,192,987,237"/>
<area shape="poly" title=" " alt="" coords="663,261,754,238,755,244,664,266"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0d330b98975cba6fad4e4999c537d2b1" title=" " alt="" coords="771,355,953,399"/>
<area shape="poly" title=" " alt="" coords="647,307,774,347,772,352,646,312"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a9461fff79c10c649f034322ac5b51ffc" title=" " alt="" coords="771,52,953,97"/>
<area shape="poly" title=" " alt="" coords="597,261,655,210,727,153,806,102,809,107,730,158,658,214,600,265"/>
<area shape="rect" href="../../d4/dc3/classROCKSDB__NAMESPACE_1_1TableFactory.html#ae16393674183c280acbbdf20b6ce2465" title=" " alt="" coords="728,261,996,306"/>
<area shape="poly" title=" " alt="" coords="663,283,713,282,713,288,663,288"/>
<area shape="poly" title=" " alt="" coords="983,235,998,247,1022,280,1034,313,1037,344,1035,376,1030,442,1033,478,1046,517,1077,569,1112,612,1108,615,1072,572,1041,519,1028,479,1024,442,1029,375,1031,344,1028,314,1017,283,994,251,980,239"/>
<area shape="poly" title=" " alt="" coords="982,235,998,247,1013,266,1022,285,1026,322,1028,360,1034,380,1046,401,1078,433,1074,437,1042,404,1029,382,1023,361,1021,323,1017,286,1009,269,994,251,979,239"/>
<area shape="poly" title=" " alt="" coords="980,235,997,247,1010,261,1017,275,1022,303,1027,331,1034,344,1045,356,1071,373,1097,379,1123,380,1149,378,1174,376,1200,378,1225,387,1250,407,1271,436,1289,473,1320,570,1343,687,1361,815,1373,944,1381,1065,1387,1242,1382,1242,1375,1065,1368,945,1355,816,1338,688,1314,571,1284,475,1266,439,1246,411,1223,392,1199,383,1174,381,1149,383,1123,385,1097,385,1069,377,1042,360,1029,347,1022,333,1017,304,1012,277,1005,264,994,251,977,239"/>
<area shape="poly" title=" " alt="" coords="808,192,807,182,816,173,834,167,862,165,892,168,910,174,908,179,891,173,862,171,835,173,819,177,812,183,814,191"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a1be4ed1309b173fc7b7cad85e5ed1086" title=" " alt="" coords="1055,99,1236,143"/>
<area shape="poly" title=" " alt="" coords="932,189,1061,146,1062,151,933,194"/>
<area shape="rect" href="../../d7/d74/classROCKSDB__NAMESPACE_1_1DeleteScheduler.html#ae859c6a2ca82a384e76fed7492834197" title=" " alt="" coords="1044,192,1248,237"/>
<area shape="poly" title=" " alt="" coords="987,212,1028,212,1028,217,987,217"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ae9cc64a2cf8322d72b4583b215f576ac" title=" " alt="" coords="1055,285,1236,346"/>
<area shape="poly" title=" " alt="" coords="959,235,997,246,1068,276,1066,280,995,252,958,240"/>
<area shape="poly" title=" " alt="" coords="1100,99,1099,89,1106,80,1122,74,1146,72,1172,75,1187,81,1185,86,1171,80,1146,77,1123,79,1109,84,1104,90,1105,98"/>
<area shape="poly" title=" " alt="" coords="1100,192,1099,182,1106,173,1122,167,1146,165,1172,168,1187,174,1185,179,1171,173,1146,171,1123,173,1109,177,1104,183,1105,191"/>
<area shape="poly" title=" " alt="" coords="1232,345,1250,363,1269,396,1286,437,1315,540,1339,664,1356,799,1378,1060,1387,1242,1382,1242,1373,1060,1351,800,1333,665,1310,541,1281,438,1264,398,1246,367,1228,349"/>
<area shape="poly" title=" " alt="" coords="1098,284,1100,274,1109,266,1124,260,1146,258,1171,261,1187,268,1184,273,1170,266,1146,263,1125,265,1111,270,1105,277,1104,285"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ac666dced8d8550496724a9f82bfd20f2" title=" " alt="" coords="1296,285,1477,346"/>
<area shape="poly" title=" " alt="" coords="1237,313,1281,313,1281,318,1237,318"/>
<area shape="poly" title=" " alt="" coords="1341,284,1343,274,1351,266,1366,260,1387,258,1411,261,1426,268,1423,273,1409,266,1387,263,1367,265,1354,270,1347,277,1347,285"/>
<area shape="poly" title=" " alt="" coords="808,355,807,344,816,335,834,330,862,328,892,330,910,337,908,342,891,336,862,333,835,335,819,340,812,346,814,354"/>
<area shape="poly" title=" " alt="" coords="808,52,807,42,816,33,834,27,862,25,892,28,910,34,908,39,891,33,862,31,835,33,819,37,812,43,814,51"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a6fafbf305911557740a73d55bfe0ada1" title=" " alt="" coords="1055,5,1236,50"/>
<area shape="poly" title=" " alt="" coords="953,57,1039,42,1040,48,954,62"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ac4e2dc68586206c59fa39a1143fecaeb" title=" " alt="" coords="464,1521,680,1566"/>
<area shape="poly" title=" " alt="" coords="417,1550,448,1550,448,1555,417,1555"/>
<area shape="poly" title=" " alt="" coords="674,1518,728,1506,808,1492,877,1483,995,1473,1051,1466,1110,1453,1174,1431,1247,1399,1278,1380,1307,1358,1355,1312,1358,1315,1310,1362,1281,1384,1249,1403,1176,1436,1111,1458,1052,1471,996,1479,877,1489,809,1497,729,1512,676,1523"/>
<area shape="poly" title=" " alt="" coords="463,1537,432,1537,432,1532,463,1532"/>
<area shape="poly" title=" " alt="" coords="525,1521,524,1511,532,1502,548,1497,572,1495,599,1497,615,1504,613,1509,598,1502,572,1500,549,1502,535,1507,529,1513,530,1520"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#af57b0deed23176c890dc764d7f8e5142" title=" " alt="" coords="771,1591,953,1635"/>
<area shape="poly" title=" " alt="" coords="669,1564,757,1585,756,1590,668,1569"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a860678565518d1be1e4a879dd197b7d8" title=" " alt="" coords="771,1660,953,1705"/>
<area shape="poly" title=" " alt="" coords="602,1564,659,1605,729,1645,758,1656,756,1661,727,1650,656,1610,599,1568"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a68c941da5f3083ca54122b381139b65b" title=" " alt="" coords="771,1521,953,1566"/>
<area shape="poly" title=" " alt="" coords="681,1541,756,1541,756,1546,681,1546"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="1055,1521,1236,1566"/>
<area shape="poly" title=" " alt="" coords="953,1541,1040,1541,1040,1546,953,1546"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_icgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_icgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_icgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ae5b126d4dc2c07bd45e43ead26d0a41e_icgraph">
<area shape="rect" title=" " alt="" coords="464,56,645,101"/>
<area shape="poly" title=" " alt="" coords="592,44,578,38,555,35,533,37,520,42,515,48,516,56,511,56,510,46,517,37,532,32,555,30,580,32,594,39"/>
<area shape="rect" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html#a4190b947c5dacc6d20b8b001386d5c18" title=" " alt="" coords="235,5,416,67"/>
<area shape="poly" title=" " alt="" coords="448,62,416,56,417,50,449,57"/>
<area shape="rect" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html#a0563a40d2c1c56855b5270c2b8501e4f" title=" " alt="" coords="235,91,416,152"/>
<area shape="poly" title=" " alt="" coords="449,101,417,107,416,102,448,96"/>
<area shape="rect" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html#a3ad686788181277e7624dcb9aaca5698" title=" " alt="" coords="5,91,187,152"/>
<area shape="poly" title=" " alt="" coords="219,124,187,124,187,119,219,119"/>
</map>
</div>

</div>
</div>
<a id="a37497b934b2371dd9c506c906536a2b7" name="a37497b934b2371dd9c506c906536a2b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37497b934b2371dd9c506c906536a2b7">&#9670;&#160;</a></span>TEST_F() <span class="overload">[1/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColumnFamilyNotSupported</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00937">937</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  937</span>                                             {</div>
<div class="line"><span class="lineno">  938</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  939</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno">  940</span>  mock_clock_-&gt;SetCurrentTime(0);</div>
<div class="line"><span class="lineno">  941</span>  Open(<a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a>(), options);</div>
<div class="line"><span class="lineno">  942</span>  <a class="code hl_class" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html">ColumnFamilyHandle</a> *default_handle = blob_db_-&gt;DefaultColumnFamily();</div>
<div class="line"><span class="lineno">  943</span>  <a class="code hl_class" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html">ColumnFamilyHandle</a> *handle = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  944</span>  std::string value;</div>
<div class="line"><span class="lineno">  945</span>  std::vector&lt;std::string&gt; values;</div>
<div class="line"><span class="lineno">  946</span>  <span class="comment">// The call simply pass through to base db. It should succeed.</span></div>
<div class="line"><span class="lineno">  947</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(</div>
<div class="line"><span class="lineno">  948</span>      blob_db_-&gt;CreateColumnFamily(<a class="code hl_struct" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ColumnFamilyOptions</a>(), <span class="stringliteral">&quot;foo&quot;</span>, &amp;handle));</div>
<div class="line"><span class="lineno">  949</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;Put(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), handle, <span class="stringliteral">&quot;k&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>).IsNotSupported());</div>
<div class="line"><span class="lineno">  950</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;PutWithTTL(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), handle, <span class="stringliteral">&quot;k&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>, 60)</div>
<div class="line"><span class="lineno">  951</span>                  .IsNotSupported());</div>
<div class="line"><span class="lineno">  952</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;PutUntil(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), handle, <span class="stringliteral">&quot;k&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>, 100)</div>
<div class="line"><span class="lineno">  953</span>                  .IsNotSupported());</div>
<div class="line"><span class="lineno">  954</span>  <a class="code hl_class" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a> batch;</div>
<div class="line"><span class="lineno">  955</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(batch.<a class="code hl_function" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a7864890bb9efdad04ba84996ec856850">Put</a>(<span class="stringliteral">&quot;k1&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>));</div>
<div class="line"><span class="lineno">  956</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(batch.<a class="code hl_function" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a7864890bb9efdad04ba84996ec856850">Put</a>(handle, <span class="stringliteral">&quot;k2&quot;</span>, <span class="stringliteral">&quot;v2&quot;</span>));</div>
<div class="line"><span class="lineno">  957</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;Write(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), &amp;batch).IsNotSupported());</div>
<div class="line"><span class="lineno">  958</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), <span class="stringliteral">&quot;k1&quot;</span>, &amp;value).IsNotFound());</div>
<div class="line"><span class="lineno">  959</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(</div>
<div class="line"><span class="lineno">  960</span>      blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), handle, <span class="stringliteral">&quot;k&quot;</span>, &amp;value).IsNotSupported());</div>
<div class="line"><span class="lineno">  961</span>  <span class="keyword">auto</span> statuses = blob_db_-&gt;MultiGet(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), {default_handle, handle},</div>
<div class="line"><span class="lineno">  962</span>                                     {<span class="stringliteral">&quot;k1&quot;</span>, <span class="stringliteral">&quot;k2&quot;</span>}, &amp;values);</div>
<div class="line"><span class="lineno">  963</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, statuses.size());</div>
<div class="line"><span class="lineno">  964</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(statuses[0].IsNotSupported());</div>
<div class="line"><span class="lineno">  965</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(statuses[1].IsNotSupported());</div>
<div class="line"><span class="lineno">  966</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="keyword">nullptr</span>, blob_db_-&gt;NewIterator(ReadOptions(), handle));</div>
<div class="line"><span class="lineno">  967</span>  <span class="keyword">delete</span> handle;</div>
<div class="line"><span class="lineno">  968</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1ColumnFamilyHandle_html"><div class="ttname"><a href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html">ROCKSDB_NAMESPACE::ColumnFamilyHandle</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d43/include_2rocksdb_2db_8h_source.html#l00081">db.h:81</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1WriteBatch_html"><div class="ttname"><a href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">ROCKSDB_NAMESPACE::WriteBatch</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d98/write__batch_8h_source.html#l00064">write_batch.h:64</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1WriteBatch_html_a7864890bb9efdad04ba84996ec856850"><div class="ttname"><a href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a7864890bb9efdad04ba84996ec856850">ROCKSDB_NAMESPACE::WriteBatch::Put</a></div><div class="ttdeci">Status Put(ColumnFamilyHandle *column_family, const Slice &amp;key, const Slice &amp;value) override</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d61/write__batch_8cc_source.html#l00921">write_batch.cc:921</a></div></div>
<div class="ttc" id="agtest_8h_html_a1a6db8b1338ee7040329322b77779086"><div class="ttname"><a href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a></div><div class="ttdeci">#define ASSERT_EQ(val1, val2)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d73/gtest_8h_source.html#l21769">gtest.h:21769</a></div></div>
<div class="ttc" id="agtest_8h_html_ae9244bfbda562e8b798789b001993fa5"><div class="ttname"><a href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a></div><div class="ttdeci">#define ASSERT_TRUE(condition)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d73/gtest_8h_source.html#l21682">gtest.h:21682</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ColumnFamilyOptions_html"><div class="ttname"><a href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html">ROCKSDB_NAMESPACE::ColumnFamilyOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00066">options.h:66</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DBOptions_html_a8e8130980785981b140f6291ab0ec8bc"><div class="ttname"><a href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">ROCKSDB_NAMESPACE::DBOptions::env</a></div><div class="ttdeci">Env * env</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00658">options.h:658</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1Options_html"><div class="ttname"><a href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">ROCKSDB_NAMESPACE::Options</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l01620">options.h:1620</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ReadOptions_html"><div class="ttname"><a href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ROCKSDB_NAMESPACE::ReadOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l01680">options.h:1680</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1WriteOptions_html"><div class="ttname"><a href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">ROCKSDB_NAMESPACE::WriteOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l01958">options.h:1958</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00030">blob_db.h:30</a></div></div>
<div class="ttc" id="atestharness_8h_html_a6892e90ee417adfb0c66aa7a49769895"><div class="ttname"><a href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a></div><div class="ttdeci">#define ASSERT_OK(s)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d42/testharness_8h_source.html#l00082">testharness.h:82</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a37497b934b2371dd9c506c906536a2b7_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a37497b934b2371dd9c506c906536a2b7_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a37497b934b2371dd9c506c906536a2b7_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a37497b934b2371dd9c506c906536a2b7_cgraph">
<area shape="rect" title=" " alt="" coords="5,501,187,546"/>
<area shape="rect" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a7864890bb9efdad04ba84996ec856850" title=" " alt="" coords="235,501,416,546"/>
<area shape="poly" title=" " alt="" coords="187,521,219,521,219,526,187,526"/>
<area shape="poly" title=" " alt="" coords="281,501,280,491,288,482,303,477,325,475,350,477,365,484,363,489,349,482,325,480,304,482,291,487,285,493,287,500"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#afc4f0631869904179079cd3ff6f4f51a" title=" " alt="" coords="466,176,742,237"/>
<area shape="poly" title=" " alt="" coords="345,499,564,247,568,251,349,503"/>
<area shape="rect" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#af93c0d3c0f3f8040a77722ab56349425" title=" " alt="" coords="464,536,744,581"/>
<area shape="poly" title=" " alt="" coords="417,532,449,536,448,542,416,538"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73" title=" " alt="" coords="514,721,695,766"/>
<area shape="poly" title=" " alt="" coords="357,544,564,709,561,714,354,548"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#af88f03891232f67fd3b0281f04f2c729" title=" " alt="" coords="514,467,695,511"/>
<area shape="poly" title=" " alt="" coords="416,510,498,500,498,505,417,515"/>
<area shape="poly" title=" " alt="" coords="550,175,551,165,561,156,579,151,604,149,634,152,652,159,650,164,633,157,604,154,580,156,564,161,556,167,555,176"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a222a447b6d8d737025672b927acc7d6a" title=" " alt="" coords="807,29,988,74"/>
<area shape="poly" title=" " alt="" coords="646,173,713,128,791,84,805,78,808,82,794,89,715,133,649,177"/>
<area shape="rect" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html#a67cfd02870c29500838fe2439e07dfb4" title=" " alt="" coords="807,98,988,160"/>
<area shape="poly" title=" " alt="" coords="723,172,792,154,793,159,724,177"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5fdd2c6692215a7d1894f2052ffc5609" title=" " alt="" coords="807,253,988,298"/>
<area shape="poly" title=" " alt="" coords="738,235,792,248,791,253,737,240"/>
<area shape="rect" href="../../dc/d3f/classROCKSDB__NAMESPACE_1_1Comparator.html#a03f7ac443b54e608e1fc508c34aaf8fa" title=" " alt="" coords="792,184,1003,229"/>
<area shape="poly" title=" " alt="" coords="742,204,777,204,777,209,742,209"/>
<area shape="poly" title=" " alt="" coords="851,29,850,19,858,10,874,5,898,3,924,5,939,12,937,17,923,10,897,8,875,10,861,15,855,21,856,28"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#abfbc137fc639f1f3dce840cdb45f588c" title=" " alt="" coords="1051,29,1232,74"/>
<area shape="poly" title=" " alt="" coords="989,49,1035,49,1035,54,989,54"/>
<area shape="poly" title=" " alt="" coords="1097,29,1096,19,1104,10,1119,5,1141,3,1166,5,1181,12,1179,17,1165,10,1141,8,1120,10,1107,15,1101,21,1103,28"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="1280,195,1461,239"/>
<area shape="poly" title=" " alt="" coords="981,250,1001,239,1015,224,1023,209,1032,193,1049,180,1081,168,1114,162,1180,161,1245,171,1301,187,1300,192,1244,176,1180,166,1114,167,1082,173,1052,185,1036,197,1028,211,1020,227,1004,243,983,255"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="807,781,988,826"/>
<area shape="poly" title=" " alt="" coords="696,760,792,780,791,785,695,765"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="1051,775,1232,819"/>
<area shape="poly" title=" " alt="" coords="695,743,840,751,1003,766,1036,771,1035,777,1002,772,840,756,695,749"/>
<area shape="poly" title=" " alt="" coords="989,799,1035,797,1035,803,989,804"/>
<area shape="poly" title=" " alt="" coords="621,465,690,389,738,346,791,308,801,303,803,307,794,313,742,350,694,393,625,468"/>
<area shape="poly" title=" " alt="" coords="551,467,550,456,559,447,577,442,604,440,634,442,652,449,650,454,633,448,604,445,578,447,562,452,555,458,557,466"/>
<area shape="rect" href="../../d9/dd7/classROCKSDB__NAMESPACE_1_1LocalSavePoint.html#a11dae84d5a584ba0f1555b278a190bef" title=" " alt="" coords="807,323,988,367"/>
<area shape="poly" title=" " alt="" coords="642,464,711,425,791,384,820,371,822,376,793,389,714,430,645,468"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a7fbb78a50c8af19df739f92320bd6b07" title=" " alt="" coords="1051,357,1232,418"/>
<area shape="poly" title=" " alt="" coords="667,464,727,444,792,428,918,406,1035,393,1036,398,918,411,793,433,729,450,669,469"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a6702556c024c8607ed8bd346ea8367c7" title=" " alt="" coords="803,467,992,511"/>
<area shape="poly" title=" " alt="" coords="695,486,787,486,787,492,695,492"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a40303fbe16e1a012b260024841977046" title=" " alt="" coords="807,611,988,655"/>
<area shape="poly" title=" " alt="" coords="696,502,746,521,761,532,771,542,794,566,845,600,842,604,791,570,767,546,758,536,743,526,694,507"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a239fbfa45d0b21b6882d7a2c9c7c77c0" title=" " alt="" coords="1051,560,1232,605"/>
<area shape="poly" title=" " alt="" coords="696,503,793,521,1036,563,1035,568,792,526,695,509"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c" title=" " alt="" coords="1051,699,1232,743"/>
<area shape="poly" title=" " alt="" coords="696,495,723,506,746,522,761,540,768,559,770,596,773,633,780,649,794,666,820,684,849,699,911,719,975,728,1035,729,1035,735,974,733,910,724,847,704,817,689,791,670,775,652,767,634,765,597,763,560,756,543,743,526,720,510,694,500"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a97a23b3a8089ca01207c23e2536a828c" title=" " alt="" coords="1051,264,1232,309"/>
<area shape="poly" title=" " alt="" coords="988,321,1035,309,1036,314,989,326"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a68c941da5f3083ca54122b381139b65b" title=" " alt="" coords="1051,195,1232,239"/>
<area shape="poly" title=" " alt="" coords="981,320,1001,308,1016,294,1025,280,1033,265,1049,250,1056,245,1059,250,1052,254,1038,268,1029,283,1020,298,1004,312,983,324"/>
<area shape="poly" title=" " alt="" coords="989,358,1036,367,1035,372,988,364"/>
<area shape="poly" title=" " alt="" coords="1217,261,1279,242,1281,247,1218,266"/>
<area shape="poly" title=" " alt="" coords="1232,214,1265,214,1265,220,1232,220"/>
<area shape="poly" title=" " alt="" coords="1096,356,1097,346,1106,338,1120,332,1141,330,1165,333,1180,340,1178,345,1164,338,1141,335,1122,337,1109,342,1102,349,1101,357"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ab737420aba13b6d2301d1da9682f036e" title=" " alt="" coords="1280,365,1461,410"/>
<area shape="poly" title=" " alt="" coords="1232,385,1265,385,1265,390,1232,390"/>
<area shape="poly" title=" " alt="" coords="1327,365,1326,355,1333,346,1348,341,1371,339,1396,341,1410,348,1408,353,1394,346,1371,344,1349,346,1336,351,1331,357,1332,364"/>
<area shape="poly" title=" " alt="" coords="851,467,850,457,858,448,874,442,898,440,924,443,939,449,937,454,923,448,897,445,875,447,861,452,855,458,856,466"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0afa96709ce3127ae462031b1009f797" title=" " alt="" coords="1051,467,1232,511"/>
<area shape="poly" title=" " alt="" coords="993,486,1035,486,1035,492,993,492"/>
<area shape="poly" title=" " alt="" coords="1097,467,1096,457,1104,448,1119,442,1141,440,1166,443,1181,449,1179,454,1165,448,1141,445,1120,447,1107,452,1101,458,1103,466"/>
<area shape="poly" title=" " alt="" coords="851,611,850,601,858,592,874,586,898,584,924,587,939,593,937,598,923,592,897,589,875,591,861,596,855,602,856,610"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a5230d45b66475f5e342a7654313d4c0e" title=" " alt="" coords="1051,629,1232,674"/>
<area shape="poly" title=" " alt="" coords="989,637,1035,641,1035,646,988,643"/>
<area shape="poly" title=" " alt="" coords="988,612,1035,602,1036,607,989,617"/>
<area shape="poly" title=" " alt="" coords="962,653,1064,690,1062,695,961,658"/>
<area shape="poly" title=" " alt="" coords="1097,560,1096,550,1104,541,1119,535,1141,533,1166,536,1181,542,1179,547,1165,541,1141,539,1120,541,1107,545,1101,551,1103,559"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a246d45df4bae3166d41c545f41368974" title=" " alt="" coords="1280,560,1461,605"/>
<area shape="poly" title=" " alt="" coords="1232,580,1265,580,1265,585,1232,585"/>
<area shape="poly" title=" " alt="" coords="1327,560,1326,550,1333,541,1348,535,1371,533,1396,536,1410,542,1408,547,1394,541,1371,539,1349,541,1336,545,1331,551,1332,559"/>
</map>
</div>

</div>
</div>
<a id="acdd1e79bcfb0af527f569594e841a5d7" name="acdd1e79bcfb0af527f569594e841a5d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdd1e79bcfb0af527f569594e841a5d7">&#9670;&#160;</a></span>TEST_F() <span class="overload">[2/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Delete</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00475">475</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>                           {</div>
<div class="line"><span class="lineno">  476</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  477</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  478</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  479</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  480</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  481</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  482</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  483</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  484</span>  }</div>
<div class="line"><span class="lineno">  485</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i += 5) {</div>
<div class="line"><span class="lineno">  486</span>    Delete(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;data);</div>
<div class="line"><span class="lineno">  487</span>  }</div>
<div class="line"><span class="lineno">  488</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  489</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Random_html"><div class="ttname"><a href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">ROCKSDB_NAMESPACE::Random</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d79/random_8h_source.html#l00023">random.h:23</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a21c53fe7e7eb9648831ed5f63e021bf3"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::disable_background_tasks</a></div><div class="ttdeci">bool disable_background_tasks</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00083">blob_db.h:83</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a289326c43b447a98498dbc7337db3dec"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::min_blob_size</a></div><div class="ttdeci">uint64_t min_blob_size</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00059">blob_db.h:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4171c6845e227f59aa8654ea1cd09f39" name="a4171c6845e227f59aa8654ea1cd09f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4171c6845e227f59aa8654ea1cd09f39">&#9670;&#160;</a></span>TEST_F() <span class="overload">[3/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DeleteBatch</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00491">491</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  491</span>                                {</div>
<div class="line"><span class="lineno">  492</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  493</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  494</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  495</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  496</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  497</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  498</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd);</div>
<div class="line"><span class="lineno">  499</span>  }</div>
<div class="line"><span class="lineno">  500</span>  <a class="code hl_class" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a> batch;</div>
<div class="line"><span class="lineno">  501</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  502</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(batch.<a class="code hl_function" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a500e8d2d32d50fef0625362e5cb40918">Delete</a>(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i)));</div>
<div class="line"><span class="lineno">  503</span>  }</div>
<div class="line"><span class="lineno">  504</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Write(WriteOptions(), &amp;batch));</div>
<div class="line"><span class="lineno">  505</span>  <span class="comment">// DB should be empty.</span></div>
<div class="line"><span class="lineno">  506</span>  VerifyDB({});</div>
<div class="line"><span class="lineno">  507</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1WriteBatch_html_a500e8d2d32d50fef0625362e5cb40918"><div class="ttname"><a href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a500e8d2d32d50fef0625362e5cb40918">ROCKSDB_NAMESPACE::WriteBatch::Delete</a></div><div class="ttdeci">Status Delete(ColumnFamilyHandle *column_family, const Slice &amp;key) override</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d61/write__batch_8cc_source.html#l01274">write_batch.cc:1274</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4171c6845e227f59aa8654ea1cd09f39_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4171c6845e227f59aa8654ea1cd09f39_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4171c6845e227f59aa8654ea1cd09f39_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4171c6845e227f59aa8654ea1cd09f39_cgraph">
<area shape="rect" title=" " alt="" coords="5,529,187,574"/>
<area shape="rect" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#a500e8d2d32d50fef0625362e5cb40918" title=" " alt="" coords="235,529,416,574"/>
<area shape="poly" title=" " alt="" coords="187,549,219,549,219,554,187,554"/>
<area shape="poly" title=" " alt="" coords="281,529,280,519,288,510,303,505,325,503,350,505,365,512,363,517,349,510,325,508,304,510,291,515,285,521,287,528"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a545aa43fb99f0048a372ec53982053e3" title=" " alt="" coords="514,482,695,544"/>
<area shape="poly" title=" " alt="" coords="416,536,498,525,498,530,417,542"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#afc4f0631869904179079cd3ff6f4f51a" title=" " alt="" coords="466,176,742,237"/>
<area shape="poly" title=" " alt="" coords="343,527,566,248,570,251,347,531"/>
<area shape="rect" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html#af93c0d3c0f3f8040a77722ab56349425" title=" " alt="" coords="464,568,744,613"/>
<area shape="poly" title=" " alt="" coords="417,562,449,566,448,571,416,567"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73" title=" " alt="" coords="514,704,695,749"/>
<area shape="poly" title=" " alt="" coords="364,572,555,693,552,698,361,577"/>
<area shape="poly" title=" " alt="" coords="550,482,551,472,561,463,579,457,604,456,634,458,652,466,650,471,633,464,604,461,580,463,564,468,556,474,555,482"/>
<area shape="rect" href="../../d9/dd7/classROCKSDB__NAMESPACE_1_1LocalSavePoint.html#a11dae84d5a584ba0f1555b278a190bef" title=" " alt="" coords="807,491,988,535"/>
<area shape="poly" title=" " alt="" coords="695,510,791,510,791,516,695,516"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a7fbb78a50c8af19df739f92320bd6b07" title=" " alt="" coords="1051,569,1232,630"/>
<area shape="poly" title=" " alt="" coords="696,528,793,545,1036,582,1035,588,792,550,695,533"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a6702556c024c8607ed8bd346ea8367c7" title=" " alt="" coords="803,635,992,679"/>
<area shape="poly" title=" " alt="" coords="696,533,746,553,771,570,794,590,847,624,844,629,791,594,767,575,743,558,694,538"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#aa212abea825ba5e37616dbb88465aee3" title=" " alt="" coords="795,328,1000,373"/>
<area shape="poly" title=" " alt="" coords="643,479,710,431,791,383,804,377,806,382,794,387,713,435,646,484"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a239fbfa45d0b21b6882d7a2c9c7c77c0" title=" " alt="" coords="807,421,988,466"/>
<area shape="poly" title=" " alt="" coords="695,489,791,466,792,471,696,494"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a97a23b3a8089ca01207c23e2536a828c" title=" " alt="" coords="1051,476,1232,521"/>
<area shape="poly" title=" " alt="" coords="988,505,1035,502,1035,507,989,510"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a68c941da5f3083ca54122b381139b65b" title=" " alt="" coords="1051,407,1232,451"/>
<area shape="poly" title=" " alt="" coords="967,488,1002,476,1062,454,1064,459,1004,481,969,493"/>
<area shape="poly" title=" " alt="" coords="964,533,1039,561,1037,566,962,539"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="1280,407,1461,451"/>
<area shape="poly" title=" " alt="" coords="1217,473,1279,454,1281,459,1218,478"/>
<area shape="poly" title=" " alt="" coords="1232,426,1265,426,1265,432,1232,432"/>
<area shape="poly" title=" " alt="" coords="1096,568,1097,558,1106,550,1120,544,1141,542,1165,545,1180,552,1178,557,1164,550,1141,547,1122,549,1109,554,1102,561,1101,569"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ab737420aba13b6d2301d1da9682f036e" title=" " alt="" coords="1280,577,1461,622"/>
<area shape="poly" title=" " alt="" coords="1232,597,1265,597,1265,602,1232,602"/>
<area shape="poly" title=" " alt="" coords="1327,577,1326,567,1333,558,1348,553,1371,551,1396,553,1410,560,1408,565,1394,558,1371,556,1349,558,1336,563,1331,569,1332,576"/>
<area shape="poly" title=" " alt="" coords="851,635,850,625,858,616,874,610,898,608,924,611,939,617,937,622,923,616,897,613,875,615,861,620,855,626,856,634"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0afa96709ce3127ae462031b1009f797" title=" " alt="" coords="1051,679,1232,723"/>
<area shape="poly" title=" " alt="" coords="993,672,1036,679,1035,685,992,677"/>
<area shape="poly" title=" " alt="" coords="1097,679,1096,669,1104,660,1119,654,1141,652,1166,655,1181,661,1179,666,1165,660,1141,657,1120,659,1107,664,1101,670,1103,678"/>
<area shape="poly" title=" " alt="" coords="851,328,850,318,858,309,874,303,898,301,924,304,939,310,937,315,923,309,897,307,875,309,861,313,855,319,856,327"/>
<area shape="poly" title=" " alt="" coords="851,421,850,411,858,402,874,397,898,395,924,397,939,404,937,409,923,402,897,400,875,402,861,407,855,413,856,420"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a246d45df4bae3166d41c545f41368974" title=" " alt="" coords="1051,337,1232,382"/>
<area shape="poly" title=" " alt="" coords="964,418,1059,385,1061,390,966,423"/>
<area shape="poly" title=" " alt="" coords="1097,337,1096,327,1104,318,1119,313,1141,311,1166,313,1181,320,1179,325,1165,318,1141,316,1120,318,1107,323,1101,329,1103,336"/>
<area shape="poly" title=" " alt="" coords="550,175,551,165,561,156,579,151,604,149,634,152,652,159,650,164,633,157,604,154,580,156,564,161,556,167,555,176"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a222a447b6d8d737025672b927acc7d6a" title=" " alt="" coords="807,29,988,74"/>
<area shape="poly" title=" " alt="" coords="646,173,713,128,791,84,805,78,808,82,794,89,715,133,649,177"/>
<area shape="rect" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html#a67cfd02870c29500838fe2439e07dfb4" title=" " alt="" coords="807,98,988,160"/>
<area shape="poly" title=" " alt="" coords="723,172,792,154,793,159,724,177"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5fdd2c6692215a7d1894f2052ffc5609" title=" " alt="" coords="1051,244,1232,289"/>
<area shape="poly" title=" " alt="" coords="743,231,793,238,918,251,1035,259,1035,264,918,257,792,244,742,236"/>
<area shape="rect" href="../../dc/d3f/classROCKSDB__NAMESPACE_1_1Comparator.html#a03f7ac443b54e608e1fc508c34aaf8fa" title=" " alt="" coords="792,184,1003,229"/>
<area shape="poly" title=" " alt="" coords="742,204,777,204,777,209,742,209"/>
<area shape="poly" title=" " alt="" coords="851,29,850,19,858,10,874,5,898,3,924,5,939,12,937,17,923,10,897,8,875,10,861,15,855,21,856,28"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#abfbc137fc639f1f3dce840cdb45f588c" title=" " alt="" coords="1051,29,1232,74"/>
<area shape="poly" title=" " alt="" coords="989,49,1035,49,1035,54,989,54"/>
<area shape="poly" title=" " alt="" coords="1097,29,1096,19,1104,10,1119,5,1141,3,1166,5,1181,12,1179,17,1165,10,1141,8,1120,10,1107,15,1101,21,1103,28"/>
<area shape="poly" title=" " alt="" coords="1211,287,1233,299,1293,345,1342,393,1338,397,1290,349,1231,303,1209,292"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="807,704,988,749"/>
<area shape="poly" title=" " alt="" coords="695,724,791,724,791,729,695,729"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="1051,756,1232,801"/>
<area shape="poly" title=" " alt="" coords="696,743,793,758,918,769,1035,774,1035,779,918,774,792,764,695,748"/>
<area shape="poly" title=" " alt="" coords="989,743,1036,753,1035,758,988,748"/>
</map>
</div>

</div>
</div>
<a id="a5efcff8cd82df7c11012b8aab63ee97b" name="a5efcff8cd82df7c11012b8aab63ee97b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5efcff8cd82df7c11012b8aab63ee97b">&#9670;&#160;</a></span>TEST_F() <span class="overload">[4/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DisableFileDeletions</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l02028">2028</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2028</span>                                         {</div>
<div class="line"><span class="lineno"> 2029</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 2030</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2031</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno"> 2032</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 2033</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>, &amp;data));</div>
<div class="line"><span class="lineno"> 2034</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2035</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno"> 2036</span>  <span class="keyword">auto</span> blob_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 2037</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_file));</div>
<div class="line"><span class="lineno"> 2038</span>  blob_db_impl()-&gt;TEST_ObsoleteBlobFile(blob_file);</div>
<div class="line"><span class="lineno"> 2039</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2040</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2041</span>  <span class="comment">// Call DisableFileDeletions twice.</span></div>
<div class="line"><span class="lineno"> 2042</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;DisableFileDeletions());</div>
<div class="line"><span class="lineno"> 2043</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;DisableFileDeletions());</div>
<div class="line"><span class="lineno"> 2044</span>  <span class="comment">// File deletions should be disabled.</span></div>
<div class="line"><span class="lineno"> 2045</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2046</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2047</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2048</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 2049</span>  <span class="comment">// Enable file deletions once. File deletion will later get enabled when</span></div>
<div class="line"><span class="lineno"> 2050</span>  <span class="comment">// `EnableFileDeletions` called for a second time.</span></div>
<div class="line"><span class="lineno"> 2051</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;EnableFileDeletions());</div>
<div class="line"><span class="lineno"> 2052</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2053</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2054</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2055</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 2056</span>  <span class="comment">// Call EnableFileDeletions a second time.</span></div>
<div class="line"><span class="lineno"> 2057</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;EnableFileDeletions());</div>
<div class="line"><span class="lineno"> 2058</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2059</span>  <span class="comment">// File should be deleted by now.</span></div>
<div class="line"><span class="lineno"> 2060</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2061</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2062</span>  VerifyDB({});</div>
<div class="line"><span class="lineno"> 2063</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a679d7603de363fac03d4a65422ece27c" name="a679d7603de363fac03d4a65422ece27c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a679d7603de363fac03d4a65422ece27c">&#9670;&#160;</a></span>TEST_F() <span class="overload">[5/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EvictExpiredFile</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01994">1994</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1994</span>                                     {</div>
<div class="line"><span class="lineno"> 1995</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1996</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 100;</div>
<div class="line"><span class="lineno"> 1997</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 1998</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1999</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 2000</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 2001</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 2002</span>  mock_clock_-&gt;SetCurrentTime(50);</div>
<div class="line"><span class="lineno"> 2003</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 2004</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>, 100, &amp;data));</div>
<div class="line"><span class="lineno"> 2005</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2006</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno"> 2007</span>  <span class="keyword">auto</span> blob_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 2008</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(blob_file-&gt;Immutable());</div>
<div class="line"><span class="lineno"> 2009</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(blob_file-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 2010</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 2011</span>  mock_clock_-&gt;SetCurrentTime(250);</div>
<div class="line"><span class="lineno"> 2012</span>  <span class="comment">// The key should expired now.</span></div>
<div class="line"><span class="lineno"> 2013</span>  blob_db_impl()-&gt;TEST_EvictExpiredFiles();</div>
<div class="line"><span class="lineno"> 2014</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2015</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2016</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_file-&gt;Immutable());</div>
<div class="line"><span class="lineno"> 2017</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_file-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 2018</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2019</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 2020</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_GetObsoleteFiles().size());</div>
<div class="line"><span class="lineno"> 2021</span>  <span class="comment">// Make sure we don&#39;t return garbage value after blob file being evicted,</span></div>
<div class="line"><span class="lineno"> 2022</span>  <span class="comment">// but the blob index still exists in the LSM tree.</span></div>
<div class="line"><span class="lineno"> 2023</span>  std::string val;</div>
<div class="line"><span class="lineno"> 2024</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), <span class="stringliteral">&quot;foo&quot;</span>, &amp;val).IsNotFound());</div>
<div class="line"><span class="lineno"> 2025</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;&quot;</span>, val);</div>
<div class="line"><span class="lineno"> 2026</span>}</div>
<div class="ttc" id="agtest_8h_html_a8197fa52f3538588d20d8af4834c9003"><div class="ttname"><a href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a></div><div class="ttdeci">#define ASSERT_FALSE(condition)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d73/gtest_8h_source.html#l21685">gtest.h:21685</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a97eda21126ffcde76fec2b594eaeabb6"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::ttl_range_secs</a></div><div class="ttdeci">uint64_t ttl_range_secs</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00055">blob_db.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd4a4bb06333fe51562f83c6c3a11f38" name="acd4a4bb06333fe51562f83c6c3a11f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd4a4bb06333fe51562f83c6c3a11f38">&#9670;&#160;</a></span>TEST_F() <span class="overload">[6/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIFOEviction</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01116">1116</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1116</span>                                 {</div>
<div class="line"><span class="lineno"> 1117</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1118</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = 200;</div>
<div class="line"><span class="lineno"> 1119</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">blob_file_size</a> = 100;</div>
<div class="line"><span class="lineno"> 1120</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1121</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1122</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>  std::atomic&lt;int&gt; evict_count{0};</div>
<div class="line"><span class="lineno"> 1125</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 1126</span>      <span class="stringliteral">&quot;BlobDBImpl::EvictOldestBlobFile:Evicted&quot;</span>,</div>
<div class="line"><span class="lineno"> 1127</span>      [&amp;](<span class="keywordtype">void</span> *) { evict_count++; });</div>
<div class="line"><span class="lineno"> 1128</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>  <span class="comment">// Each stored blob has an overhead of 32 bytes currently.</span></div>
<div class="line"><span class="lineno"> 1131</span>  <span class="comment">// So a 100 byte blob should take up 132 bytes.</span></div>
<div class="line"><span class="lineno"> 1132</span>  std::string value(100, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1133</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;PutWithTTL(WriteOptions(), <span class="stringliteral">&quot;key1&quot;</span>, value, 10));</div>
<div class="line"><span class="lineno"> 1134</span>  VerifyDB({{<span class="stringliteral">&quot;key1&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1135</span> </div>
<div class="line"><span class="lineno"> 1136</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>  <span class="comment">// Adding another 100 bytes blob would take the total size to 264 bytes</span></div>
<div class="line"><span class="lineno"> 1139</span>  <span class="comment">// (2*132). max_db_size will be exceeded</span></div>
<div class="line"><span class="lineno"> 1140</span>  <span class="comment">// than max_db_size and trigger FIFO eviction.</span></div>
<div class="line"><span class="lineno"> 1141</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;PutWithTTL(WriteOptions(), <span class="stringliteral">&quot;key2&quot;</span>, value, 60));</div>
<div class="line"><span class="lineno"> 1142</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, evict_count);</div>
<div class="line"><span class="lineno"> 1143</span>  <span class="comment">// key1 will exist until corresponding file be deleted.</span></div>
<div class="line"><span class="lineno"> 1144</span>  VerifyDB({{<span class="stringliteral">&quot;key1&quot;</span>, value}, {<span class="stringliteral">&quot;key2&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1145</span> </div>
<div class="line"><span class="lineno"> 1146</span>  <span class="comment">// Adding another 100 bytes blob without TTL.</span></div>
<div class="line"><span class="lineno"> 1147</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Put(WriteOptions(), <span class="stringliteral">&quot;key3&quot;</span>, value));</div>
<div class="line"><span class="lineno"> 1148</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, evict_count);</div>
<div class="line"><span class="lineno"> 1149</span>  <span class="comment">// key1 and key2 will exist until corresponding file be deleted.</span></div>
<div class="line"><span class="lineno"> 1150</span>  VerifyDB({{<span class="stringliteral">&quot;key1&quot;</span>, value}, {<span class="stringliteral">&quot;key2&quot;</span>, value}, {<span class="stringliteral">&quot;key3&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1151</span> </div>
<div class="line"><span class="lineno"> 1152</span>  <span class="comment">// The fourth blob file, without TTL.</span></div>
<div class="line"><span class="lineno"> 1153</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Put(WriteOptions(), <span class="stringliteral">&quot;key4&quot;</span>, value));</div>
<div class="line"><span class="lineno"> 1154</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(3, evict_count);</div>
<div class="line"><span class="lineno"> 1155</span>  VerifyDB(</div>
<div class="line"><span class="lineno"> 1156</span>      {{<span class="stringliteral">&quot;key1&quot;</span>, value}, {<span class="stringliteral">&quot;key2&quot;</span>, value}, {<span class="stringliteral">&quot;key3&quot;</span>, value}, {<span class="stringliteral">&quot;key4&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 1159</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(4, blob_files.size());</div>
<div class="line"><span class="lineno"> 1160</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_files[0]-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 1161</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_files[1]-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 1162</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_files[2]-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 1163</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(blob_files[3]-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 1164</span>  <span class="keyword">auto</span> obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1165</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(3, obsolete_files.size());</div>
<div class="line"><span class="lineno"> 1166</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files[0], obsolete_files[0]);</div>
<div class="line"><span class="lineno"> 1167</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files[1], obsolete_files[1]);</div>
<div class="line"><span class="lineno"> 1168</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files[2], obsolete_files[2]);</div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1171</span>  obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1172</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(obsolete_files.empty());</div>
<div class="line"><span class="lineno"> 1173</span>  VerifyDB({{<span class="stringliteral">&quot;key4&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1174</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1SyncPoint_html_ab51d6b4ff6b172485e7fd0125304ebaf"><div class="ttname"><a href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">ROCKSDB_NAMESPACE::SyncPoint::GetInstance</a></div><div class="ttdeci">static SyncPoint * GetInstance()</div><div class="ttdef"><b>Definition</b> <a href="../../db/d23/sync__point_8cc_source.html#l00017">sync_point.cc:17</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a1dfd2b090fb9dc29d916905b28109c6e"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::is_fifo</a></div><div class="ttdeci">bool is_fifo</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00042">blob_db.h:42</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_ab3f8ef9276f31a1872268ac743f7a88a"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::blob_file_size</a></div><div class="ttdeci">uint64_t blob_file_size</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00068">blob_db.h:68</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_ac3012512c247e040f7e3ff4809c91858"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::max_db_size</a></div><div class="ttdeci">uint64_t max_db_size</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00047">blob_db.h:47</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_acd4a4bb06333fe51562f83c6c3a11f38_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_acd4a4bb06333fe51562f83c6c3a11f38_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_acd4a4bb06333fe51562f83c6c3a11f38_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_acd4a4bb06333fe51562f83c6c3a11f38_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,187,74"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="187,49,219,49,219,54,187,54"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,29,645,74"/>
<area shape="poly" title=" " alt="" coords="416,49,449,49,449,54,416,54"/>
<area shape="poly" title=" " alt="" coords="511,29,510,19,517,10,532,5,555,3,580,5,594,12,592,17,578,10,555,8,533,10,520,15,515,21,516,28"/>
</map>
</div>

</div>
</div>
<a id="a6c6a7b66d0d75039ba61a40f96051a99" name="a6c6a7b66d0d75039ba61a40f96051a99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c6a7b66d0d75039ba61a40f96051a99">&#9670;&#160;</a></span>TEST_F() <span class="overload">[7/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIFOEviction_NoEnoughBlobFilesToEvict</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01196">1196</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1196</span>                                                          {</div>
<div class="line"><span class="lineno"> 1197</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1198</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1199</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 100;</div>
<div class="line"><span class="lineno"> 1200</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1201</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1202</span>  <span class="comment">// Use mock env to stop wall clock.</span></div>
<div class="line"><span class="lineno"> 1203</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1204</span>  options.<a class="code hl_variable" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a9c88ac11c0157cad1d949db3cb0eb3d7">disable_auto_compactions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1205</span>  <span class="keyword">auto</span> statistics = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1206</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = statistics;</div>
<div class="line"><span class="lineno"> 1207</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;LoadDependency(</div>
<div class="line"><span class="lineno"> 1210</span>      {{<span class="stringliteral">&quot;DBImpl::NotifyOnFlushCompleted::PostAllOnFlushCompleted&quot;</span>,</div>
<div class="line"><span class="lineno"> 1211</span>        <span class="stringliteral">&quot;BlobDBTest.FIFOEviction_NoEnoughBlobFilesToEvict:AfterFlush&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1214</span> </div>
<div class="line"><span class="lineno"> 1215</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_live_sst_size());</div>
<div class="line"><span class="lineno"> 1216</span>  std::string small_value(50, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1217</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1218</span>  <span class="comment">// Insert some data into LSM tree to make sure FIFO eviction take SST</span></div>
<div class="line"><span class="lineno"> 1219</span>  <span class="comment">// file size into account.</span></div>
<div class="line"><span class="lineno"> 1220</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; i++) {</div>
<div class="line"><span class="lineno"> 1221</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), small_value, &amp;data));</div>
<div class="line"><span class="lineno"> 1222</span>  }</div>
<div class="line"><span class="lineno"> 1223</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Flush(FlushOptions()));</div>
<div class="line"><span class="lineno"> 1224</span> </div>
<div class="line"><span class="lineno"> 1225</span>  uint64_t live_sst_size = 0;</div>
<div class="line"><span class="lineno"> 1226</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;GetIntProperty(DB::Properties::kTotalSstFilesSize,</div>
<div class="line"><span class="lineno"> 1227</span>                                       &amp;live_sst_size));</div>
<div class="line"><span class="lineno"> 1228</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(live_sst_size &gt; 0);</div>
<div class="line"><span class="lineno"> 1229</span> </div>
<div class="line"><span class="lineno"> 1230</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(</div>
<div class="line"><span class="lineno"> 1231</span>      <span class="stringliteral">&quot;BlobDBTest.FIFOEviction_NoEnoughBlobFilesToEvict:AfterFlush&quot;</span>);</div>
<div class="line"><span class="lineno"> 1232</span> </div>
<div class="line"><span class="lineno"> 1233</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_sst_size, blob_db_impl()-&gt;TEST_live_sst_size());</div>
<div class="line"><span class="lineno"> 1234</span> </div>
<div class="line"><span class="lineno"> 1235</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = live_sst_size + 2000;</div>
<div class="line"><span class="lineno"> 1236</span>  Reopen(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1237</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_sst_size, blob_db_impl()-&gt;TEST_live_sst_size());</div>
<div class="line"><span class="lineno"> 1238</span> </div>
<div class="line"><span class="lineno"> 1239</span>  std::string value_1k(1000, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1240</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key1&quot;</span>, value_1k, 60, &amp;data));</div>
<div class="line"><span class="lineno"> 1241</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1242</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1243</span>  <span class="comment">// large_key2 evicts large_key1</span></div>
<div class="line"><span class="lineno"> 1244</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key2&quot;</span>, value_1k, 60, &amp;data));</div>
<div class="line"><span class="lineno"> 1245</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1246</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1247</span>  data.erase(<span class="stringliteral">&quot;large_key1&quot;</span>);</div>
<div class="line"><span class="lineno"> 1248</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1249</span>  <span class="comment">// large_key3 get no enough space even after evicting large_key2, so it</span></div>
<div class="line"><span class="lineno"> 1250</span>  <span class="comment">// instead return no space error.</span></div>
<div class="line"><span class="lineno"> 1251</span>  std::string value_2k(2000, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1252</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(PutWithTTL(<span class="stringliteral">&quot;large_key3&quot;</span>, value_2k, 60).IsNoSpace());</div>
<div class="line"><span class="lineno"> 1253</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1254</span>  <span class="comment">// Verify large_key2 still exists.</span></div>
<div class="line"><span class="lineno"> 1255</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1256</span> </div>
<div class="line"><span class="lineno"> 1257</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 1258</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a8c3db4bd98583598f1033f310ec2959a"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">ROCKSDB_NAMESPACE::CreateDBStatistics</a></div><div class="ttdeci">std::shared_ptr&lt; Statistics &gt; CreateDBStatistics()</div><div class="ttdef"><b>Definition</b> <a href="../../de/d55/statistics_8cc_source.html#l00345">statistics.cc:345</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ColumnFamilyOptions_html_a9c88ac11c0157cad1d949db3cb0eb3d7"><div class="ttname"><a href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a9c88ac11c0157cad1d949db3cb0eb3d7">ROCKSDB_NAMESPACE::ColumnFamilyOptions::disable_auto_compactions</a></div><div class="ttdeci">bool disable_auto_compactions</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00303">options.h:303</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DBOptions_html_a81c15e9e94de36077aa52dfec56e89e1"><div class="ttname"><a href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">ROCKSDB_NAMESPACE::DBOptions::statistics</a></div><div class="ttdeci">std::shared_ptr&lt; Statistics &gt; statistics</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00749">options.h:749</a></div></div>
<div class="ttc" id="async__point_8h_html_aea27634f18fba890fccd36a797846e54"><div class="ttname"><a href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a></div><div class="ttdeci">#define TEST_SYNC_POINT(x)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d8e/sync__point_8h_source.html#l00159">sync_point.h:159</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6c6a7b66d0d75039ba61a40f96051a99_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6c6a7b66d0d75039ba61a40f96051a99_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6c6a7b66d0d75039ba61a40f96051a99_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6c6a7b66d0d75039ba61a40f96051a99_cgraph">
<area shape="rect" title=" " alt="" coords="5,76,187,121"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="186,77,219,71,220,76,187,83"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,123,416,167"/>
<area shape="poly" title=" " alt="" coords="187,114,220,121,219,126,186,119"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="poly" title=" " alt="" coords="281,123,280,113,288,104,303,98,325,96,350,99,365,105,363,110,349,104,325,101,304,103,291,108,285,114,287,122"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,123,645,167"/>
<area shape="poly" title=" " alt="" coords="416,142,449,142,449,148,416,148"/>
<area shape="poly" title=" " alt="" coords="511,123,510,113,517,104,532,98,555,96,580,99,594,105,592,110,578,104,555,101,533,103,520,108,515,114,516,122"/>
</map>
</div>

</div>
</div>
<a id="a10af16b64fbc9b051844e67ae777c46c" name="a10af16b64fbc9b051844e67ae777c46c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10af16b64fbc9b051844e67ae777c46c">&#9670;&#160;</a></span>TEST_F() <span class="overload">[8/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIFOEviction_NoOldestFileToEvict</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01176">1176</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1176</span>                                                     {</div>
<div class="line"><span class="lineno"> 1177</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1178</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1179</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = 1000;</div>
<div class="line"><span class="lineno"> 1180</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">blob_file_size</a> = 5000;</div>
<div class="line"><span class="lineno"> 1181</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1182</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1183</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno"> 1184</span> </div>
<div class="line"><span class="lineno"> 1185</span>  std::atomic&lt;int&gt; evict_count{0};</div>
<div class="line"><span class="lineno"> 1186</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 1187</span>      <span class="stringliteral">&quot;BlobDBImpl::EvictOldestBlobFile:Evicted&quot;</span>,</div>
<div class="line"><span class="lineno"> 1188</span>      [&amp;](<span class="keywordtype">void</span> *) { evict_count++; });</div>
<div class="line"><span class="lineno"> 1189</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>  std::string value(2000, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1192</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, std::string(2000, <span class="charliteral">&#39;v&#39;</span>)).IsNoSpace());</div>
<div class="line"><span class="lineno"> 1193</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, evict_count);</div>
<div class="line"><span class="lineno"> 1194</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10af16b64fbc9b051844e67ae777c46c_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10af16b64fbc9b051844e67ae777c46c_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10af16b64fbc9b051844e67ae777c46c_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10af16b64fbc9b051844e67ae777c46c_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,187,74"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="187,49,219,49,219,54,187,54"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,29,645,74"/>
<area shape="poly" title=" " alt="" coords="416,49,449,49,449,54,416,54"/>
<area shape="poly" title=" " alt="" coords="511,29,510,19,517,10,532,5,555,3,580,5,594,12,592,17,578,10,555,8,533,10,520,15,515,21,516,28"/>
</map>
</div>

</div>
</div>
<a id="a4c4b07ba120e0478e56ab6052d4836c5" name="a4c4b07ba120e0478e56ab6052d4836c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c4b07ba120e0478e56ab6052d4836c5">&#9670;&#160;</a></span>TEST_F() <span class="overload">[9/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FIFOEviction_TriggerOnSSTSizeChange</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01262">1262</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1262</span>                                                        {</div>
<div class="line"><span class="lineno"> 1263</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1264</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = 1000;</div>
<div class="line"><span class="lineno"> 1265</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1266</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 100;</div>
<div class="line"><span class="lineno"> 1267</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1268</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1269</span>  <span class="comment">// Use mock env to stop wall clock.</span></div>
<div class="line"><span class="lineno"> 1270</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1271</span>  <span class="keyword">auto</span> statistics = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1272</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = statistics;</div>
<div class="line"><span class="lineno"> 1273</span>  options.<a class="code hl_variable" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a741ed6f3bfae61559e342f407f7d49ba">compression</a> = <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#aacfc9de2946b33f6a70b6fce4aec79d5aa1babd632a7e989f50266abdf8d61c1d">kNoCompression</a>;</div>
<div class="line"><span class="lineno"> 1274</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1275</span> </div>
<div class="line"><span class="lineno"> 1276</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;LoadDependency(</div>
<div class="line"><span class="lineno"> 1277</span>      {{<span class="stringliteral">&quot;DBImpl::NotifyOnFlushCompleted::PostAllOnFlushCompleted&quot;</span>,</div>
<div class="line"><span class="lineno"> 1278</span>        <span class="stringliteral">&quot;BlobDBTest.FIFOEviction_TriggerOnSSTSizeChange:AfterFlush&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1279</span> </div>
<div class="line"><span class="lineno"> 1280</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1281</span> </div>
<div class="line"><span class="lineno"> 1282</span>  std::string value(800, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1283</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key&quot;</span>, value, 60));</div>
<div class="line"><span class="lineno"> 1284</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1285</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1286</span>  VerifyDB({{<span class="stringliteral">&quot;large_key&quot;</span>, value}});</div>
<div class="line"><span class="lineno"> 1287</span> </div>
<div class="line"><span class="lineno"> 1288</span>  <span class="comment">// Insert some small keys and flush to bring DB out of space.</span></div>
<div class="line"><span class="lineno"> 1289</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1290</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><span class="lineno"> 1291</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), <span class="stringliteral">&quot;v&quot;</span>, &amp;data));</div>
<div class="line"><span class="lineno"> 1292</span>  }</div>
<div class="line"><span class="lineno"> 1293</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Flush(FlushOptions()));</div>
<div class="line"><span class="lineno"> 1294</span> </div>
<div class="line"><span class="lineno"> 1295</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.FIFOEviction_TriggerOnSSTSizeChange:AfterFlush&quot;</span>);</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>  <span class="comment">// Verify large_key is deleted by FIFO eviction.</span></div>
<div class="line"><span class="lineno"> 1298</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1299</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1300</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1301</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1302</span> </div>
<div class="line"><span class="lineno"> 1303</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 1304</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_aacfc9de2946b33f6a70b6fce4aec79d5aa1babd632a7e989f50266abdf8d61c1d"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#aacfc9de2946b33f6a70b6fce4aec79d5aa1babd632a7e989f50266abdf8d61c1d">ROCKSDB_NAMESPACE::kNoCompression</a></div><div class="ttdeci">@ kNoCompression</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d17/compression__type_8h_source.html#l00021">compression_type.h:21</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1ColumnFamilyOptions_html_a741ed6f3bfae61559e342f407f7d49ba"><div class="ttname"><a href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a741ed6f3bfae61559e342f407f7d49ba">ROCKSDB_NAMESPACE::ColumnFamilyOptions::compression</a></div><div class="ttdeci">CompressionType compression</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00214">options.h:214</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4c4b07ba120e0478e56ab6052d4836c5_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4c4b07ba120e0478e56ab6052d4836c5_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4c4b07ba120e0478e56ab6052d4836c5_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a4c4b07ba120e0478e56ab6052d4836c5_cgraph">
<area shape="rect" title=" " alt="" coords="5,76,187,121"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="186,77,219,71,220,76,187,83"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,123,416,167"/>
<area shape="poly" title=" " alt="" coords="187,114,220,121,219,126,186,119"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="poly" title=" " alt="" coords="281,123,280,113,288,104,303,98,325,96,350,99,365,105,363,110,349,104,325,101,304,103,291,108,285,114,287,122"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,123,645,167"/>
<area shape="poly" title=" " alt="" coords="416,142,449,142,449,148,416,148"/>
<area shape="poly" title=" " alt="" coords="511,123,510,113,517,104,532,98,555,96,580,99,594,105,592,110,578,104,555,101,533,103,520,108,515,114,516,122"/>
</map>
</div>

</div>
</div>
<a id="a29c0ab647804cbebc4ee70e26454446b" name="a29c0ab647804cbebc4ee70e26454446b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c0ab647804cbebc4ee70e26454446b">&#9670;&#160;</a></span>TEST_F() <span class="overload">[10/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FilterExpiredBlobIndex</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01543">1543</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1543</span>                                           {</div>
<div class="line"><span class="lineno"> 1544</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8d5782281e233ff3cad1a8657a06fae3">kNumKeys</a> = 100;</div>
<div class="line"><span class="lineno"> 1545</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumPuts = 1000;</div>
<div class="line"><span class="lineno"> 1546</span>  <span class="keyword">constexpr</span> uint64_t kMaxExpiration = 1000;</div>
<div class="line"><span class="lineno"> 1547</span>  <span class="keyword">constexpr</span> uint64_t kCompactTime = 500;</div>
<div class="line"><span class="lineno"> 1548</span>  <span class="keyword">constexpr</span> uint64_t kMinBlobSize = 100;</div>
<div class="line"><span class="lineno"> 1549</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno"> 1550</span>  mock_clock_-&gt;SetCurrentTime(0);</div>
<div class="line"><span class="lineno"> 1551</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1552</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = kMinBlobSize;</div>
<div class="line"><span class="lineno"> 1553</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1554</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1555</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1556</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1557</span> </div>
<div class="line"><span class="lineno"> 1558</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1559</span>  std::map&lt;std::string, std::string&gt; data_after_compact;</div>
<div class="line"><span class="lineno"> 1560</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumPuts; i++) {</div>
<div class="line"><span class="lineno"> 1561</span>    <span class="keywordtype">bool</span> is_small_value = rnd.Next() % 2;</div>
<div class="line"><span class="lineno"> 1562</span>    <span class="keywordtype">bool</span> has_ttl = rnd.Next() % 2;</div>
<div class="line"><span class="lineno"> 1563</span>    uint64_t expiration = rnd.Next() % kMaxExpiration;</div>
<div class="line"><span class="lineno"> 1564</span>    <span class="keywordtype">int</span> len = is_small_value ? 10 : 200;</div>
<div class="line"><span class="lineno"> 1565</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(rnd.Next() % <a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8d5782281e233ff3cad1a8657a06fae3">kNumKeys</a>);</div>
<div class="line"><span class="lineno"> 1566</span>    std::string value = rnd.HumanReadableString(len);</div>
<div class="line"><span class="lineno"> 1567</span>    <span class="keywordflow">if</span> (!has_ttl) {</div>
<div class="line"><span class="lineno"> 1568</span>      <span class="keywordflow">if</span> (is_small_value) {</div>
<div class="line"><span class="lineno"> 1569</span>        std::string blob_entry;</div>
<div class="line"><span class="lineno"> 1570</span>        <a class="code hl_function" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a7cc9009aa44f368b3e6869b681399b0d">BlobIndex::EncodeInlinedTTL</a>(&amp;blob_entry, expiration, value);</div>
<div class="line"><span class="lineno"> 1571</span>        <span class="comment">// Fake blob index with TTL. See what it will do.</span></div>
<div class="line"><span class="lineno"> 1572</span>        <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a>(kMinBlobSize, blob_entry.size());</div>
<div class="line"><span class="lineno"> 1573</span>        value = blob_entry;</div>
<div class="line"><span class="lineno"> 1574</span>      }</div>
<div class="line"><span class="lineno"> 1575</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(key, value));</div>
<div class="line"><span class="lineno"> 1576</span>      data_after_compact[key] = value;</div>
<div class="line"><span class="lineno"> 1577</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1578</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutUntil(key, value, expiration));</div>
<div class="line"><span class="lineno"> 1579</span>      <span class="keywordflow">if</span> (expiration &lt;= kCompactTime) {</div>
<div class="line"><span class="lineno"> 1580</span>        data_after_compact.erase(key);</div>
<div class="line"><span class="lineno"> 1581</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1582</span>        data_after_compact[key] = value;</div>
<div class="line"><span class="lineno"> 1583</span>      }</div>
<div class="line"><span class="lineno"> 1584</span>    }</div>
<div class="line"><span class="lineno"> 1585</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1586</span>  }</div>
<div class="line"><span class="lineno"> 1587</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1588</span> </div>
<div class="line"><span class="lineno"> 1589</span>  mock_clock_-&gt;SetCurrentTime(kCompactTime);</div>
<div class="line"><span class="lineno"> 1590</span>  <span class="comment">// Take a snapshot before compaction. Make sure expired blob indexes is</span></div>
<div class="line"><span class="lineno"> 1591</span>  <span class="comment">// filtered regardless of snapshot.</span></div>
<div class="line"><span class="lineno"> 1592</span>  <span class="keyword">const</span> Snapshot *snapshot = blob_db_-&gt;GetSnapshot();</div>
<div class="line"><span class="lineno"> 1593</span>  <span class="comment">// Issue manual compaction to trigger compaction filter.</span></div>
<div class="line"><span class="lineno"> 1594</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1595</span>  blob_db_-&gt;ReleaseSnapshot(snapshot);</div>
<div class="line"><span class="lineno"> 1596</span>  <span class="comment">// Verify expired blob index are filtered.</span></div>
<div class="line"><span class="lineno"> 1597</span>  std::vector&lt;KeyVersion&gt; versions;</div>
<div class="line"><span class="lineno"> 1598</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxKeys = 10000;</div>
<div class="line"><span class="lineno"> 1599</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">GetAllKeyVersions</a>(blob_db_, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, kMaxKeys, &amp;versions));</div>
<div class="line"><span class="lineno"> 1600</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(data_after_compact.size(), versions.size());</div>
<div class="line"><span class="lineno"> 1601</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;version : versions) {</div>
<div class="line"><span class="lineno"> 1602</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(data_after_compact.count(version.user_key) &gt; 0);</div>
<div class="line"><span class="lineno"> 1603</span>  }</div>
<div class="line"><span class="lineno"> 1604</span>  VerifyDB(data_after_compact);</div>
<div class="line"><span class="lineno"> 1605</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1BlobIndex_html_a7cc9009aa44f368b3e6869b681399b0d"><div class="ttname"><a href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a7cc9009aa44f368b3e6869b681399b0d">ROCKSDB_NAMESPACE::BlobIndex::EncodeInlinedTTL</a></div><div class="ttdeci">static void EncodeInlinedTTL(std::string *dst, uint64_t expiration, const Slice &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d01/blob__index_8h_source.html#l00140">blob_index.h:140</a></div></div>
<div class="ttc" id="agtest_8h_html_a16a882d4eafc9f8643867aea40879140"><div class="ttname"><a href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a></div><div class="ttdeci">#define ASSERT_GT(val1, val2)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d73/gtest_8h_source.html#l21789">gtest.h:21789</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a5e0a172afa8da7c37c011136db831949"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">ROCKSDB_NAMESPACE::GetAllKeyVersions</a></div><div class="ttdeci">Status GetAllKeyVersions(DB *db, Slice begin_key, Slice end_key, size_t max_num_ikeys, std::vector&lt; KeyVersion &gt; *key_versions)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/dbf/debug_8cc_source.html#l00057">debug.cc:57</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a8d5782281e233ff3cad1a8657a06fae3"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8d5782281e233ff3cad1a8657a06fae3">ROCKSDB_NAMESPACE::kNumKeys</a></div><div class="ttdeci">const uint64_t kNumKeys</div><div class="ttdef"><b>Definition</b> <a href="../../de/d8e/sst__file__reader__test_8cc_source.html#l00112">sst_file_reader_test.cc:112</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a29c0ab647804cbebc4ee70e26454446b_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a29c0ab647804cbebc4ee70e26454446b_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a29c0ab647804cbebc4ee70e26454446b_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a29c0ab647804cbebc4ee70e26454446b_cgraph">
<area shape="rect" title=" " alt="" coords="5,329,187,374"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a7cc9009aa44f368b3e6869b681399b0d" title=" " alt="" coords="245,133,454,178"/>
<area shape="poly" title=" " alt="" coords="125,327,306,185,309,189,128,331"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949" title=" " alt="" coords="259,283,440,327"/>
<area shape="poly" title=" " alt="" coords="187,332,243,322,244,327,188,338"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,376,464,421"/>
<area shape="poly" title=" " alt="" coords="188,366,220,372,219,377,187,371"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="750,405,932,450"/>
<area shape="poly" title=" " alt="" coords="127,372,176,405,205,419,235,430,301,445,368,454,503,461,629,455,735,443,735,448,630,460,503,466,367,460,300,450,234,436,203,424,173,409,124,377"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a9757b097dbaf69e07e71fcbcb4e0bbd3" title=" " alt="" coords="516,5,698,50"/>
<area shape="poly" title=" " alt="" coords="385,130,443,96,511,60,525,54,527,59,513,65,446,100,388,135"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a7be254812ba1533346e05b3ee4f986e4" title=" " alt="" coords="516,99,698,143"/>
<area shape="poly" title=" " alt="" coords="454,139,501,133,502,138,454,144"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#afde57f882365ca5dc2ed6a8fd229b68d" title=" " alt="" coords="516,168,698,213"/>
<area shape="poly" title=" " alt="" coords="454,167,502,174,501,179,454,172"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#afd444af78b33f7826ab1befdf858f4e7" title=" " alt="" coords="750,5,932,50"/>
<area shape="poly" title=" " alt="" coords="698,25,734,25,734,30,698,30"/>
<area shape="poly" title=" " alt="" coords="562,99,561,89,569,80,584,74,607,72,632,75,647,81,645,86,631,80,607,77,585,79,572,84,566,90,568,98"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0cc71b754e1fa5911df495d70886f6cf" title=" " alt="" coords="750,99,932,143"/>
<area shape="poly" title=" " alt="" coords="698,118,734,118,734,124,698,124"/>
<area shape="poly" title=" " alt="" coords="796,99,795,89,803,80,818,74,841,72,866,75,881,81,879,86,865,80,841,77,819,79,806,84,800,90,802,98"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a15e208497b61f7c5c654ce8775b74f66" title=" " alt="" coords="750,168,932,213"/>
<area shape="poly" title=" " alt="" coords="698,188,734,188,734,193,698,193"/>
<area shape="poly" title=" " alt="" coords="301,283,300,272,308,264,325,258,349,256,377,259,393,265,391,270,375,264,349,261,326,263,311,268,305,274,306,282"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#ae4815b3b50212f7f7aff527ae6e2d726" title=" " alt="" coords="512,237,702,282"/>
<area shape="poly" title=" " alt="" coords="440,286,496,276,497,282,441,292"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5fdd2c6692215a7d1894f2052ffc5609" title=" " alt="" coords="516,307,698,351"/>
<area shape="poly" title=" " alt="" coords="441,311,501,316,501,322,440,316"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="750,307,932,351"/>
<area shape="poly" title=" " alt="" coords="698,326,734,326,734,332,698,332"/>
<area shape="poly" title=" " alt="" coords="301,376,300,366,308,357,325,351,349,349,377,352,393,358,391,363,375,357,349,355,326,357,311,361,305,367,306,375"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="516,376,698,421"/>
<area shape="poly" title=" " alt="" coords="464,396,501,396,501,401,464,401"/>
<area shape="poly" title=" " alt="" coords="698,407,735,412,734,417,698,412"/>
</map>
</div>

</div>
</div>
<a id="ad575a30bfa04b81e4bed4393a4ce49e8" name="ad575a30bfa04b81e4bed4393a4ce49e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad575a30bfa04b81e4bed4393a4ce49e8">&#9670;&#160;</a></span>TEST_F() <span class="overload">[11/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FilterFileNotAvailable</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01609">1609</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1609</span>                                           {</div>
<div class="line"><span class="lineno"> 1610</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1611</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 1612</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1613</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1614</span>  options.<a class="code hl_variable" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a9c88ac11c0157cad1d949db3cb0eb3d7">disable_auto_compactions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1615</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1616</span> </div>
<div class="line"><span class="lineno"> 1617</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>));</div>
<div class="line"><span class="lineno"> 1618</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 1619</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno"> 1620</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files[0]-&gt;BlobFileNumber());</div>
<div class="line"><span class="lineno"> 1621</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_files[0]));</div>
<div class="line"><span class="lineno"> 1622</span> </div>
<div class="line"><span class="lineno"> 1623</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v2&quot;</span>));</div>
<div class="line"><span class="lineno"> 1624</span>  blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 1625</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_files.size());</div>
<div class="line"><span class="lineno"> 1626</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_files[1]-&gt;BlobFileNumber());</div>
<div class="line"><span class="lineno"> 1627</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_files[1]));</div>
<div class="line"><span class="lineno"> 1628</span> </div>
<div class="line"><span class="lineno"> 1629</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> kMaxKeys = 10000;</div>
<div class="line"><span class="lineno"> 1630</span> </div>
<div class="line"><span class="lineno"> 1631</span>  <a class="code hl_class" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html">DB</a> *base_db = blob_db_-&gt;<a class="code hl_function" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#a024345a4063b3a19fec740ec7632fb6e">GetRootDB</a>();</div>
<div class="line"><span class="lineno"> 1632</span>  std::vector&lt;KeyVersion&gt; versions;</div>
<div class="line"><span class="lineno"> 1633</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">GetAllKeyVersions</a>(base_db, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, kMaxKeys, &amp;versions));</div>
<div class="line"><span class="lineno"> 1634</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, versions.size());</div>
<div class="line"><span class="lineno"> 1635</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;bar&quot;</span>, versions[0].user_key);</div>
<div class="line"><span class="lineno"> 1636</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;foo&quot;</span>, versions[1].user_key);</div>
<div class="line"><span class="lineno"> 1637</span>  VerifyDB({{<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v2&quot;</span>}, {<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1638</span> </div>
<div class="line"><span class="lineno"> 1639</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1640</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">GetAllKeyVersions</a>(base_db, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, kMaxKeys, &amp;versions));</div>
<div class="line"><span class="lineno"> 1641</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, versions.size());</div>
<div class="line"><span class="lineno"> 1642</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;bar&quot;</span>, versions[0].user_key);</div>
<div class="line"><span class="lineno"> 1643</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;foo&quot;</span>, versions[1].user_key);</div>
<div class="line"><span class="lineno"> 1644</span>  VerifyDB({{<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v2&quot;</span>}, {<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1645</span> </div>
<div class="line"><span class="lineno"> 1646</span>  <span class="comment">// Remove the first blob file and compact. foo should be remove from base db.</span></div>
<div class="line"><span class="lineno"> 1647</span>  blob_db_impl()-&gt;TEST_ObsoleteBlobFile(blob_files[0]);</div>
<div class="line"><span class="lineno"> 1648</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1649</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1650</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">GetAllKeyVersions</a>(base_db, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, kMaxKeys, &amp;versions));</div>
<div class="line"><span class="lineno"> 1651</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, versions.size());</div>
<div class="line"><span class="lineno"> 1652</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;bar&quot;</span>, versions[0].user_key);</div>
<div class="line"><span class="lineno"> 1653</span>  VerifyDB({{<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v2&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1654</span> </div>
<div class="line"><span class="lineno"> 1655</span>  <span class="comment">// Remove the second blob file and compact. bar should be remove from base db.</span></div>
<div class="line"><span class="lineno"> 1656</span>  blob_db_impl()-&gt;TEST_ObsoleteBlobFile(blob_files[1]);</div>
<div class="line"><span class="lineno"> 1657</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1658</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1659</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949">GetAllKeyVersions</a>(base_db, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, kMaxKeys, &amp;versions));</div>
<div class="line"><span class="lineno"> 1660</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, versions.size());</div>
<div class="line"><span class="lineno"> 1661</span>  VerifyDB({});</div>
<div class="line"><span class="lineno"> 1662</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1DB_html"><div class="ttname"><a href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html">ROCKSDB_NAMESPACE::DB</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d43/include_2rocksdb_2db_8h_source.html#l00175">db.h:175</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1DB_html_a024345a4063b3a19fec740ec7632fb6e"><div class="ttname"><a href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#a024345a4063b3a19fec740ec7632fb6e">ROCKSDB_NAMESPACE::DB::GetRootDB</a></div><div class="ttdeci">virtual DB * GetRootDB()</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d43/include_2rocksdb_2db_8h_source.html#l02084">db.h:2084</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad575a30bfa04b81e4bed4393a4ce49e8_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad575a30bfa04b81e4bed4393a4ce49e8_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad575a30bfa04b81e4bed4393a4ce49e8_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad575a30bfa04b81e4bed4393a4ce49e8_cgraph">
<area shape="rect" title=" " alt="" coords="5,109,187,154"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a5e0a172afa8da7c37c011136db831949" title=" " alt="" coords="235,75,416,119"/>
<area shape="poly" title=" " alt="" coords="187,115,219,110,220,116,187,121"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#a024345a4063b3a19fec740ec7632fb6e" title=" " alt="" coords="235,144,416,189"/>
<area shape="poly" title=" " alt="" coords="187,143,220,148,219,153,187,148"/>
<area shape="poly" title=" " alt="" coords="281,75,280,65,288,56,303,50,325,48,350,51,365,57,363,62,349,56,325,53,304,55,291,60,285,66,287,74"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#ae4815b3b50212f7f7aff527ae6e2d726" title=" " alt="" coords="464,5,654,50"/>
<area shape="poly" title=" " alt="" coords="402,72,466,52,468,58,404,77"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5fdd2c6692215a7d1894f2052ffc5609" title=" " alt="" coords="468,75,650,119"/>
<area shape="poly" title=" " alt="" coords="416,94,453,94,453,100,416,100"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="702,75,884,119"/>
<area shape="poly" title=" " alt="" coords="650,94,686,94,686,100,650,100"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#a1e3df9430533d679e15759922a602d23" title=" " alt="" coords="468,144,650,189"/>
<area shape="poly" title=" " alt="" coords="416,164,453,164,453,169,416,169"/>
</map>
</div>

</div>
</div>
<a id="ad15b797f791e0e021f120b7ba76f7ec9" name="ad15b797f791e0e021f120b7ba76f7ec9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15b797f791e0e021f120b7ba76f7ec9">&#9670;&#160;</a></span>TEST_F() <span class="overload">[12/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FilterForFIFOEviction</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01666">1666</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1666</span>                                          {</div>
<div class="line"><span class="lineno"> 1667</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(215);</div>
<div class="line"><span class="lineno"> 1668</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1669</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 100;</div>
<div class="line"><span class="lineno"> 1670</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 60;</div>
<div class="line"><span class="lineno"> 1671</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = 0;</div>
<div class="line"><span class="lineno"> 1672</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1673</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1674</span>  <span class="comment">// Use mock env to stop wall clock.</span></div>
<div class="line"><span class="lineno"> 1675</span>  mock_clock_-&gt;SetCurrentTime(0);</div>
<div class="line"><span class="lineno"> 1676</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1677</span>  <span class="keyword">auto</span> statistics = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1678</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = statistics;</div>
<div class="line"><span class="lineno"> 1679</span>  options.<a class="code hl_variable" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a9c88ac11c0157cad1d949db3cb0eb3d7">disable_auto_compactions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1680</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1681</span> </div>
<div class="line"><span class="lineno"> 1682</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;LoadDependency(</div>
<div class="line"><span class="lineno"> 1683</span>      {{<span class="stringliteral">&quot;DBImpl::NotifyOnFlushCompleted::PostAllOnFlushCompleted&quot;</span>,</div>
<div class="line"><span class="lineno"> 1684</span>        <span class="stringliteral">&quot;BlobDBTest.FilterForFIFOEviction:AfterFlush&quot;</span>}});</div>
<div class="line"><span class="lineno"> 1685</span> </div>
<div class="line"><span class="lineno"> 1686</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1687</span> </div>
<div class="line"><span class="lineno"> 1688</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1689</span>  std::map&lt;std::string, std::string&gt; data_after_compact;</div>
<div class="line"><span class="lineno"> 1690</span>  <span class="comment">// Insert some small values that will be inlined.</span></div>
<div class="line"><span class="lineno"> 1691</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 1000; i++) {</div>
<div class="line"><span class="lineno"> 1692</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno"> 1693</span>    std::string value = rnd.HumanReadableString(50);</div>
<div class="line"><span class="lineno"> 1694</span>    uint64_t ttl = rnd.Next() % 120 + 1;</div>
<div class="line"><span class="lineno"> 1695</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(key, value, ttl, &amp;data));</div>
<div class="line"><span class="lineno"> 1696</span>    <span class="keywordflow">if</span> (ttl &gt;= 60) {</div>
<div class="line"><span class="lineno"> 1697</span>      data_after_compact[key] = value;</div>
<div class="line"><span class="lineno"> 1698</span>    }</div>
<div class="line"><span class="lineno"> 1699</span>  }</div>
<div class="line"><span class="lineno"> 1700</span>  uint64_t num_keys_to_evict = data.size() - data_after_compact.size();</div>
<div class="line"><span class="lineno"> 1701</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Flush(FlushOptions()));</div>
<div class="line"><span class="lineno"> 1702</span> </div>
<div class="line"><span class="lineno"> 1703</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.FilterForFIFOEviction:AfterFlush&quot;</span>);</div>
<div class="line"><span class="lineno"> 1704</span> </div>
<div class="line"><span class="lineno"> 1705</span>  uint64_t live_sst_size = blob_db_impl()-&gt;TEST_live_sst_size();</div>
<div class="line"><span class="lineno"> 1706</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a>(live_sst_size, 0);</div>
<div class="line"><span class="lineno"> 1707</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1708</span> </div>
<div class="line"><span class="lineno"> 1709</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = live_sst_size + 30000;</div>
<div class="line"><span class="lineno"> 1710</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1711</span>  Reopen(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1712</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1713</span> </div>
<div class="line"><span class="lineno"> 1714</span>  <span class="comment">// Put two large values, each on a different blob file.</span></div>
<div class="line"><span class="lineno"> 1715</span>  std::string large_value(10000, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1716</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key1&quot;</span>, large_value, 90));</div>
<div class="line"><span class="lineno"> 1717</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key2&quot;</span>, large_value, 150));</div>
<div class="line"><span class="lineno"> 1718</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1719</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1720</span>  data[<span class="stringliteral">&quot;large_key1&quot;</span>] = large_value;</div>
<div class="line"><span class="lineno"> 1721</span>  data[<span class="stringliteral">&quot;large_key2&quot;</span>] = large_value;</div>
<div class="line"><span class="lineno"> 1722</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1723</span> </div>
<div class="line"><span class="lineno"> 1724</span>  <span class="comment">// Put a third large value which will bring the DB out of space.</span></div>
<div class="line"><span class="lineno"> 1725</span>  <span class="comment">// FIFO eviction will evict the file of large_key1.</span></div>
<div class="line"><span class="lineno"> 1726</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;large_key3&quot;</span>, large_value, 150));</div>
<div class="line"><span class="lineno"> 1727</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1728</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1729</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno"> 1730</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1731</span>  data.erase(<span class="stringliteral">&quot;large_key1&quot;</span>);</div>
<div class="line"><span class="lineno"> 1732</span>  data[<span class="stringliteral">&quot;large_key3&quot;</span>] = large_value;</div>
<div class="line"><span class="lineno"> 1733</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1734</span> </div>
<div class="line"><span class="lineno"> 1735</span>  <span class="comment">// Putting some more small values. These values shouldn&#39;t be evicted by</span></div>
<div class="line"><span class="lineno"> 1736</span>  <span class="comment">// compaction filter since they are inserted after FIFO eviction.</span></div>
<div class="line"><span class="lineno"> 1737</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>, 30, &amp;data_after_compact));</div>
<div class="line"><span class="lineno"> 1738</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v&quot;</span>, 30, &amp;data_after_compact));</div>
<div class="line"><span class="lineno"> 1739</span> </div>
<div class="line"><span class="lineno"> 1740</span>  <span class="comment">// FIFO eviction doesn&#39;t trigger again since there enough room for the flush.</span></div>
<div class="line"><span class="lineno"> 1741</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Flush(FlushOptions()));</div>
<div class="line"><span class="lineno"> 1742</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1743</span> </div>
<div class="line"><span class="lineno"> 1744</span>  <span class="comment">// Manual compact and check if compaction filter evict those keys with</span></div>
<div class="line"><span class="lineno"> 1745</span>  <span class="comment">// expiration &lt; 60.</span></div>
<div class="line"><span class="lineno"> 1746</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1747</span>  <span class="comment">// All keys with expiration &lt; 60, plus large_key1 is filtered by</span></div>
<div class="line"><span class="lineno"> 1748</span>  <span class="comment">// compaction filter.</span></div>
<div class="line"><span class="lineno"> 1749</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(num_keys_to_evict + 1,</div>
<div class="line"><span class="lineno"> 1750</span>            statistics-&gt;getTickerCount(BLOB_DB_BLOB_INDEX_EVICTED_COUNT));</div>
<div class="line"><span class="lineno"> 1751</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, statistics-&gt;getTickerCount(BLOB_DB_FIFO_NUM_FILES_EVICTED));</div>
<div class="line"><span class="lineno"> 1752</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno"> 1753</span>  data_after_compact[<span class="stringliteral">&quot;large_key2&quot;</span>] = large_value;</div>
<div class="line"><span class="lineno"> 1754</span>  data_after_compact[<span class="stringliteral">&quot;large_key3&quot;</span>] = large_value;</div>
<div class="line"><span class="lineno"> 1755</span>  VerifyDB(data_after_compact);</div>
<div class="line"><span class="lineno"> 1756</span> </div>
<div class="line"><span class="lineno"> 1757</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 1758</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad15b797f791e0e021f120b7ba76f7ec9_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad15b797f791e0e021f120b7ba76f7ec9_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad15b797f791e0e021f120b7ba76f7ec9_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ad15b797f791e0e021f120b7ba76f7ec9_cgraph">
<area shape="rect" title=" " alt="" coords="5,169,187,214"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="259,29,440,74"/>
<area shape="poly" title=" " alt="" coords="120,167,170,125,233,84,246,78,248,83,236,89,173,129,123,171"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="259,123,440,167"/>
<area shape="poly" title=" " alt="" coords="187,172,243,162,244,167,188,178"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,216,464,261"/>
<area shape="poly" title=" " alt="" coords="188,206,220,212,219,217,187,211"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="741,247,923,291"/>
<area shape="poly" title=" " alt="" coords="127,212,176,245,205,259,235,270,299,285,365,294,498,300,621,295,726,284,726,289,622,300,498,306,365,299,298,290,234,276,203,264,173,249,124,217"/>
<area shape="poly" title=" " alt="" coords="301,29,300,19,308,10,325,5,349,3,377,5,393,12,391,17,375,10,349,8,326,10,311,15,305,21,306,28"/>
<area shape="poly" title=" " alt="" coords="301,123,300,112,308,104,325,98,349,96,377,99,393,105,391,110,375,104,349,101,326,103,311,108,305,114,306,122"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="512,123,693,167"/>
<area shape="poly" title=" " alt="" coords="440,142,497,142,497,148,440,148"/>
<area shape="poly" title=" " alt="" coords="559,123,558,113,565,104,580,98,603,96,628,99,642,105,640,110,626,104,603,101,581,103,568,108,563,114,564,122"/>
<area shape="poly" title=" " alt="" coords="301,216,300,206,308,197,325,191,349,189,377,192,393,198,391,203,375,197,349,195,326,197,311,201,305,207,306,215"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="512,216,693,261"/>
<area shape="poly" title=" " alt="" coords="465,236,496,236,496,241,465,241"/>
<area shape="poly" title=" " alt="" coords="694,248,726,252,725,257,693,253"/>
</map>
</div>

</div>
</div>
<a id="a7dded820b854fb7b8917641b1d86b1dc" name="a7dded820b854fb7b8917641b1d86b1dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dded820b854fb7b8917641b1d86b1dc">&#9670;&#160;</a></span>TEST_F() <span class="overload">[13/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GarbageCollection</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01760">1760</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1760</span>                                      {</div>
<div class="line"><span class="lineno"> 1761</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumPuts = 1 &lt;&lt; 10;</div>
<div class="line"><span class="lineno"> 1762</span> </div>
<div class="line"><span class="lineno"> 1763</span>  <span class="keyword">constexpr</span> uint64_t kExpiration = 1000;</div>
<div class="line"><span class="lineno"> 1764</span>  <span class="keyword">constexpr</span> uint64_t kCompactTime = 500;</div>
<div class="line"><span class="lineno"> 1765</span> </div>
<div class="line"><span class="lineno"> 1766</span>  <span class="keyword">constexpr</span> uint64_t kKeySize = 7;  <span class="comment">// &quot;key&quot; + 4 digits</span></div>
<div class="line"><span class="lineno"> 1767</span> </div>
<div class="line"><span class="lineno"> 1768</span>  <span class="keyword">constexpr</span> uint64_t kSmallValueSize = 1 &lt;&lt; 6;</div>
<div class="line"><span class="lineno"> 1769</span>  <span class="keyword">constexpr</span> uint64_t kLargeValueSize = 1 &lt;&lt; 8;</div>
<div class="line"><span class="lineno"> 1770</span>  <span class="keyword">constexpr</span> uint64_t kMinBlobSize = 1 &lt;&lt; 7;</div>
<div class="line"><span class="lineno"> 1771</span>  <span class="keyword">static_assert</span>(kSmallValueSize &lt; kMinBlobSize);</div>
<div class="line"><span class="lineno"> 1772</span>  <span class="keyword">static_assert</span>(kLargeValueSize &gt; kMinBlobSize);</div>
<div class="line"><span class="lineno"> 1773</span> </div>
<div class="line"><span class="lineno"> 1774</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kBlobsPerFile = 8;</div>
<div class="line"><span class="lineno"> 1775</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumBlobFiles = kNumPuts / kBlobsPerFile;</div>
<div class="line"><span class="lineno"> 1776</span>  <span class="keyword">constexpr</span> uint64_t kBlobFileSize =</div>
<div class="line"><span class="lineno"> 1777</span>      <a class="code hl_variable" href="../../d5/d76/structROCKSDB__NAMESPACE_1_1BlobLogHeader.html#a224d833e72a048df141c2190cb3b4e27">BlobLogHeader::kSize</a> +</div>
<div class="line"><span class="lineno"> 1778</span>      (<a class="code hl_variable" href="../../d8/d25/structROCKSDB__NAMESPACE_1_1BlobLogRecord.html#af6fa03a686aa229610e586d37fa713d6">BlobLogRecord::kHeaderSize</a> + kKeySize + kLargeValueSize) * kBlobsPerFile;</div>
<div class="line"><span class="lineno"> 1779</span> </div>
<div class="line"><span class="lineno"> 1780</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1781</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = kMinBlobSize;</div>
<div class="line"><span class="lineno"> 1782</span>  bdb_options.blob_file_size = kBlobFileSize;</div>
<div class="line"><span class="lineno"> 1783</span>  bdb_options.enable_garbage_collection = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1784</span>  bdb_options.garbage_collection_cutoff = 0.25;</div>
<div class="line"><span class="lineno"> 1785</span>  bdb_options.disable_background_tasks = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1786</span> </div>
<div class="line"><span class="lineno"> 1787</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1788</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1789</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1790</span> </div>
<div class="line"><span class="lineno"> 1791</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1792</span> </div>
<div class="line"><span class="lineno"> 1793</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1794</span>  std::map&lt;std::string, KeyVersion&gt; blob_value_versions;</div>
<div class="line"><span class="lineno"> 1795</span>  std::map&lt;std::string, BlobIndexVersion&gt; blob_index_versions;</div>
<div class="line"><span class="lineno"> 1796</span> </div>
<div class="line"><span class="lineno"> 1797</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno"> 1798</span> </div>
<div class="line"><span class="lineno"> 1799</span>  <span class="comment">// Add a bunch of large non-TTL values. These will be written to non-TTL</span></div>
<div class="line"><span class="lineno"> 1800</span>  <span class="comment">// blob files and will be subject to GC.</span></div>
<div class="line"><span class="lineno"> 1801</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumPuts; ++i) {</div>
<div class="line"><span class="lineno"> 1802</span>    std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 1803</span>    oss &lt;&lt; <span class="stringliteral">&quot;key&quot;</span> &lt;&lt; std::setw(4) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; i;</div>
<div class="line"><span class="lineno"> 1804</span> </div>
<div class="line"><span class="lineno"> 1805</span>    <span class="keyword">const</span> std::string key(oss.str());</div>
<div class="line"><span class="lineno"> 1806</span>    <span class="keyword">const</span> std::string value = rnd.HumanReadableString(kLargeValueSize);</div>
<div class="line"><span class="lineno"> 1807</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1808</span> </div>
<div class="line"><span class="lineno"> 1809</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(key, value));</div>
<div class="line"><span class="lineno"> 1810</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1811</span> </div>
<div class="line"><span class="lineno"> 1812</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1813</span>    blob_value_versions[key] = <a class="code hl_struct" href="../../d8/d07/structROCKSDB__NAMESPACE_1_1KeyVersion.html">KeyVersion</a>(key, value, sequence, <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941">kTypeBlobIndex</a>);</div>
<div class="line"><span class="lineno"> 1814</span>    blob_index_versions[key] =</div>
<div class="line"><span class="lineno"> 1815</span>        BlobIndexVersion(key, <span class="comment">/* file_number */</span> (i &gt;&gt; 3) + 1, <a class="code hl_variable" href="#a370c88ffe8d625dd0f8b028c385ea1d2">kNoExpiration</a>,</div>
<div class="line"><span class="lineno"> 1816</span>                         sequence, <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941">kTypeBlobIndex</a>);</div>
<div class="line"><span class="lineno"> 1817</span>  }</div>
<div class="line"><span class="lineno"> 1818</span> </div>
<div class="line"><span class="lineno"> 1819</span>  <span class="comment">// Add some small and/or TTL values that will be ignored during GC.</span></div>
<div class="line"><span class="lineno"> 1820</span>  <span class="comment">// First, add a large TTL value will be written to its own TTL blob file.</span></div>
<div class="line"><span class="lineno"> 1821</span>  {</div>
<div class="line"><span class="lineno"> 1822</span>    <span class="keyword">const</span> std::string key(<span class="stringliteral">&quot;key2000&quot;</span>);</div>
<div class="line"><span class="lineno"> 1823</span>    <span class="keyword">const</span> std::string value = rnd.HumanReadableString(kLargeValueSize);</div>
<div class="line"><span class="lineno"> 1824</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1825</span> </div>
<div class="line"><span class="lineno"> 1826</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutUntil(key, value, kExpiration));</div>
<div class="line"><span class="lineno"> 1827</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1828</span> </div>
<div class="line"><span class="lineno"> 1829</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1830</span>    blob_value_versions[key] = <a class="code hl_struct" href="../../d8/d07/structROCKSDB__NAMESPACE_1_1KeyVersion.html">KeyVersion</a>(key, value, sequence, <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941">kTypeBlobIndex</a>);</div>
<div class="line"><span class="lineno"> 1831</span>    blob_index_versions[key] =</div>
<div class="line"><span class="lineno"> 1832</span>        BlobIndexVersion(key, <span class="comment">/* file_number */</span> kNumBlobFiles + 1, kExpiration,</div>
<div class="line"><span class="lineno"> 1833</span>                         sequence, <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941">kTypeBlobIndex</a>);</div>
<div class="line"><span class="lineno"> 1834</span>  }</div>
<div class="line"><span class="lineno"> 1835</span> </div>
<div class="line"><span class="lineno"> 1836</span>  <span class="comment">// Now add a small TTL value (which will be inlined).</span></div>
<div class="line"><span class="lineno"> 1837</span>  {</div>
<div class="line"><span class="lineno"> 1838</span>    <span class="keyword">const</span> std::string key(<span class="stringliteral">&quot;key3000&quot;</span>);</div>
<div class="line"><span class="lineno"> 1839</span>    <span class="keyword">const</span> std::string value = rnd.HumanReadableString(kSmallValueSize);</div>
<div class="line"><span class="lineno"> 1840</span>    <span class="keyword">const</span> SequenceNumber sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1841</span> </div>
<div class="line"><span class="lineno"> 1842</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutUntil(key, value, kExpiration));</div>
<div class="line"><span class="lineno"> 1843</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1844</span> </div>
<div class="line"><span class="lineno"> 1845</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1846</span>    blob_value_versions[key] = KeyVersion(key, value, sequence, kTypeBlobIndex);</div>
<div class="line"><span class="lineno"> 1847</span>    blob_index_versions[key] = BlobIndexVersion(</div>
<div class="line"><span class="lineno"> 1848</span>        key, kInvalidBlobFileNumber, kExpiration, sequence, kTypeBlobIndex);</div>
<div class="line"><span class="lineno"> 1849</span>  }</div>
<div class="line"><span class="lineno"> 1850</span> </div>
<div class="line"><span class="lineno"> 1851</span>  <span class="comment">// Finally, add a small non-TTL value (which will be stored as a regular</span></div>
<div class="line"><span class="lineno"> 1852</span>  <span class="comment">// value).</span></div>
<div class="line"><span class="lineno"> 1853</span>  {</div>
<div class="line"><span class="lineno"> 1854</span>    <span class="keyword">const</span> std::string key(<span class="stringliteral">&quot;key4000&quot;</span>);</div>
<div class="line"><span class="lineno"> 1855</span>    <span class="keyword">const</span> std::string value = rnd.HumanReadableString(kSmallValueSize);</div>
<div class="line"><span class="lineno"> 1856</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1857</span> </div>
<div class="line"><span class="lineno"> 1858</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(key, value));</div>
<div class="line"><span class="lineno"> 1859</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1860</span> </div>
<div class="line"><span class="lineno"> 1861</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1862</span>    blob_value_versions[key] = KeyVersion(key, value, sequence, kTypeValue);</div>
<div class="line"><span class="lineno"> 1863</span>    blob_index_versions[key] = BlobIndexVersion(</div>
<div class="line"><span class="lineno"> 1864</span>        key, kInvalidBlobFileNumber, kNoExpiration, sequence, kTypeValue);</div>
<div class="line"><span class="lineno"> 1865</span>  }</div>
<div class="line"><span class="lineno"> 1866</span> </div>
<div class="line"><span class="lineno"> 1867</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1868</span>  VerifyBaseDB(blob_value_versions);</div>
<div class="line"><span class="lineno"> 1869</span>  VerifyBaseDBBlobIndex(blob_index_versions);</div>
<div class="line"><span class="lineno"> 1870</span> </div>
<div class="line"><span class="lineno"> 1871</span>  <span class="comment">// At this point, we should have 128 immutable non-TTL files with file numbers</span></div>
<div class="line"><span class="lineno"> 1872</span>  <span class="comment">// 1..128.</span></div>
<div class="line"><span class="lineno"> 1873</span>  {</div>
<div class="line"><span class="lineno"> 1874</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 1875</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), kNumBlobFiles);</div>
<div class="line"><span class="lineno"> 1876</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumBlobFiles; ++i) {</div>
<div class="line"><span class="lineno"> 1877</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 1);</div>
<div class="line"><span class="lineno"> 1878</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;<a class="code hl_function" href="../../d0/da7/namespacetesting_1_1internal.html#a40bcfd87e26aae36e0cc51e5db64fd89">GetFileSize</a>(),</div>
<div class="line"><span class="lineno"> 1879</span>                kBlobFileSize + BlobLogFooter::kSize);</div>
<div class="line"><span class="lineno"> 1880</span>    }</div>
<div class="line"><span class="lineno"> 1881</span>  }</div>
<div class="line"><span class="lineno"> 1882</span> </div>
<div class="line"><span class="lineno"> 1883</span>  mock_clock_-&gt;SetCurrentTime(kCompactTime);</div>
<div class="line"><span class="lineno"> 1884</span> </div>
<div class="line"><span class="lineno"> 1885</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1886</span> </div>
<div class="line"><span class="lineno"> 1887</span>  <span class="comment">// We expect the data to remain the same and the blobs from the oldest N files</span></div>
<div class="line"><span class="lineno"> 1888</span>  <span class="comment">// to be moved to new files. Sequence numbers get zeroed out during the</span></div>
<div class="line"><span class="lineno"> 1889</span>  <span class="comment">// compaction.</span></div>
<div class="line"><span class="lineno"> 1890</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1891</span> </div>
<div class="line"><span class="lineno"> 1892</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : blob_value_versions) {</div>
<div class="line"><span class="lineno"> 1893</span>    KeyVersion &amp;version = pair.second;</div>
<div class="line"><span class="lineno"> 1894</span>    version.sequence = 0;</div>
<div class="line"><span class="lineno"> 1895</span>  }</div>
<div class="line"><span class="lineno"> 1896</span> </div>
<div class="line"><span class="lineno"> 1897</span>  VerifyBaseDB(blob_value_versions);</div>
<div class="line"><span class="lineno"> 1898</span> </div>
<div class="line"><span class="lineno"> 1899</span>  <span class="keyword">const</span> uint64_t cutoff = <span class="keyword">static_cast&lt;</span>uint64_t<span class="keyword">&gt;</span>(</div>
<div class="line"><span class="lineno"> 1900</span>      bdb_options.garbage_collection_cutoff * kNumBlobFiles);</div>
<div class="line"><span class="lineno"> 1901</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;pair : blob_index_versions) {</div>
<div class="line"><span class="lineno"> 1902</span>    BlobIndexVersion &amp;version = pair.second;</div>
<div class="line"><span class="lineno"> 1903</span> </div>
<div class="line"><span class="lineno"> 1904</span>    version.sequence = 0;</div>
<div class="line"><span class="lineno"> 1905</span> </div>
<div class="line"><span class="lineno"> 1906</span>    <span class="keywordflow">if</span> (version.file_number == kInvalidBlobFileNumber) {</div>
<div class="line"><span class="lineno"> 1907</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1908</span>    }</div>
<div class="line"><span class="lineno"> 1909</span> </div>
<div class="line"><span class="lineno"> 1910</span>    <span class="keywordflow">if</span> (version.file_number &gt; cutoff) {</div>
<div class="line"><span class="lineno"> 1911</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1912</span>    }</div>
<div class="line"><span class="lineno"> 1913</span> </div>
<div class="line"><span class="lineno"> 1914</span>    version.file_number += kNumBlobFiles + 1;</div>
<div class="line"><span class="lineno"> 1915</span>  }</div>
<div class="line"><span class="lineno"> 1916</span> </div>
<div class="line"><span class="lineno"> 1917</span>  VerifyBaseDBBlobIndex(blob_index_versions);</div>
<div class="line"><span class="lineno"> 1918</span> </div>
<div class="line"><span class="lineno"> 1919</span>  <span class="keyword">const</span> Statistics *<span class="keyword">const</span> statistics = options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a>.get();</div>
<div class="line"><span class="lineno"> 1920</span>  assert(statistics);</div>
<div class="line"><span class="lineno"> 1921</span> </div>
<div class="line"><span class="lineno"> 1922</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;getTickerCount(BLOB_DB_GC_NUM_FILES), cutoff);</div>
<div class="line"><span class="lineno"> 1923</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;getTickerCount(BLOB_DB_GC_NUM_NEW_FILES), cutoff);</div>
<div class="line"><span class="lineno"> 1924</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;getTickerCount(BLOB_DB_GC_FAILURES), 0);</div>
<div class="line"><span class="lineno"> 1925</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;getTickerCount(BLOB_DB_GC_NUM_KEYS_RELOCATED),</div>
<div class="line"><span class="lineno"> 1926</span>            cutoff * kBlobsPerFile);</div>
<div class="line"><span class="lineno"> 1927</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;getTickerCount(BLOB_DB_GC_BYTES_RELOCATED),</div>
<div class="line"><span class="lineno"> 1928</span>            cutoff * kBlobsPerFile * kLargeValueSize);</div>
<div class="line"><span class="lineno"> 1929</span> </div>
<div class="line"><span class="lineno"> 1930</span>  <span class="comment">// At this point, we should have 128 immutable non-TTL files with file numbers</span></div>
<div class="line"><span class="lineno"> 1931</span>  <span class="comment">// 33..128 and 130..161. (129 was taken by the TTL blob file.)</span></div>
<div class="line"><span class="lineno"> 1932</span>  {</div>
<div class="line"><span class="lineno"> 1933</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 1934</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), kNumBlobFiles);</div>
<div class="line"><span class="lineno"> 1935</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumBlobFiles; ++i) {</div>
<div class="line"><span class="lineno"> 1936</span>      uint64_t expected_file_number = i + cutoff + 1;</div>
<div class="line"><span class="lineno"> 1937</span>      <span class="keywordflow">if</span> (expected_file_number &gt; kNumBlobFiles) {</div>
<div class="line"><span class="lineno"> 1938</span>        ++expected_file_number;</div>
<div class="line"><span class="lineno"> 1939</span>      }</div>
<div class="line"><span class="lineno"> 1940</span> </div>
<div class="line"><span class="lineno"> 1941</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), expected_file_number);</div>
<div class="line"><span class="lineno"> 1942</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;<a class="code hl_function" href="../../d0/da7/namespacetesting_1_1internal.html#a40bcfd87e26aae36e0cc51e5db64fd89">GetFileSize</a>(),</div>
<div class="line"><span class="lineno"> 1943</span>                kBlobFileSize + BlobLogFooter::kSize);</div>
<div class="line"><span class="lineno"> 1944</span>    }</div>
<div class="line"><span class="lineno"> 1945</span>  }</div>
<div class="line"><span class="lineno"> 1946</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_1_1blob__db_html_a370c88ffe8d625dd0f8b028c385ea1d2"><div class="ttname"><a href="#a370c88ffe8d625dd0f8b028c385ea1d2">ROCKSDB_NAMESPACE::blob_db::kNoExpiration</a></div><div class="ttdeci">constexpr uint64_t kNoExpiration</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00028">blob_db.h:28</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a14421ad5fea786298ec0edd0f34bd96a"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">ROCKSDB_NAMESPACE::SequenceNumber</a></div><div class="ttdeci">uint64_t SequenceNumber</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d49/types_8h_source.html#l00022">types.h:22</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a63da61d97d5cc28e7b9c847bb8a76abcad56d6942808ab0080d07a0ec34488941">ROCKSDB_NAMESPACE::kTypeBlobIndex</a></div><div class="ttdeci">@ kTypeBlobIndex</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d73/dbformat_8h_source.html#l00059">dbformat.h:59</a></div></div>
<div class="ttc" id="anamespacetesting_1_1internal_html_a40bcfd87e26aae36e0cc51e5db64fd89"><div class="ttname"><a href="../../d0/da7/namespacetesting_1_1internal.html#a40bcfd87e26aae36e0cc51e5db64fd89">testing::internal::GetFileSize</a></div><div class="ttdeci">size_t GetFileSize(FILE *file)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d8c/gtest-all_8cc_source.html#l10528">gtest-all.cc:10528</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1BlobLogHeader_html_a224d833e72a048df141c2190cb3b4e27"><div class="ttname"><a href="../../d5/d76/structROCKSDB__NAMESPACE_1_1BlobLogHeader.html#a224d833e72a048df141c2190cb3b4e27">ROCKSDB_NAMESPACE::BlobLogHeader::kSize</a></div><div class="ttdeci">static constexpr size_t kSize</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d3f/blob__log__format_8h_source.html#l00044">blob_log_format.h:44</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1BlobLogRecord_html_af6fa03a686aa229610e586d37fa713d6"><div class="ttname"><a href="../../d8/d25/structROCKSDB__NAMESPACE_1_1BlobLogRecord.html#af6fa03a686aa229610e586d37fa713d6">ROCKSDB_NAMESPACE::BlobLogRecord::kHeaderSize</a></div><div class="ttdeci">static constexpr size_t kHeaderSize</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d3f/blob__log__format_8h_source.html#l00120">blob_log_format.h:120</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1KeyVersion_html"><div class="ttname"><a href="../../d8/d07/structROCKSDB__NAMESPACE_1_1KeyVersion.html">ROCKSDB_NAMESPACE::KeyVersion</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d16/debug_8h_source.html#l00017">debug.h:17</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a7dded820b854fb7b8917641b1d86b1dc_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a7dded820b854fb7b8917641b1d86b1dc_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a7dded820b854fb7b8917641b1d86b1dc_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a7dded820b854fb7b8917641b1d86b1dc_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,187,143"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="259,29,440,74"/>
<area shape="poly" title=" " alt="" coords="180,95,250,76,252,81,181,101"/>
<area shape="rect" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9" title=" " alt="" coords="256,99,442,143"/>
<area shape="poly" title=" " alt="" coords="187,118,241,118,241,124,187,124"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,192,464,237"/>
<area shape="poly" title=" " alt="" coords="160,141,273,184,271,189,158,146"/>
<area shape="poly" title=" " alt="" coords="301,29,300,19,308,10,325,5,349,3,377,5,393,12,391,17,375,10,349,8,326,10,311,15,305,21,306,28"/>
<area shape="poly" title=" " alt="" coords="301,192,300,182,308,173,325,167,349,165,377,168,393,174,391,179,375,173,349,171,326,173,311,177,305,183,306,191"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="512,192,693,237"/>
<area shape="poly" title=" " alt="" coords="465,212,496,212,496,217,465,217"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="741,192,923,237"/>
<area shape="poly" title=" " alt="" coords="694,212,726,212,726,217,694,217"/>
</map>
</div>

</div>
</div>
<a id="ab8b4f8557e080f20f599d9bf3a7031a6" name="ab8b4f8557e080f20f599d9bf3a7031a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b4f8557e080f20f599d9bf3a7031a6">&#9670;&#160;</a></span>TEST_F() <span class="overload">[14/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GarbageCollectionFailure</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01948">1948</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1948</span>                                             {</div>
<div class="line"><span class="lineno"> 1949</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1950</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 1951</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a25b10df716c48687f2cf26a0c9695331">enable_garbage_collection</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1952</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#adc68ba0cb89e555cc0d5a4ddf9a441d9">garbage_collection_cutoff</a> = 1.0;</div>
<div class="line"><span class="lineno"> 1953</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1954</span> </div>
<div class="line"><span class="lineno"> 1955</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> db_options;</div>
<div class="line"><span class="lineno"> 1956</span>  db_options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1957</span> </div>
<div class="line"><span class="lineno"> 1958</span>  Open(bdb_options, db_options);</div>
<div class="line"><span class="lineno"> 1959</span> </div>
<div class="line"><span class="lineno"> 1960</span>  <span class="comment">// Write a couple of valid blobs.</span></div>
<div class="line"><span class="lineno"> 1961</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno"> 1962</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;dead&quot;</span>, <span class="stringliteral">&quot;beef&quot;</span>));</div>
<div class="line"><span class="lineno"> 1963</span> </div>
<div class="line"><span class="lineno"> 1964</span>  <span class="comment">// Write a fake blob reference into the base DB that points to a non-existing</span></div>
<div class="line"><span class="lineno"> 1965</span>  <span class="comment">// blob file.</span></div>
<div class="line"><span class="lineno"> 1966</span>  std::string blob_index;</div>
<div class="line"><span class="lineno"> 1967</span>  <a class="code hl_function" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a9c664f89b5387f96bf3ccc1ca519b3e3">BlobIndex::EncodeBlob</a>(&amp;blob_index, <span class="comment">/* file_number */</span> 1000, <span class="comment">/* offset */</span> 1234,</div>
<div class="line"><span class="lineno"> 1968</span>                        <span class="comment">/* size */</span> 5678, <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#aacfc9de2946b33f6a70b6fce4aec79d5aa1babd632a7e989f50266abdf8d61c1d">kNoCompression</a>);</div>
<div class="line"><span class="lineno"> 1969</span> </div>
<div class="line"><span class="lineno"> 1970</span>  <a class="code hl_class" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a> batch;</div>
<div class="line"><span class="lineno"> 1971</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#aac3ab4ed3da72b31d20d77d6360484cf">WriteBatchInternal::PutBlobIndex</a>(</div>
<div class="line"><span class="lineno"> 1972</span>      &amp;batch, blob_db_-&gt;DefaultColumnFamily()-&gt;GetID(), <span class="stringliteral">&quot;key&quot;</span>, blob_index));</div>
<div class="line"><span class="lineno"> 1973</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;GetRootDB()-&gt;Write(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), &amp;batch));</div>
<div class="line"><span class="lineno"> 1974</span> </div>
<div class="line"><span class="lineno"> 1975</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 1976</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files.size(), 1);</div>
<div class="line"><span class="lineno"> 1977</span>  <span class="keyword">auto</span> blob_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 1978</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_file));</div>
<div class="line"><span class="lineno"> 1979</span> </div>
<div class="line"><span class="lineno"> 1980</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_-&gt;CompactRange(<a class="code hl_struct" href="../../da/d01/structROCKSDB__NAMESPACE_1_1CompactRangeOptions.html">CompactRangeOptions</a>(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 1981</span>                  .IsIOError());</div>
<div class="line"><span class="lineno"> 1982</span> </div>
<div class="line"><span class="lineno"> 1983</span>  <span class="keyword">const</span> <a class="code hl_class" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html">Statistics</a> *<span class="keyword">const</span> statistics = db_options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a>.get();</div>
<div class="line"><span class="lineno"> 1984</span>  assert(statistics);</div>
<div class="line"><span class="lineno"> 1985</span> </div>
<div class="line"><span class="lineno"> 1986</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;<a class="code hl_function" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">getTickerCount</a>(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a154993d79345f4cb9a920b851969f61a">BLOB_DB_GC_NUM_FILES</a>), 0);</div>
<div class="line"><span class="lineno"> 1987</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;<a class="code hl_function" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">getTickerCount</a>(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47af65a25912ccbc19c50ffabb54fd79834">BLOB_DB_GC_NUM_NEW_FILES</a>), 1);</div>
<div class="line"><span class="lineno"> 1988</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;<a class="code hl_function" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">getTickerCount</a>(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a68f51326c52955abe9144897e346a342">BLOB_DB_GC_FAILURES</a>), 1);</div>
<div class="line"><span class="lineno"> 1989</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;<a class="code hl_function" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">getTickerCount</a>(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a542aa7b65a91816ac2a1718451a8442e">BLOB_DB_GC_NUM_KEYS_RELOCATED</a>), 2);</div>
<div class="line"><span class="lineno"> 1990</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(statistics-&gt;<a class="code hl_function" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">getTickerCount</a>(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47adaeca7e9062fa83993953688ebf278b6">BLOB_DB_GC_BYTES_RELOCATED</a>), 7);</div>
<div class="line"><span class="lineno"> 1991</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1BlobIndex_html_a9c664f89b5387f96bf3ccc1ca519b3e3"><div class="ttname"><a href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a9c664f89b5387f96bf3ccc1ca519b3e3">ROCKSDB_NAMESPACE::BlobIndex::EncodeBlob</a></div><div class="ttdeci">static void EncodeBlob(std::string *dst, uint64_t file_number, uint64_t offset, uint64_t size, CompressionType compression)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d01/blob__index_8h_source.html#l00150">blob_index.h:150</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Statistics_html"><div class="ttname"><a href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html">ROCKSDB_NAMESPACE::Statistics</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00727">statistics.h:727</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Statistics_html_a7c9542ad2510116bd3c99339b3fae9e9"><div class="ttname"><a href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9">ROCKSDB_NAMESPACE::Statistics::getTickerCount</a></div><div class="ttdeci">virtual uint64_t getTickerCount(uint32_t tickerType) const =0</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1WriteBatchInternal_html_aac3ab4ed3da72b31d20d77d6360484cf"><div class="ttname"><a href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#aac3ab4ed3da72b31d20d77d6360484cf">ROCKSDB_NAMESPACE::WriteBatchInternal::PutBlobIndex</a></div><div class="ttdeci">static Status PutBlobIndex(WriteBatch *batch, uint32_t column_family_id, const Slice &amp;key, const Slice &amp;value)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d61/write__batch_8cc_source.html#l01777">write_batch.cc:1777</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47a154993d79345f4cb9a920b851969f61a"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a154993d79345f4cb9a920b851969f61a">ROCKSDB_NAMESPACE::BLOB_DB_GC_NUM_FILES</a></div><div class="ttdeci">@ BLOB_DB_GC_NUM_FILES</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00361">statistics.h:361</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47a542aa7b65a91816ac2a1718451a8442e"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a542aa7b65a91816ac2a1718451a8442e">ROCKSDB_NAMESPACE::BLOB_DB_GC_NUM_KEYS_RELOCATED</a></div><div class="ttdeci">@ BLOB_DB_GC_NUM_KEYS_RELOCATED</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00368">statistics.h:368</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47a68f51326c52955abe9144897e346a342"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a68f51326c52955abe9144897e346a342">ROCKSDB_NAMESPACE::BLOB_DB_GC_FAILURES</a></div><div class="ttdeci">@ BLOB_DB_GC_FAILURES</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00366">statistics.h:366</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47adaeca7e9062fa83993953688ebf278b6"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47adaeca7e9062fa83993953688ebf278b6">ROCKSDB_NAMESPACE::BLOB_DB_GC_BYTES_RELOCATED</a></div><div class="ttdeci">@ BLOB_DB_GC_BYTES_RELOCATED</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00370">statistics.h:370</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47af65a25912ccbc19c50ffabb54fd79834"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47af65a25912ccbc19c50ffabb54fd79834">ROCKSDB_NAMESPACE::BLOB_DB_GC_NUM_NEW_FILES</a></div><div class="ttdeci">@ BLOB_DB_GC_NUM_NEW_FILES</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00364">statistics.h:364</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1CompactRangeOptions_html"><div class="ttname"><a href="../../da/d01/structROCKSDB__NAMESPACE_1_1CompactRangeOptions.html">ROCKSDB_NAMESPACE::CompactRangeOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l02127">options.h:2127</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_a25b10df716c48687f2cf26a0c9695331"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a25b10df716c48687f2cf26a0c9695331">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::enable_garbage_collection</a></div><div class="ttdeci">bool enable_garbage_collection</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00075">blob_db.h:75</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_adc68ba0cb89e555cc0d5a4ddf9a441d9"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#adc68ba0cb89e555cc0d5a4ddf9a441d9">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::garbage_collection_cutoff</a></div><div class="ttdeci">double garbage_collection_cutoff</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00080">blob_db.h:80</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ab8b4f8557e080f20f599d9bf3a7031a6_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ab8b4f8557e080f20f599d9bf3a7031a6_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ab8b4f8557e080f20f599d9bf3a7031a6_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_ab8b4f8557e080f20f599d9bf3a7031a6_cgraph">
<area shape="rect" title=" " alt="" coords="5,213,187,258"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="237,109,418,154"/>
<area shape="poly" title=" " alt="" coords="138,211,234,164,248,158,250,163,236,169,141,215"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a9c664f89b5387f96bf3ccc1ca519b3e3" title=" " alt="" coords="237,179,418,223"/>
<area shape="poly" title=" " alt="" coords="187,219,221,214,222,219,188,225"/>
<area shape="rect" href="../../d0/d87/classROCKSDB__NAMESPACE_1_1Statistics.html#a7c9542ad2510116bd3c99339b3fae9e9" title=" " alt="" coords="235,248,421,293"/>
<area shape="poly" title=" " alt="" coords="188,247,220,251,219,257,187,252"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#aac3ab4ed3da72b31d20d77d6360484cf" title=" " alt="" coords="237,545,418,606"/>
<area shape="poly" title=" " alt="" coords="115,257,299,530,295,533,111,260"/>
<area shape="poly" title=" " alt="" coords="284,109,282,99,290,90,305,85,328,83,353,85,368,92,366,97,352,90,328,88,306,90,293,95,287,101,289,108"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a68919e7621ca06608ff5692f357819ac" title=" " alt="" coords="473,5,654,50"/>
<area shape="poly" title=" " alt="" coords="403,176,419,164,430,152,436,139,442,114,448,87,456,74,467,60,471,57,474,61,471,64,460,77,453,89,448,115,441,141,434,155,423,168,406,180"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a4c5ebb23307638e76198b0007b1a9f3b" title=" " alt="" coords="473,75,654,119"/>
<area shape="poly" title=" " alt="" coords="395,176,420,164,443,147,468,129,479,124,481,128,470,134,447,151,422,169,397,180"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#ac86f16d0d65d714b1c148a1a9453849c" title=" " alt="" coords="473,144,654,189"/>
<area shape="poly" title=" " alt="" coords="419,185,457,179,458,185,419,190"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a7be254812ba1533346e05b3ee4f986e4" title=" " alt="" coords="473,307,654,351"/>
<area shape="poly" title=" " alt="" coords="397,222,422,233,447,250,471,268,513,296,510,300,467,273,444,254,420,238,395,226"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#af6782aa8e8dc77a5e52b0fc3660ea684" title=" " alt="" coords="473,213,654,258"/>
<area shape="poly" title=" " alt="" coords="419,212,458,217,457,223,419,217"/>
<area shape="rect" href="../../d2/d44/classROCKSDB__NAMESPACE_1_1BlobIndex.html#a15e208497b61f7c5c654ce8775b74f66" title=" " alt="" coords="706,109,888,154"/>
<area shape="poly" title=" " alt="" coords="631,48,659,60,741,99,739,104,657,65,629,53"/>
<area shape="poly" title=" " alt="" coords="655,108,691,113,690,119,654,113"/>
<area shape="poly" title=" " alt="" coords="654,150,690,145,691,150,655,155"/>
<area shape="poly" title=" " alt="" coords="519,307,518,297,525,288,541,282,564,280,589,283,604,289,602,294,588,288,564,285,542,287,528,292,523,298,524,306"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0cc71b754e1fa5911df495d70886f6cf" title=" " alt="" coords="706,263,888,307"/>
<area shape="poly" title=" " alt="" coords="654,309,690,302,691,308,655,314"/>
<area shape="poly" title=" " alt="" coords="753,263,752,253,759,244,774,238,797,236,822,239,837,245,834,250,820,244,797,241,776,243,762,248,757,254,758,262"/>
<area shape="poly" title=" " alt="" coords="629,210,657,199,739,159,741,164,659,203,631,215"/>
<area shape="poly" title=" " alt="" coords="282,544,283,534,292,526,307,520,328,518,352,521,367,528,365,533,351,526,328,523,308,525,295,530,288,537,287,545"/>
<area shape="rect" href="../../d9/dd7/classROCKSDB__NAMESPACE_1_1LocalSavePoint.html#a11dae84d5a584ba0f1555b278a190bef" title=" " alt="" coords="473,423,654,467"/>
<area shape="poly" title=" " alt="" coords="384,542,507,473,510,477,386,547"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a7fbb78a50c8af19df739f92320bd6b07" title=" " alt="" coords="706,494,888,556"/>
<area shape="poly" title=" " alt="" coords="419,563,691,534,691,539,419,569"/>
<area shape="rect" href="../../dc/dd2/classROCKSDB__NAMESPACE_1_1WriteBatchInternal.html#a6702556c024c8607ed8bd346ea8367c7" title=" " alt="" coords="469,600,658,645"/>
<area shape="poly" title=" " alt="" coords="420,591,454,598,453,603,418,596"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a40303fbe16e1a012b260024841977046" title=" " alt="" coords="473,720,654,765"/>
<area shape="poly" title=" " alt="" coords="375,605,520,709,517,713,371,609"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a239fbfa45d0b21b6882d7a2c9c7c77c0" title=" " alt="" coords="706,836,888,881"/>
<area shape="poly" title=" " alt="" coords="345,606,364,645,392,691,427,737,471,775,523,804,580,825,637,840,691,849,690,854,636,845,578,830,521,809,467,779,423,740,387,694,359,648,340,608"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a97a23b3a8089ca01207c23e2536a828c" title=" " alt="" coords="706,332,888,377"/>
<area shape="poly" title=" " alt="" coords="622,420,705,387,721,380,723,385,707,391,624,425"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a68c941da5f3083ca54122b381139b65b" title=" " alt="" coords="706,401,888,446"/>
<area shape="poly" title=" " alt="" coords="655,434,690,431,691,436,655,439"/>
<area shape="poly" title=" " alt="" coords="632,465,693,486,691,491,630,470"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="936,367,1117,411"/>
<area shape="poly" title=" " alt="" coords="888,365,921,370,920,376,888,371"/>
<area shape="poly" title=" " alt="" coords="888,407,920,402,921,408,888,413"/>
<area shape="poly" title=" " alt="" coords="752,494,753,484,761,475,776,469,797,468,821,470,836,477,834,482,820,475,797,473,777,475,764,479,758,486,757,494"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ab737420aba13b6d2301d1da9682f036e" title=" " alt="" coords="936,503,1117,547"/>
<area shape="poly" title=" " alt="" coords="888,522,920,522,920,528,888,528"/>
<area shape="poly" title=" " alt="" coords="982,503,981,493,989,484,1004,478,1026,476,1051,479,1066,485,1064,490,1050,484,1026,481,1005,483,992,488,986,494,988,502"/>
<area shape="poly" title=" " alt="" coords="519,600,518,590,525,581,541,575,564,573,589,576,604,582,602,587,588,581,564,579,542,581,528,585,523,591,524,599"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a0afa96709ce3127ae462031b1009f797" title=" " alt="" coords="706,604,888,649"/>
<area shape="poly" title=" " alt="" coords="659,621,691,622,691,627,659,627"/>
<area shape="poly" title=" " alt="" coords="753,604,752,594,759,585,774,579,797,577,822,580,837,586,834,591,820,585,797,583,776,585,762,589,757,595,758,603"/>
<area shape="poly" title=" " alt="" coords="519,720,518,710,525,701,541,695,564,693,589,696,604,702,602,707,588,701,564,699,542,701,528,705,523,711,524,719"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a5230d45b66475f5e342a7654313d4c0e" title=" " alt="" coords="706,673,888,718"/>
<area shape="poly" title=" " alt="" coords="654,722,690,714,691,720,655,727"/>
<area shape="poly" title=" " alt="" coords="612,763,738,826,736,831,609,768"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c" title=" " alt="" coords="706,743,888,787"/>
<area shape="poly" title=" " alt="" coords="655,749,691,752,690,757,655,754"/>
<area shape="poly" title=" " alt="" coords="753,836,752,826,759,817,774,811,797,809,822,812,837,818,834,823,820,817,797,815,776,817,762,821,757,827,758,835"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a246d45df4bae3166d41c545f41368974" title=" " alt="" coords="936,836,1117,881"/>
<area shape="poly" title=" " alt="" coords="888,856,920,856,920,861,888,861"/>
<area shape="poly" title=" " alt="" coords="982,836,981,826,989,817,1004,811,1026,809,1051,812,1066,818,1064,823,1050,817,1026,815,1005,817,992,821,986,827,988,835"/>
</map>
</div>

</div>
</div>
<a id="adfffcc1acce452365a221d01a2a05087" name="adfffcc1acce452365a221d01a2a05087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfffcc1acce452365a221d01a2a05087">&#9670;&#160;</a></span>TEST_F() <span class="overload">[15/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GetExpiration</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00407">407</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  407</span>                                  {</div>
<div class="line"><span class="lineno">  408</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  409</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno">  410</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  411</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  412</span>  mock_clock_-&gt;SetCurrentTime(100);</div>
<div class="line"><span class="lineno">  413</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  414</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key1&quot;</span>, <span class="stringliteral">&quot;value1&quot;</span>));</div>
<div class="line"><span class="lineno">  415</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;key2&quot;</span>, <span class="stringliteral">&quot;value2&quot;</span>, 200));</div>
<div class="line"><span class="lineno">  416</span>  <a class="code hl_class" href="../../d9/dd6/classROCKSDB__NAMESPACE_1_1PinnableSlice.html">PinnableSlice</a> value;</div>
<div class="line"><span class="lineno">  417</span>  uint64_t expiration;</div>
<div class="line"><span class="lineno">  418</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), <span class="stringliteral">&quot;key1&quot;</span>, &amp;value, &amp;expiration));</div>
<div class="line"><span class="lineno">  419</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;value1&quot;</span>, value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>());</div>
<div class="line"><span class="lineno">  420</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<a class="code hl_variable" href="#a370c88ffe8d625dd0f8b028c385ea1d2">kNoExpiration</a>, expiration);</div>
<div class="line"><span class="lineno">  421</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), <span class="stringliteral">&quot;key2&quot;</span>, &amp;value, &amp;expiration));</div>
<div class="line"><span class="lineno">  422</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;value2&quot;</span>, value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>());</div>
<div class="line"><span class="lineno">  423</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(300 <span class="comment">/* = 100 + 200 */</span>, expiration);</div>
<div class="line"><span class="lineno">  424</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1PinnableSlice_html"><div class="ttname"><a href="../../d9/dd6/classROCKSDB__NAMESPACE_1_1PinnableSlice.html">ROCKSDB_NAMESPACE::PinnableSlice</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d48/slice_8h_source.html#l00138">slice.h:138</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Slice_html_a290b26395e5d5df4b78f0a164c7da733"><div class="ttname"><a href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ROCKSDB_NAMESPACE::Slice::ToString</a></div><div class="ttdeci">std::string ToString(bool hex=false) const</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d5a/slice_8cc_source.html#l00292">slice.cc:292</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_adfffcc1acce452365a221d01a2a05087_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_adfffcc1acce452365a221d01a2a05087_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_adfffcc1acce452365a221d01a2a05087_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_adfffcc1acce452365a221d01a2a05087_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,187,74"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="187,49,219,49,219,54,187,54"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#af026b3da84709ab0bfb50788de9e04b7" title=" " alt="" coords="464,29,645,74"/>
<area shape="poly" title=" " alt="" coords="416,49,449,49,449,54,416,54"/>
<area shape="poly" title=" " alt="" coords="511,29,510,19,517,10,532,5,555,3,580,5,594,12,592,17,578,10,555,8,533,10,520,15,515,21,516,28"/>
</map>
</div>

</div>
</div>
<a id="a2614bfc0fe0ac62fd8bf6fd8020f1817" name="a2614bfc0fe0ac62fd8bf6fd8020f1817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2614bfc0fe0ac62fd8bf6fd8020f1817">&#9670;&#160;</a></span>TEST_F() <span class="overload">[16/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GetIOError</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00426">426</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  426</span>                               {</div>
<div class="line"><span class="lineno">  427</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  428</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = fault_injection_env_.get();</div>
<div class="line"><span class="lineno">  429</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  430</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;  <span class="comment">// Make sure value write to blob file</span></div>
<div class="line"><span class="lineno">  431</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  432</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  433</span>  <a class="code hl_class" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html">ColumnFamilyHandle</a> *column_family = blob_db_-&gt;DefaultColumnFamily();</div>
<div class="line"><span class="lineno">  434</span>  <a class="code hl_class" href="../../d9/dd6/classROCKSDB__NAMESPACE_1_1PinnableSlice.html">PinnableSlice</a> value;</div>
<div class="line"><span class="lineno">  435</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno">  436</span>  fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">false</span>, <a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb">Status::IOError</a>());</div>
<div class="line"><span class="lineno">  437</span>  <a class="code hl_class" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> s = blob_db_-&gt;Get(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), column_family, <span class="stringliteral">&quot;foo&quot;</span>, &amp;value);</div>
<div class="line"><span class="lineno">  438</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb">IsIOError</a>());</div>
<div class="line"><span class="lineno">  439</span>  <span class="comment">// Reactivate file system to allow test to close DB.</span></div>
<div class="line"><span class="lineno">  440</span>  fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  441</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html_ad2630fe63daa0a4ea6c63502e36384cb"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb">ROCKSDB_NAMESPACE::Status::IOError</a></div><div class="ttdeci">static Status IOError(const Slice &amp;msg, const Slice &amp;msg2=Slice())</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00224">status.h:224</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html_afbdbc286a17e980852073e5382cff0fb"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb">ROCKSDB_NAMESPACE::Status::IsIOError</a></div><div class="ttdeci">bool IsIOError() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00364">status.h:364</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a2614bfc0fe0ac62fd8bf6fd8020f1817_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a2614bfc0fe0ac62fd8bf6fd8020f1817_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a2614bfc0fe0ac62fd8bf6fd8020f1817_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a2614bfc0fe0ac62fd8bf6fd8020f1817_cgraph">
<area shape="rect" title=" " alt="" coords="5,40,187,85"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="187,46,219,41,220,46,187,51"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb" title=" " alt="" coords="235,75,416,119"/>
<area shape="poly" title=" " alt="" coords="187,73,220,78,219,84,187,79"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="464,5,645,50"/>
<area shape="poly" title=" " alt="" coords="416,25,449,25,449,30,416,30"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="464,75,645,119"/>
<area shape="poly" title=" " alt="" coords="416,94,449,94,449,100,416,100"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="693,105,875,150"/>
<area shape="poly" title=" " alt="" coords="404,117,464,129,574,136,678,133,678,139,574,141,464,134,403,123"/>
<area shape="poly" title=" " alt="" coords="646,106,678,111,677,116,645,112"/>
</map>
</div>

</div>
</div>
<a id="a59525b3609e1e16f755fe6ff8fb5bbc5" name="a59525b3609e1e16f755fe6ff8fb5bbc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59525b3609e1e16f755fe6ff8fb5bbc5">&#9670;&#160;</a></span>TEST_F() <span class="overload">[17/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GetLiveFilesMetaData</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00970">970</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  970</span>                                         {</div>
<div class="line"><span class="lineno">  971</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  974</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a52d9f19d5ffa5110a6d6050b6fc1e241">blob_dir</a> = <span class="stringliteral">&quot;blob_dir&quot;</span>;</div>
<div class="line"><span class="lineno">  975</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ae2d11ea7eb0b29f3db2b5d5aa14b32dc">path_relative</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  976</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 10;</div>
<div class="line"><span class="lineno">  977</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  978</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  981</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno">  982</span> </div>
<div class="line"><span class="lineno">  983</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  984</span> </div>
<div class="line"><span class="lineno">  985</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  986</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  987</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  988</span>  }</div>
<div class="line"><span class="lineno">  989</span> </div>
<div class="line"><span class="lineno">  990</span>  <span class="keyword">constexpr</span> uint64_t expiration = 1000ULL;</div>
<div class="line"><span class="lineno">  991</span>  PutRandomUntil(<span class="stringliteral">&quot;key100&quot;</span>, expiration, &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  992</span> </div>
<div class="line"><span class="lineno">  993</span>  std::vector&lt;LiveFileMetaData&gt; metadata;</div>
<div class="line"><span class="lineno">  994</span>  blob_db_-&gt;GetLiveFilesMetaData(&amp;metadata);</div>
<div class="line"><span class="lineno">  995</span> </div>
<div class="line"><span class="lineno">  996</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2U, metadata.size());</div>
<div class="line"><span class="lineno">  997</span>  <span class="comment">// Path should be relative to db_name, but begin with slash.</span></div>
<div class="line"><span class="lineno">  998</span>  <span class="keyword">const</span> std::string filename1(<span class="stringliteral">&quot;/blob_dir/000001.blob&quot;</span>);</div>
<div class="line"><span class="lineno">  999</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(filename1, metadata[0].name);</div>
<div class="line"><span class="lineno"> 1000</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, metadata[0].file_number);</div>
<div class="line"><span class="lineno"> 1001</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(0, metadata[0].oldest_ancester_time);</div>
<div class="line"><span class="lineno"> 1002</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a6afe606726a5d72bcd8c55cc50254d8a">kDefaultColumnFamilyName</a>, metadata[0].column_family_name);</div>
<div class="line"><span class="lineno"> 1003</span> </div>
<div class="line"><span class="lineno"> 1004</span>  <span class="keyword">const</span> std::string filename2(<span class="stringliteral">&quot;/blob_dir/000002.blob&quot;</span>);</div>
<div class="line"><span class="lineno"> 1005</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(filename2, metadata[1].name);</div>
<div class="line"><span class="lineno"> 1006</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, metadata[1].file_number);</div>
<div class="line"><span class="lineno"> 1007</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(expiration, metadata[1].oldest_ancester_time);</div>
<div class="line"><span class="lineno"> 1008</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a6afe606726a5d72bcd8c55cc50254d8a">kDefaultColumnFamilyName</a>, metadata[1].column_family_name);</div>
<div class="line"><span class="lineno"> 1009</span> </div>
<div class="line"><span class="lineno"> 1010</span>  std::vector&lt;std::string&gt; livefile;</div>
<div class="line"><span class="lineno"> 1011</span>  uint64_t mfs;</div>
<div class="line"><span class="lineno"> 1012</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;GetLiveFiles(livefile, &amp;mfs, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno"> 1013</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(5U, livefile.size());</div>
<div class="line"><span class="lineno"> 1014</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(filename1, livefile[3]);</div>
<div class="line"><span class="lineno"> 1015</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(filename2, livefile[4]);</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>  std::vector&lt;LiveFileStorageInfo&gt; all_files, blob_files;</div>
<div class="line"><span class="lineno"> 1018</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;GetLiveFilesStorageInfo(<a class="code hl_struct" href="../../d4/d52/structROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions.html">LiveFilesStorageInfoOptions</a>(),</div>
<div class="line"><span class="lineno"> 1019</span>                                              &amp;all_files));</div>
<div class="line"><span class="lineno"> 1020</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; all_files.size(); i++) {</div>
<div class="line"><span class="lineno"> 1021</span>    <span class="keywordflow">if</span> (all_files[i].file_type == <a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a572c40b059615a4b9755748d810fc3ada810a2dda7079cf2c6b58ef1401784771">kBlobFile</a>) {</div>
<div class="line"><span class="lineno"> 1022</span>      blob_files.push_back(all_files[i]);</div>
<div class="line"><span class="lineno"> 1023</span>    }</div>
<div class="line"><span class="lineno"> 1024</span>  }</div>
<div class="line"><span class="lineno"> 1025</span> </div>
<div class="line"><span class="lineno"> 1026</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2U, blob_files.size());</div>
<div class="line"><span class="lineno"> 1027</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a>(all_files.size(), blob_files.size());</div>
<div class="line"><span class="lineno"> 1028</span> </div>
<div class="line"><span class="lineno"> 1029</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;000001.blob&quot;</span>, blob_files[0].relative_filename);</div>
<div class="line"><span class="lineno"> 1030</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_impl()-&gt;TEST_blob_dir(), blob_files[0].directory);</div>
<div class="line"><span class="lineno"> 1031</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a>(blob_files[0].size, 0);</div>
<div class="line"><span class="lineno"> 1032</span> </div>
<div class="line"><span class="lineno"> 1033</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(<span class="stringliteral">&quot;000002.blob&quot;</span>, blob_files[1].relative_filename);</div>
<div class="line"><span class="lineno"> 1034</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_impl()-&gt;TEST_blob_dir(), blob_files[1].directory);</div>
<div class="line"><span class="lineno"> 1035</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a16a882d4eafc9f8643867aea40879140">ASSERT_GT</a>(blob_files[1].size, 0);</div>
<div class="line"><span class="lineno"> 1036</span> </div>
<div class="line"><span class="lineno"> 1037</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1038</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a6afe606726a5d72bcd8c55cc50254d8a"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a6afe606726a5d72bcd8c55cc50254d8a">ROCKSDB_NAMESPACE::kDefaultColumnFamilyName</a></div><div class="ttdeci">const std::string kDefaultColumnFamilyName</div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions_html"><div class="ttname"><a href="../../d4/d52/structROCKSDB__NAMESPACE_1_1LiveFilesStorageInfoOptions.html">ROCKSDB_NAMESPACE::LiveFilesStorageInfoOptions</a></div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l02385">options.h:2385</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0d8e677e26dc80b9334fddb3567be253" name="a0d8e677e26dc80b9334fddb3567be253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d8e677e26dc80b9334fddb3567be253">&#9670;&#160;</a></span>TEST_F() <span class="overload">[18/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">InlineSmallValues</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01306">1306</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1306</span>                                      {</div>
<div class="line"><span class="lineno"> 1307</span>  <span class="keyword">constexpr</span> uint64_t kMaxExpiration = 1000;</div>
<div class="line"><span class="lineno"> 1308</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno"> 1309</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1310</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = kMaxExpiration;</div>
<div class="line"><span class="lineno"> 1311</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 100;</div>
<div class="line"><span class="lineno"> 1312</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">blob_file_size</a> = 256 * 1000 * 1000;</div>
<div class="line"><span class="lineno"> 1313</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1314</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1315</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1316</span>  mock_clock_-&gt;SetCurrentTime(0);</div>
<div class="line"><span class="lineno"> 1317</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1318</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1319</span>  std::map&lt;std::string, KeyVersion&gt; versions;</div>
<div class="line"><span class="lineno"> 1320</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 1000; i++) {</div>
<div class="line"><span class="lineno"> 1321</span>    <span class="keywordtype">bool</span> is_small_value = rnd.Next() % 2;</div>
<div class="line"><span class="lineno"> 1322</span>    <span class="keywordtype">bool</span> has_ttl = rnd.Next() % 2;</div>
<div class="line"><span class="lineno"> 1323</span>    uint64_t expiration = rnd.Next() % kMaxExpiration;</div>
<div class="line"><span class="lineno"> 1324</span>    <span class="keywordtype">int</span> len = is_small_value ? 50 : 200;</div>
<div class="line"><span class="lineno"> 1325</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno"> 1326</span>    std::string value = rnd.HumanReadableString(len);</div>
<div class="line"><span class="lineno"> 1327</span>    std::string blob_index;</div>
<div class="line"><span class="lineno"> 1328</span>    data[key] = value;</div>
<div class="line"><span class="lineno"> 1329</span>    <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1330</span>    <span class="keywordflow">if</span> (!has_ttl) {</div>
<div class="line"><span class="lineno"> 1331</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Put(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), key, value));</div>
<div class="line"><span class="lineno"> 1332</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1333</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;PutUntil(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), key, value, expiration));</div>
<div class="line"><span class="lineno"> 1334</span>    }</div>
<div class="line"><span class="lineno"> 1335</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1336</span>    versions[key] =</div>
<div class="line"><span class="lineno"> 1337</span>        KeyVersion(key, value, sequence,</div>
<div class="line"><span class="lineno"> 1338</span>                   (is_small_value &amp;&amp; !has_ttl) ? kTypeValue : kTypeBlobIndex);</div>
<div class="line"><span class="lineno"> 1339</span>  }</div>
<div class="line"><span class="lineno"> 1340</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1341</span>  VerifyBaseDB(versions);</div>
<div class="line"><span class="lineno"> 1342</span>  <span class="keyword">auto</span> *bdb_impl = <span class="keyword">static_cast&lt;</span>BlobDBImpl *<span class="keyword">&gt;</span>(blob_db_);</div>
<div class="line"><span class="lineno"> 1343</span>  <span class="keyword">auto</span> blob_files = bdb_impl-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 1344</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_files.size());</div>
<div class="line"><span class="lineno"> 1345</span>  std::shared_ptr&lt;BlobFile&gt; non_ttl_file;</div>
<div class="line"><span class="lineno"> 1346</span>  std::shared_ptr&lt;BlobFile&gt; ttl_file;</div>
<div class="line"><span class="lineno"> 1347</span>  <span class="keywordflow">if</span> (blob_files[0]-&gt;HasTTL()) {</div>
<div class="line"><span class="lineno"> 1348</span>    ttl_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 1349</span>    non_ttl_file = blob_files[1];</div>
<div class="line"><span class="lineno"> 1350</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1351</span>    non_ttl_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 1352</span>    ttl_file = blob_files[1];</div>
<div class="line"><span class="lineno"> 1353</span>  }</div>
<div class="line"><span class="lineno"> 1354</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(non_ttl_file-&gt;HasTTL());</div>
<div class="line"><span class="lineno"> 1355</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(ttl_file-&gt;HasTTL());</div>
<div class="line"><span class="lineno"> 1356</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0d8e677e26dc80b9334fddb3567be253_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0d8e677e26dc80b9334fddb3567be253_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0d8e677e26dc80b9334fddb3567be253_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0d8e677e26dc80b9334fddb3567be253_cgraph">
<area shape="rect" title=" " alt="" coords="5,89,187,134"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,29,464,74"/>
<area shape="poly" title=" " alt="" coords="187,88,237,76,238,81,188,93"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="741,60,923,105"/>
<area shape="poly" title=" " alt="" coords="187,105,726,84,726,89,187,111"/>
<area shape="rect" href="../../db/dfb/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBImpl.html#ae37cc4e0f7f1c0d5f0ba43c673729dec" title=" " alt="" coords="259,173,440,234"/>
<area shape="poly" title=" " alt="" coords="161,132,249,165,248,170,159,137"/>
<area shape="poly" title=" " alt="" coords="301,29,300,19,308,10,325,5,349,3,377,5,393,12,391,17,375,10,349,8,326,10,311,15,305,21,306,28"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="512,29,693,74"/>
<area shape="poly" title=" " alt="" coords="465,49,496,49,496,54,465,54"/>
<area shape="poly" title=" " alt="" coords="694,61,726,66,725,71,693,66"/>
<area shape="poly" title=" " alt="" coords="300,172,301,162,310,154,326,148,349,146,376,149,392,156,390,161,374,154,349,151,327,153,313,158,306,165,305,173"/>
</map>
</div>

</div>
</div>
<a id="a67ae071fb784ef74f6b8f5e7a0cfcdf4" name="a67ae071fb784ef74f6b8f5e7a0cfcdf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67ae071fb784ef74f6b8f5e7a0cfcdf4">&#9670;&#160;</a></span>TEST_F() <span class="overload">[19/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MaintainBlobFileToSstMapping</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l02065">2065</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2065</span>                                                 {</div>
<div class="line"><span class="lineno"> 2066</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 2067</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a25b10df716c48687f2cf26a0c9695331">enable_garbage_collection</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2068</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2069</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno"> 2070</span> </div>
<div class="line"><span class="lineno"> 2071</span>  <span class="comment">// Register some dummy blob files.</span></div>
<div class="line"><span class="lineno"> 2072</span>  blob_db_impl()-&gt;TEST_AddDummyBlobFile(1, <span class="comment">/* immutable_sequence */</span> 200);</div>
<div class="line"><span class="lineno"> 2073</span>  blob_db_impl()-&gt;TEST_AddDummyBlobFile(2, <span class="comment">/* immutable_sequence */</span> 300);</div>
<div class="line"><span class="lineno"> 2074</span>  blob_db_impl()-&gt;TEST_AddDummyBlobFile(3, <span class="comment">/* immutable_sequence */</span> 400);</div>
<div class="line"><span class="lineno"> 2075</span>  blob_db_impl()-&gt;TEST_AddDummyBlobFile(4, <span class="comment">/* immutable_sequence */</span> 500);</div>
<div class="line"><span class="lineno"> 2076</span>  blob_db_impl()-&gt;TEST_AddDummyBlobFile(5, <span class="comment">/* immutable_sequence */</span> 600);</div>
<div class="line"><span class="lineno"> 2077</span> </div>
<div class="line"><span class="lineno"> 2078</span>  <span class="comment">// Initialize the blob &lt;-&gt; SST file mapping. First, add some SST files with</span></div>
<div class="line"><span class="lineno"> 2079</span>  <span class="comment">// blob file references, then some without.</span></div>
<div class="line"><span class="lineno"> 2080</span>  std::vector&lt;LiveFileMetaData&gt; live_files;</div>
<div class="line"><span class="lineno"> 2081</span> </div>
<div class="line"><span class="lineno"> 2082</span>  <span class="keywordflow">for</span> (uint64_t i = 1; i &lt;= 10; ++i) {</div>
<div class="line"><span class="lineno"> 2083</span>    <a class="code hl_struct" href="../../de/ded/structROCKSDB__NAMESPACE_1_1LiveFileMetaData.html">LiveFileMetaData</a> live_file;</div>
<div class="line"><span class="lineno"> 2084</span>    live_file.<a class="code hl_variable" href="../../da/de8/structROCKSDB__NAMESPACE_1_1FileStorageInfo.html#a17a020370143d8ee62730910f941046f">file_number</a> = i;</div>
<div class="line"><span class="lineno"> 2085</span>    live_file.<a class="code hl_variable" href="../../d9/d11/structROCKSDB__NAMESPACE_1_1SstFileMetaData.html#a8a5108f7b621f8190ad4d391a9ea80db">oldest_blob_file_number</a> = ((i - 1) % 5) + 1;</div>
<div class="line"><span class="lineno"> 2086</span> </div>
<div class="line"><span class="lineno"> 2087</span>    live_files.emplace_back(live_file);</div>
<div class="line"><span class="lineno"> 2088</span>  }</div>
<div class="line"><span class="lineno"> 2089</span> </div>
<div class="line"><span class="lineno"> 2090</span>  <span class="keywordflow">for</span> (uint64_t i = 11; i &lt;= 20; ++i) {</div>
<div class="line"><span class="lineno"> 2091</span>    <a class="code hl_struct" href="../../de/ded/structROCKSDB__NAMESPACE_1_1LiveFileMetaData.html">LiveFileMetaData</a> live_file;</div>
<div class="line"><span class="lineno"> 2092</span>    live_file.<a class="code hl_variable" href="../../da/de8/structROCKSDB__NAMESPACE_1_1FileStorageInfo.html#a17a020370143d8ee62730910f941046f">file_number</a> = i;</div>
<div class="line"><span class="lineno"> 2093</span> </div>
<div class="line"><span class="lineno"> 2094</span>    live_files.emplace_back(live_file);</div>
<div class="line"><span class="lineno"> 2095</span>  }</div>
<div class="line"><span class="lineno"> 2096</span> </div>
<div class="line"><span class="lineno"> 2097</span>  blob_db_impl()-&gt;TEST_InitializeBlobFileToSstMapping(live_files);</div>
<div class="line"><span class="lineno"> 2098</span> </div>
<div class="line"><span class="lineno"> 2099</span>  <span class="comment">// Check that the blob &lt;-&gt; SST mappings have been correctly initialized.</span></div>
<div class="line"><span class="lineno"> 2100</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2101</span> </div>
<div class="line"><span class="lineno"> 2102</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files.size(), 5);</div>
<div class="line"><span class="lineno"> 2103</span> </div>
<div class="line"><span class="lineno"> 2104</span>  {</div>
<div class="line"><span class="lineno"> 2105</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2106</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 5);</div>
<div class="line"><span class="lineno"> 2107</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2108</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 1);</div>
<div class="line"><span class="lineno"> 2109</span>    }</div>
<div class="line"><span class="lineno"> 2110</span> </div>
<div class="line"><span class="lineno"> 2111</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_impl()-&gt;TEST_GetObsoleteFiles().empty());</div>
<div class="line"><span class="lineno"> 2112</span>  }</div>
<div class="line"><span class="lineno"> 2113</span> </div>
<div class="line"><span class="lineno"> 2114</span>  {</div>
<div class="line"><span class="lineno"> 2115</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2116</span>        {1, 6}, {2, 7}, {3, 8}, {4, 9}, {5, 10}};</div>
<div class="line"><span class="lineno"> 2117</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno"> 2118</span>                                              <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2119</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2120</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2121</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2122</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2123</span>    }</div>
<div class="line"><span class="lineno"> 2124</span> </div>
<div class="line"><span class="lineno"> 2125</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2126</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 5);</div>
<div class="line"><span class="lineno"> 2127</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2128</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 1);</div>
<div class="line"><span class="lineno"> 2129</span>    }</div>
<div class="line"><span class="lineno"> 2130</span> </div>
<div class="line"><span class="lineno"> 2131</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_impl()-&gt;TEST_GetObsoleteFiles().empty());</div>
<div class="line"><span class="lineno"> 2132</span>  }</div>
<div class="line"><span class="lineno"> 2133</span> </div>
<div class="line"><span class="lineno"> 2134</span>  <span class="comment">// Simulate a flush where the SST does not reference any blob files.</span></div>
<div class="line"><span class="lineno"> 2135</span>  {</div>
<div class="line"><span class="lineno"> 2136</span>    FlushJobInfo info{};</div>
<div class="line"><span class="lineno"> 2137</span>    info.file_number = 21;</div>
<div class="line"><span class="lineno"> 2138</span>    info.smallest_seqno = 1;</div>
<div class="line"><span class="lineno"> 2139</span>    info.largest_seqno = 100;</div>
<div class="line"><span class="lineno"> 2140</span> </div>
<div class="line"><span class="lineno"> 2141</span>    blob_db_impl()-&gt;TEST_ProcessFlushJobInfo(info);</div>
<div class="line"><span class="lineno"> 2142</span> </div>
<div class="line"><span class="lineno"> 2143</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2144</span>        {1, 6}, {2, 7}, {3, 8}, {4, 9}, {5, 10}};</div>
<div class="line"><span class="lineno"> 2145</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno"> 2146</span>                                              <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2147</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2148</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2149</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2150</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2151</span>    }</div>
<div class="line"><span class="lineno"> 2152</span> </div>
<div class="line"><span class="lineno"> 2153</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2154</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 5);</div>
<div class="line"><span class="lineno"> 2155</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2156</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 1);</div>
<div class="line"><span class="lineno"> 2157</span>    }</div>
<div class="line"><span class="lineno"> 2158</span> </div>
<div class="line"><span class="lineno"> 2159</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_impl()-&gt;TEST_GetObsoleteFiles().empty());</div>
<div class="line"><span class="lineno"> 2160</span>  }</div>
<div class="line"><span class="lineno"> 2161</span> </div>
<div class="line"><span class="lineno"> 2162</span>  <span class="comment">// Simulate a flush where the SST references a blob file.</span></div>
<div class="line"><span class="lineno"> 2163</span>  {</div>
<div class="line"><span class="lineno"> 2164</span>    FlushJobInfo info{};</div>
<div class="line"><span class="lineno"> 2165</span>    info.file_number = 22;</div>
<div class="line"><span class="lineno"> 2166</span>    info.oldest_blob_file_number = 5;</div>
<div class="line"><span class="lineno"> 2167</span>    info.smallest_seqno = 101;</div>
<div class="line"><span class="lineno"> 2168</span>    info.largest_seqno = 200;</div>
<div class="line"><span class="lineno"> 2169</span> </div>
<div class="line"><span class="lineno"> 2170</span>    blob_db_impl()-&gt;TEST_ProcessFlushJobInfo(info);</div>
<div class="line"><span class="lineno"> 2171</span> </div>
<div class="line"><span class="lineno"> 2172</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2173</span>        {1, 6}, {2, 7}, {3, 8}, {4, 9}, {5, 10, 22}};</div>
<div class="line"><span class="lineno"> 2174</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>,</div>
<div class="line"><span class="lineno"> 2175</span>                                              <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2176</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2177</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2178</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2179</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2180</span>    }</div>
<div class="line"><span class="lineno"> 2181</span> </div>
<div class="line"><span class="lineno"> 2182</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2183</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 5);</div>
<div class="line"><span class="lineno"> 2184</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2185</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 1);</div>
<div class="line"><span class="lineno"> 2186</span>    }</div>
<div class="line"><span class="lineno"> 2187</span> </div>
<div class="line"><span class="lineno"> 2188</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_db_impl()-&gt;TEST_GetObsoleteFiles().empty());</div>
<div class="line"><span class="lineno"> 2189</span>  }</div>
<div class="line"><span class="lineno"> 2190</span> </div>
<div class="line"><span class="lineno"> 2191</span>  <span class="comment">// Simulate a compaction. Some inputs and outputs have blob file references,</span></div>
<div class="line"><span class="lineno"> 2192</span>  <span class="comment">// some don&#39;t. There is also a trivial move (which means the SST appears on</span></div>
<div class="line"><span class="lineno"> 2193</span>  <span class="comment">// both the input and the output list). Blob file 1 loses all its linked SSTs,</span></div>
<div class="line"><span class="lineno"> 2194</span>  <span class="comment">// and since it got marked immutable at sequence number 200 which has already</span></div>
<div class="line"><span class="lineno"> 2195</span>  <span class="comment">// been flushed, it can be marked obsolete.</span></div>
<div class="line"><span class="lineno"> 2196</span>  {</div>
<div class="line"><span class="lineno"> 2197</span>    CompactionJobInfo info{};</div>
<div class="line"><span class="lineno"> 2198</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 1, 1});</div>
<div class="line"><span class="lineno"> 2199</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 2, 2});</div>
<div class="line"><span class="lineno"> 2200</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 6, 1});</div>
<div class="line"><span class="lineno"> 2201</span>    info.input_file_infos.emplace_back(</div>
<div class="line"><span class="lineno"> 2202</span>        CompactionFileInfo{1, 11, <a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac3b2cf3133100c394ced2eedbc1c94ac">kInvalidBlobFileNumber</a>});</div>
<div class="line"><span class="lineno"> 2203</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 22, 5});</div>
<div class="line"><span class="lineno"> 2204</span>    info.output_file_infos.emplace_back(CompactionFileInfo{2, 22, 5});</div>
<div class="line"><span class="lineno"> 2205</span>    info.output_file_infos.emplace_back(CompactionFileInfo{2, 23, 3});</div>
<div class="line"><span class="lineno"> 2206</span>    info.output_file_infos.emplace_back(</div>
<div class="line"><span class="lineno"> 2207</span>        CompactionFileInfo{2, 24, <a class="code hl_variable" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac3b2cf3133100c394ced2eedbc1c94ac">kInvalidBlobFileNumber</a>});</div>
<div class="line"><span class="lineno"> 2208</span> </div>
<div class="line"><span class="lineno"> 2209</span>    blob_db_impl()-&gt;TEST_ProcessCompactionJobInfo(info);</div>
<div class="line"><span class="lineno"> 2210</span> </div>
<div class="line"><span class="lineno"> 2211</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2212</span>        {}, {7}, {3, 8, 23}, {4, 9}, {5, 10, 22}};</div>
<div class="line"><span class="lineno"> 2213</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2214</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2215</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2216</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2217</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2218</span>    }</div>
<div class="line"><span class="lineno"> 2219</span> </div>
<div class="line"><span class="lineno"> 2220</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2221</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 4);</div>
<div class="line"><span class="lineno"> 2222</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line"><span class="lineno"> 2223</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 2);</div>
<div class="line"><span class="lineno"> 2224</span>    }</div>
<div class="line"><span class="lineno"> 2225</span> </div>
<div class="line"><span class="lineno"> 2226</span>    <span class="keyword">auto</span> obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2227</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files.size(), 1);</div>
<div class="line"><span class="lineno"> 2228</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files[0]-&gt;BlobFileNumber(), 1);</div>
<div class="line"><span class="lineno"> 2229</span>  }</div>
<div class="line"><span class="lineno"> 2230</span> </div>
<div class="line"><span class="lineno"> 2231</span>  <span class="comment">// Simulate a failed compaction. No mappings should be updated.</span></div>
<div class="line"><span class="lineno"> 2232</span>  {</div>
<div class="line"><span class="lineno"> 2233</span>    CompactionJobInfo info{};</div>
<div class="line"><span class="lineno"> 2234</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 7, 2});</div>
<div class="line"><span class="lineno"> 2235</span>    info.input_file_infos.emplace_back(CompactionFileInfo{2, 22, 5});</div>
<div class="line"><span class="lineno"> 2236</span>    info.output_file_infos.emplace_back(CompactionFileInfo{2, 25, 3});</div>
<div class="line"><span class="lineno"> 2237</span>    info.status = Status::Corruption();</div>
<div class="line"><span class="lineno"> 2238</span> </div>
<div class="line"><span class="lineno"> 2239</span>    blob_db_impl()-&gt;TEST_ProcessCompactionJobInfo(info);</div>
<div class="line"><span class="lineno"> 2240</span> </div>
<div class="line"><span class="lineno"> 2241</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2242</span>        {}, {7}, {3, 8, 23}, {4, 9}, {5, 10, 22}};</div>
<div class="line"><span class="lineno"> 2243</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2244</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2245</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2246</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2247</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2248</span>    }</div>
<div class="line"><span class="lineno"> 2249</span> </div>
<div class="line"><span class="lineno"> 2250</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2251</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 4);</div>
<div class="line"><span class="lineno"> 2252</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line"><span class="lineno"> 2253</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 2);</div>
<div class="line"><span class="lineno"> 2254</span>    }</div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>    <span class="keyword">auto</span> obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2257</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files.size(), 1);</div>
<div class="line"><span class="lineno"> 2258</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files[0]-&gt;BlobFileNumber(), 1);</div>
<div class="line"><span class="lineno"> 2259</span>  }</div>
<div class="line"><span class="lineno"> 2260</span> </div>
<div class="line"><span class="lineno"> 2261</span>  <span class="comment">// Simulate another compaction. Blob file 2 loses all its linked SSTs</span></div>
<div class="line"><span class="lineno"> 2262</span>  <span class="comment">// but since it got marked immutable at sequence number 300 which hasn&#39;t</span></div>
<div class="line"><span class="lineno"> 2263</span>  <span class="comment">// been flushed yet, it cannot be marked obsolete at this point.</span></div>
<div class="line"><span class="lineno"> 2264</span>  {</div>
<div class="line"><span class="lineno"> 2265</span>    CompactionJobInfo info{};</div>
<div class="line"><span class="lineno"> 2266</span>    info.input_file_infos.emplace_back(CompactionFileInfo{1, 7, 2});</div>
<div class="line"><span class="lineno"> 2267</span>    info.input_file_infos.emplace_back(CompactionFileInfo{2, 22, 5});</div>
<div class="line"><span class="lineno"> 2268</span>    info.output_file_infos.emplace_back(CompactionFileInfo{2, 25, 3});</div>
<div class="line"><span class="lineno"> 2269</span> </div>
<div class="line"><span class="lineno"> 2270</span>    blob_db_impl()-&gt;TEST_ProcessCompactionJobInfo(info);</div>
<div class="line"><span class="lineno"> 2271</span> </div>
<div class="line"><span class="lineno"> 2272</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2273</span>        {}, {}, {3, 8, 23, 25}, {4, 9}, {5, 10}};</div>
<div class="line"><span class="lineno"> 2274</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2275</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2276</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2277</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2278</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2279</span>    }</div>
<div class="line"><span class="lineno"> 2280</span> </div>
<div class="line"><span class="lineno"> 2281</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2282</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 4);</div>
<div class="line"><span class="lineno"> 2283</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++i) {</div>
<div class="line"><span class="lineno"> 2284</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 2);</div>
<div class="line"><span class="lineno"> 2285</span>    }</div>
<div class="line"><span class="lineno"> 2286</span> </div>
<div class="line"><span class="lineno"> 2287</span>    <span class="keyword">auto</span> obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2288</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files.size(), 1);</div>
<div class="line"><span class="lineno"> 2289</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files[0]-&gt;BlobFileNumber(), 1);</div>
<div class="line"><span class="lineno"> 2290</span>  }</div>
<div class="line"><span class="lineno"> 2291</span> </div>
<div class="line"><span class="lineno"> 2292</span>  <span class="comment">// Simulate a flush with largest sequence number 300. This will make it</span></div>
<div class="line"><span class="lineno"> 2293</span>  <span class="comment">// possible to mark blob file 2 obsolete.</span></div>
<div class="line"><span class="lineno"> 2294</span>  {</div>
<div class="line"><span class="lineno"> 2295</span>    FlushJobInfo info{};</div>
<div class="line"><span class="lineno"> 2296</span>    info.file_number = 26;</div>
<div class="line"><span class="lineno"> 2297</span>    info.smallest_seqno = 201;</div>
<div class="line"><span class="lineno"> 2298</span>    info.largest_seqno = 300;</div>
<div class="line"><span class="lineno"> 2299</span> </div>
<div class="line"><span class="lineno"> 2300</span>    blob_db_impl()-&gt;TEST_ProcessFlushJobInfo(info);</div>
<div class="line"><span class="lineno"> 2301</span> </div>
<div class="line"><span class="lineno"> 2302</span>    <span class="keyword">const</span> std::vector&lt;std::unordered_set&lt;uint64_t&gt;&gt; expected_sst_files{</div>
<div class="line"><span class="lineno"> 2303</span>        {}, {}, {3, 8, 23, 25}, {4, 9}, {5, 10}};</div>
<div class="line"><span class="lineno"> 2304</span>    <span class="keyword">const</span> std::vector&lt;bool&gt; expected_obsolete{<span class="keyword">true</span>, <span class="keyword">true</span>, <span class="keyword">false</span>, <span class="keyword">false</span>, <span class="keyword">false</span>};</div>
<div class="line"><span class="lineno"> 2305</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 5; ++i) {</div>
<div class="line"><span class="lineno"> 2306</span>      <span class="keyword">const</span> <span class="keyword">auto</span> &amp;blob_file = blob_files[i];</div>
<div class="line"><span class="lineno"> 2307</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;GetLinkedSstFiles(), expected_sst_files[i]);</div>
<div class="line"><span class="lineno"> 2308</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_file-&gt;Obsolete(), expected_obsolete[i]);</div>
<div class="line"><span class="lineno"> 2309</span>    }</div>
<div class="line"><span class="lineno"> 2310</span> </div>
<div class="line"><span class="lineno"> 2311</span>    <span class="keyword">auto</span> live_imm_files = blob_db_impl()-&gt;TEST_GetLiveImmNonTTLFiles();</div>
<div class="line"><span class="lineno"> 2312</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files.size(), 3);</div>
<div class="line"><span class="lineno"> 2313</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 3; ++i) {</div>
<div class="line"><span class="lineno"> 2314</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(live_imm_files[i]-&gt;BlobFileNumber(), i + 3);</div>
<div class="line"><span class="lineno"> 2315</span>    }</div>
<div class="line"><span class="lineno"> 2316</span> </div>
<div class="line"><span class="lineno"> 2317</span>    <span class="keyword">auto</span> obsolete_files = blob_db_impl()-&gt;TEST_GetObsoleteFiles();</div>
<div class="line"><span class="lineno"> 2318</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files.size(), 2);</div>
<div class="line"><span class="lineno"> 2319</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files[0]-&gt;BlobFileNumber(), 1);</div>
<div class="line"><span class="lineno"> 2320</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(obsolete_files[1]-&gt;BlobFileNumber(), 2);</div>
<div class="line"><span class="lineno"> 2321</span>  }</div>
<div class="line"><span class="lineno"> 2322</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_ac3b2cf3133100c394ced2eedbc1c94ac"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac3b2cf3133100c394ced2eedbc1c94ac">ROCKSDB_NAMESPACE::kInvalidBlobFileNumber</a></div><div class="ttdeci">constexpr uint64_t kInvalidBlobFileNumber</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d46/blob__constants_8h_source.html#l00014">blob_constants.h:14</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1FileStorageInfo_html_a17a020370143d8ee62730910f941046f"><div class="ttname"><a href="../../da/de8/structROCKSDB__NAMESPACE_1_1FileStorageInfo.html#a17a020370143d8ee62730910f941046f">ROCKSDB_NAMESPACE::FileStorageInfo::file_number</a></div><div class="ttdeci">uint64_t file_number</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d28/metadata_8h_source.html#l00033">metadata.h:33</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1LiveFileMetaData_html"><div class="ttname"><a href="../../de/ded/structROCKSDB__NAMESPACE_1_1LiveFileMetaData.html">ROCKSDB_NAMESPACE::LiveFileMetaData</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d28/metadata_8h_source.html#l00168">metadata.h:168</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1SstFileMetaData_html_a8a5108f7b621f8190ad4d391a9ea80db"><div class="ttname"><a href="../../d9/d11/structROCKSDB__NAMESPACE_1_1SstFileMetaData.html#a8a5108f7b621f8190ad4d391a9ea80db">ROCKSDB_NAMESPACE::SstFileMetaData::oldest_blob_file_number</a></div><div class="ttdeci">uint64_t oldest_blob_file_number</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d28/metadata_8h_source.html#l00132">metadata.h:132</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a67ae071fb784ef74f6b8f5e7a0cfcdf4_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a67ae071fb784ef74f6b8f5e7a0cfcdf4_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a67ae071fb784ef74f6b8f5e7a0cfcdf4_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a67ae071fb784ef74f6b8f5e7a0cfcdf4_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,187,50"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a41dc92b90c65fe4db6b69108cf52569e" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="187,25,219,25,219,30,187,30"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="464,5,645,50"/>
<area shape="poly" title=" " alt="" coords="416,25,449,25,449,30,416,30"/>
</map>
</div>

</div>
</div>
<a id="a10574a4107fa7542f962955ad06e6dfc" name="a10574a4107fa7542f962955ad06e6dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10574a4107fa7542f962955ad06e6dfc">&#9670;&#160;</a></span>TEST_F() <span class="overload">[20/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MigrateFromPlainRocksDB</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01040">1040</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1040</span>                                            {</div>
<div class="line"><span class="lineno"> 1041</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumKey = 20;</div>
<div class="line"><span class="lineno"> 1042</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumIteration = 10;</div>
<div class="line"><span class="lineno"> 1043</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno"> 1044</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1045</span>  std::vector&lt;bool&gt; is_blob(kNumKey, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1046</span> </div>
<div class="line"><span class="lineno"> 1047</span>  <span class="comment">// Write to plain rocksdb.</span></div>
<div class="line"><span class="lineno"> 1048</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1049</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#aa03c50d249ad3afef2c9b1039b407afb">create_if_missing</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1050</span>  <a class="code hl_class" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html">DB</a> *db = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1051</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(<a class="code hl_function" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#abd94e728770ecb2a6be245aba961ecc1">DB::Open</a>(options, dbname_, &amp;db));</div>
<div class="line"><span class="lineno"> 1052</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumIteration; i++) {</div>
<div class="line"><span class="lineno"> 1053</span>    <span class="keyword">auto</span> key_index = rnd.Next() % kNumKey;</div>
<div class="line"><span class="lineno"> 1054</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(key_index);</div>
<div class="line"><span class="lineno"> 1055</span>    PutRandom(db, key, &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno"> 1056</span>  }</div>
<div class="line"><span class="lineno"> 1057</span>  VerifyDB(db, data);</div>
<div class="line"><span class="lineno"> 1058</span>  <span class="keyword">delete</span> db;</div>
<div class="line"><span class="lineno"> 1059</span>  db = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1060</span> </div>
<div class="line"><span class="lineno"> 1061</span>  <span class="comment">// Open as blob db. Verify it can read existing data.</span></div>
<div class="line"><span class="lineno"> 1062</span>  Open();</div>
<div class="line"><span class="lineno"> 1063</span>  VerifyDB(blob_db_, data);</div>
<div class="line"><span class="lineno"> 1064</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumIteration; i++) {</div>
<div class="line"><span class="lineno"> 1065</span>    <span class="keyword">auto</span> key_index = rnd.Next() % kNumKey;</div>
<div class="line"><span class="lineno"> 1066</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(key_index);</div>
<div class="line"><span class="lineno"> 1067</span>    is_blob[key_index] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1068</span>    PutRandom(blob_db_, key, &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno"> 1069</span>  }</div>
<div class="line"><span class="lineno"> 1070</span>  VerifyDB(blob_db_, data);</div>
<div class="line"><span class="lineno"> 1071</span>  <span class="keyword">delete</span> blob_db_;</div>
<div class="line"><span class="lineno"> 1072</span>  blob_db_ = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 1073</span> </div>
<div class="line"><span class="lineno"> 1074</span>  <span class="comment">// Verify plain db return error for keys written by blob db.</span></div>
<div class="line"><span class="lineno"> 1075</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(DB::Open(options, dbname_, &amp;db));</div>
<div class="line"><span class="lineno"> 1076</span>  std::string value;</div>
<div class="line"><span class="lineno"> 1077</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumKey; i++) {</div>
<div class="line"><span class="lineno"> 1078</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno"> 1079</span>    Status s = db-&gt;<a class="code hl_function" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#aa12d7b4bb5299d2ec574d5a2b894a045">Get</a>(ReadOptions(), key, &amp;value);</div>
<div class="line"><span class="lineno"> 1080</span>    <span class="keywordflow">if</span> (data.count(key) == 0) {</div>
<div class="line"><span class="lineno"> 1081</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.IsNotFound());</div>
<div class="line"><span class="lineno"> 1082</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_blob[i]) {</div>
<div class="line"><span class="lineno"> 1083</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.IsCorruption());</div>
<div class="line"><span class="lineno"> 1084</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1085</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(s);</div>
<div class="line"><span class="lineno"> 1086</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(data[key], value);</div>
<div class="line"><span class="lineno"> 1087</span>    }</div>
<div class="line"><span class="lineno"> 1088</span>  }</div>
<div class="line"><span class="lineno"> 1089</span>  <span class="keyword">delete</span> db;</div>
<div class="line"><span class="lineno"> 1090</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1DB_html_aa12d7b4bb5299d2ec574d5a2b894a045"><div class="ttname"><a href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#aa12d7b4bb5299d2ec574d5a2b894a045">ROCKSDB_NAMESPACE::DB::Get</a></div><div class="ttdeci">virtual Status Get(const ReadOptions &amp;options, ColumnFamilyHandle *column_family, const Slice &amp;key, PinnableSlice *value, std::string *timestamp)=0</div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1DB_html_abd94e728770ecb2a6be245aba961ecc1"><div class="ttname"><a href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#abd94e728770ecb2a6be245aba961ecc1">ROCKSDB_NAMESPACE::DB::Open</a></div><div class="ttdeci">static Status Open(const Options &amp;options, const std::string &amp;name, DB **dbptr)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/dd4/db__impl__open_8cc_source.html#l01849">db_impl_open.cc:1849</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DBOptions_html_aa03c50d249ad3afef2c9b1039b407afb"><div class="ttname"><a href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#aa03c50d249ad3afef2c9b1039b407afb">ROCKSDB_NAMESPACE::DBOptions::create_if_missing</a></div><div class="ttdeci">bool create_if_missing</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00563">options.h:563</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10574a4107fa7542f962955ad06e6dfc_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10574a4107fa7542f962955ad06e6dfc_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10574a4107fa7542f962955ad06e6dfc_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a10574a4107fa7542f962955ad06e6dfc_cgraph">
<area shape="rect" title=" " alt="" coords="5,116,187,161"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#aa12d7b4bb5299d2ec574d5a2b894a045" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="140,113,233,67,259,54,261,59,236,71,143,118"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a17a0d6bea8f3dc96b146036a15bf6a19" title=" " alt="" coords="464,51,645,95"/>
<area shape="poly" title=" " alt="" coords="187,123,448,85,449,91,187,128"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#abad803bbeb3e3c84affdae4551f372d9" title=" " alt="" coords="464,120,645,165"/>
<area shape="poly" title=" " alt="" coords="187,136,449,139,449,144,187,142"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="235,269,416,314"/>
<area shape="poly" title=" " alt="" coords="121,159,171,207,236,255,245,260,242,264,233,259,168,211,117,163"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#abd94e728770ecb2a6be245aba961ecc1" title=" " alt="" coords="235,200,416,245"/>
<area shape="poly" title=" " alt="" coords="160,159,249,192,247,197,158,164"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="693,99,875,143"/>
<area shape="poly" title=" " alt="" coords="646,89,679,96,678,101,645,95"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="923,129,1104,174"/>
<area shape="poly" title=" " alt="" coords="646,65,756,66,817,73,875,84,921,99,962,119,960,124,919,104,874,89,816,78,756,72,646,70"/>
<area shape="poly" title=" " alt="" coords="875,130,908,135,907,140,875,136"/>
<area shape="poly" title=" " alt="" coords="645,131,678,128,678,134,646,137"/>
<area shape="poly" title=" " alt="" coords="646,150,693,153,804,155,907,154,907,159,804,161,693,158,645,155"/>
<area shape="poly" title=" " alt="" coords="281,200,280,190,288,181,303,175,325,173,350,176,365,182,363,187,349,181,325,179,304,181,291,185,285,191,287,199"/>
<area shape="rect" href="../../d4/dc0/classROCKSDB__NAMESPACE_1_1DB.html#a1e3df9430533d679e15759922a602d23" title=" " alt="" coords="464,265,645,310"/>
<area shape="poly" title=" " alt="" coords="407,243,460,258,458,263,405,248"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73" title=" " alt="" coords="464,196,645,241"/>
<area shape="poly" title=" " alt="" coords="416,218,448,218,449,223,416,223"/>
<area shape="poly" title=" " alt="" coords="608,193,714,147,716,152,610,198"/>
<area shape="poly" title=" " alt="" coords="645,203,907,164,908,170,646,208"/>
</map>
</div>

</div>
</div>
<a id="a10fbb75c816bfdc56d7ecb059bfa220e" name="a10fbb75c816bfdc56d7ecb059bfa220e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10fbb75c816bfdc56d7ecb059bfa220e">&#9670;&#160;</a></span>TEST_F() <span class="overload">[21/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MultipleWriters</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00728">728</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  728</span>                                    {</div>
<div class="line"><span class="lineno">  729</span>  Open(<a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a>());</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>  std::vector&lt;port::Thread&gt; workers;</div>
<div class="line"><span class="lineno">  732</span>  std::vector&lt;std::map&lt;std::string, std::string&gt;&gt; data_set(10);</div>
<div class="line"><span class="lineno">  733</span>  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; 10; i++) {</div>
<div class="line"><span class="lineno">  734</span>    workers.emplace_back(</div>
<div class="line"><span class="lineno">  735</span>        [&amp;](uint32_t <span class="keywordtype">id</span>) {</div>
<div class="line"><span class="lineno">  736</span>          <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301 + <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  737</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 100; j++) {</div>
<div class="line"><span class="lineno">  738</span>            std::string key =</div>
<div class="line"><span class="lineno">  739</span>                <span class="stringliteral">&quot;key&quot;</span> + std::to_string(<span class="keywordtype">id</span>) + <span class="stringliteral">&quot;_&quot;</span> + std::to_string(j);</div>
<div class="line"><span class="lineno">  740</span>            <span class="keywordflow">if</span> (<span class="keywordtype">id</span> &lt; 5) {</div>
<div class="line"><span class="lineno">  741</span>              PutRandom(key, &amp;rnd, &amp;data_set[<span class="keywordtype">id</span>]);</div>
<div class="line"><span class="lineno">  742</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  743</span>              <a class="code hl_class" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a> batch;</div>
<div class="line"><span class="lineno">  744</span>              PutRandomToWriteBatch(key, &amp;rnd, &amp;batch, &amp;data_set[<span class="keywordtype">id</span>]);</div>
<div class="line"><span class="lineno">  745</span>              <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Write(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), &amp;batch));</div>
<div class="line"><span class="lineno">  746</span>            }</div>
<div class="line"><span class="lineno">  747</span>          }</div>
<div class="line"><span class="lineno">  748</span>        },</div>
<div class="line"><span class="lineno">  749</span>        i);</div>
<div class="line"><span class="lineno">  750</span>  }</div>
<div class="line"><span class="lineno">  751</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  752</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 10; i++) {</div>
<div class="line"><span class="lineno">  753</span>    workers[i].join();</div>
<div class="line"><span class="lineno">  754</span>    data.insert(data_set[i].begin(), data_set[i].end());</div>
<div class="line"><span class="lineno">  755</span>  }</div>
<div class="line"><span class="lineno">  756</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  757</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a49afa3d811aaf3e4a59e23af09b9ac70" name="a49afa3d811aaf3e4a59e23af09b9ac70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49afa3d811aaf3e4a59e23af09b9ac70">&#9670;&#160;</a></span>TEST_F() <span class="overload">[22/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OutOfSpace</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01094">1094</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1094</span>                               {</div>
<div class="line"><span class="lineno"> 1095</span>  <span class="comment">// Use mock env to stop wall clock.</span></div>
<div class="line"><span class="lineno"> 1096</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 1097</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1098</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 1099</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ac3012512c247e040f7e3ff4809c91858">max_db_size</a> = 200;</div>
<div class="line"><span class="lineno"> 1100</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a1dfd2b090fb9dc29d916905b28109c6e">is_fifo</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1101</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1102</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno"> 1103</span> </div>
<div class="line"><span class="lineno"> 1104</span>  <span class="comment">// Each stored blob has an overhead of about 42 bytes currently.</span></div>
<div class="line"><span class="lineno"> 1105</span>  <span class="comment">// So a small key + a 100 byte blob should take up ~150 bytes in the db.</span></div>
<div class="line"><span class="lineno"> 1106</span>  std::string value(100, <span class="charliteral">&#39;v&#39;</span>);</div>
<div class="line"><span class="lineno"> 1107</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;PutWithTTL(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), <span class="stringliteral">&quot;key1&quot;</span>, value, 60));</div>
<div class="line"><span class="lineno"> 1108</span> </div>
<div class="line"><span class="lineno"> 1109</span>  <span class="comment">// Putting another blob should fail as ading it would exceed the max_db_size</span></div>
<div class="line"><span class="lineno"> 1110</span>  <span class="comment">// limit.</span></div>
<div class="line"><span class="lineno"> 1111</span>  <a class="code hl_class" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> s = blob_db_-&gt;PutWithTTL(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), <span class="stringliteral">&quot;key2&quot;</span>, value, 60);</div>
<div class="line"><span class="lineno"> 1112</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb">IsIOError</a>());</div>
<div class="line"><span class="lineno"> 1113</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5bf860ac3006c90eea671bea00d7bb5c">IsNoSpace</a>());</div>
<div class="line"><span class="lineno"> 1114</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Status_html_a5bf860ac3006c90eea671bea00d7bb5c"><div class="ttname"><a href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5bf860ac3006c90eea671bea00d7bb5c">ROCKSDB_NAMESPACE::Status::IsNoSpace</a></div><div class="ttdeci">bool IsNoSpace() const</div><div class="ttdef"><b>Definition</b> <a href="../../d9/dd0/include_2rocksdb_2status_8h_source.html#l00445">status.h:445</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a49afa3d811aaf3e4a59e23af09b9ac70_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a49afa3d811aaf3e4a59e23af09b9ac70_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a49afa3d811aaf3e4a59e23af09b9ac70_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a49afa3d811aaf3e4a59e23af09b9ac70_cgraph">
<area shape="rect" title=" " alt="" coords="5,53,187,97"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb" title=" " alt="" coords="235,18,416,63"/>
<area shape="poly" title=" " alt="" coords="187,59,219,54,220,59,187,64"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a5bf860ac3006c90eea671bea00d7bb5c" title=" " alt="" coords="235,87,416,132"/>
<area shape="poly" title=" " alt="" coords="187,86,220,91,219,96,187,91"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="464,27,645,72"/>
<area shape="poly" title=" " alt="" coords="416,41,449,43,448,48,416,47"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="693,58,875,103"/>
<area shape="poly" title=" " alt="" coords="416,16,469,8,527,3,587,4,646,12,692,28,734,48,732,53,690,33,645,18,586,9,527,9,469,14,417,22"/>
<area shape="poly" title=" " alt="" coords="646,59,678,64,677,69,645,64"/>
<area shape="poly" title=" " alt="" coords="412,84,451,74,453,79,414,89"/>
<area shape="poly" title=" " alt="" coords="416,101,678,84,678,90,416,107"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a050fc5495745ccd2e8fe55855178ae67" title=" " alt="" coords="464,147,645,192"/>
<area shape="poly" title=" " alt="" coords="414,130,453,140,451,145,412,135"/>
<area shape="poly" title=" " alt="" coords="613,144,710,106,712,111,615,149"/>
</map>
</div>

</div>
</div>
<a id="a7da698485cf9e9c1557281858c0b16fe" name="a7da698485cf9e9c1557281858c0b16fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da698485cf9e9c1557281858c0b16fe">&#9670;&#160;</a></span>TEST_F() <span class="overload">[23/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Override</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00509">509</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  509</span>                             {</div>
<div class="line"><span class="lineno">  510</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  511</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  512</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  513</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  514</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  515</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  516</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10000; i++) {</div>
<div class="line"><span class="lineno">  517</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  518</span>  }</div>
<div class="line"><span class="lineno">  519</span>  <span class="comment">// override all the keys</span></div>
<div class="line"><span class="lineno">  520</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10000; i++) {</div>
<div class="line"><span class="lineno">  521</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  522</span>  }</div>
<div class="line"><span class="lineno">  523</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  524</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a38da761c7e4dcb831d9b2b2672a399e5" name="a38da761c7e4dcb831d9b2b2672a399e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38da761c7e4dcb831d9b2b2672a399e5">&#9670;&#160;</a></span>TEST_F() <span class="overload">[24/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Put</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00319">319</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  319</span>                        {</div>
<div class="line"><span class="lineno">  320</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  321</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  322</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  323</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  324</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  325</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  326</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  327</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  328</span>  }</div>
<div class="line"><span class="lineno">  329</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  330</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7b23f7d4cf715b8e7e7fc92f07b9a89" name="aa7b23f7d4cf715b8e7e7fc92f07b9a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7b23f7d4cf715b8e7e7fc92f07b9a89">&#9670;&#160;</a></span>TEST_F() <span class="overload">[25/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PutIOError</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00443">443</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  443</span>                               {</div>
<div class="line"><span class="lineno">  444</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  445</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = fault_injection_env_.get();</div>
<div class="line"><span class="lineno">  446</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  447</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;  <span class="comment">// Make sure value write to blob file</span></div>
<div class="line"><span class="lineno">  448</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  449</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  450</span>  fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">false</span>, <a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb">Status::IOError</a>());</div>
<div class="line"><span class="lineno">  451</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>).IsIOError());</div>
<div class="line"><span class="lineno">  452</span>  fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">true</span>, <a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb">Status::IOError</a>());</div>
<div class="line"><span class="lineno">  453</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;bar&quot;</span>, <span class="stringliteral">&quot;v1&quot;</span>));</div>
<div class="line"><span class="lineno">  454</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa7b23f7d4cf715b8e7e7fc92f07b9a89_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa7b23f7d4cf715b8e7e7fc92f07b9a89_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa7b23f7d4cf715b8e7e7fc92f07b9a89_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa7b23f7d4cf715b8e7e7fc92f07b9a89_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,187,50"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="187,25,219,25,219,30,187,30"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="464,5,645,50"/>
<area shape="poly" title=" " alt="" coords="416,25,449,25,449,30,416,30"/>
</map>
</div>

</div>
</div>
<a id="a6f5410a187064e2b4c8a32ef2cbf4fed" name="a6f5410a187064e2b4c8a32ef2cbf4fed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f5410a187064e2b4c8a32ef2cbf4fed">&#9670;&#160;</a></span>TEST_F() <span class="overload">[26/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PutUntil</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00358">358</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  358</span>                             {</div>
<div class="line"><span class="lineno">  359</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  360</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  361</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno">  362</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  363</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 1000;</div>
<div class="line"><span class="lineno">  364</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  365</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">blob_file_size</a> = 256 * 1000 * 1000;</div>
<div class="line"><span class="lineno">  366</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  367</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  368</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  369</span>  mock_clock_-&gt;SetCurrentTime(50);</div>
<div class="line"><span class="lineno">  370</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  371</span>    uint64_t expiration = rnd.Next() % 100 + 50;</div>
<div class="line"><span class="lineno">  372</span>    PutRandomUntil(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), expiration, &amp;rnd,</div>
<div class="line"><span class="lineno">  373</span>                   (expiration &lt;= 100 ? <span class="keyword">nullptr</span> : &amp;data));</div>
<div class="line"><span class="lineno">  374</span>  }</div>
<div class="line"><span class="lineno">  375</span>  mock_clock_-&gt;SetCurrentTime(100);</div>
<div class="line"><span class="lineno">  376</span>  <span class="keyword">auto</span> *bdb_impl = <span class="keyword">static_cast&lt;</span>BlobDBImpl *<span class="keyword">&gt;</span>(blob_db_);</div>
<div class="line"><span class="lineno">  377</span>  <span class="keyword">auto</span> blob_files = bdb_impl-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno">  378</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno">  379</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_files[0]-&gt;HasTTL());</div>
<div class="line"><span class="lineno">  380</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(bdb_impl-&gt;TEST_CloseBlobFile(blob_files[0]));</div>
<div class="line"><span class="lineno">  381</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  382</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6f5410a187064e2b4c8a32ef2cbf4fed_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6f5410a187064e2b4c8a32ef2cbf4fed_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6f5410a187064e2b4c8a32ef2cbf4fed_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6f5410a187064e2b4c8a32ef2cbf4fed_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,187,101"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="186,56,219,48,220,54,187,61"/>
<area shape="rect" href="../../db/dfb/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBImpl.html#ae37cc4e0f7f1c0d5f0ba43c673729dec" title=" " alt="" coords="235,98,416,160"/>
<area shape="poly" title=" " alt="" coords="187,96,220,103,219,108,186,101"/>
<area shape="poly" title=" " alt="" coords="280,98,281,88,290,79,304,73,325,72,349,74,364,81,362,86,348,79,325,77,306,79,293,83,286,90,285,98"/>
</map>
</div>

</div>
</div>
<a id="a93023c149cf18e34ed48bcffc8df6246" name="a93023c149cf18e34ed48bcffc8df6246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93023c149cf18e34ed48bcffc8df6246">&#9670;&#160;</a></span>TEST_F() <span class="overload">[27/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PutWithTTL</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00332">332</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  332</span>                               {</div>
<div class="line"><span class="lineno">  333</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  334</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  335</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno">  336</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  337</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 1000;</div>
<div class="line"><span class="lineno">  338</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  339</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#ab3f8ef9276f31a1872268ac743f7a88a">blob_file_size</a> = 256 * 1000 * 1000;</div>
<div class="line"><span class="lineno">  340</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  341</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  342</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  343</span>  mock_clock_-&gt;SetCurrentTime(50);</div>
<div class="line"><span class="lineno">  344</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  345</span>    uint64_t ttl = rnd.Next() % 100;</div>
<div class="line"><span class="lineno">  346</span>    PutRandomWithTTL(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), ttl, &amp;rnd,</div>
<div class="line"><span class="lineno">  347</span>                     (ttl &lt;= 50 ? <span class="keyword">nullptr</span> : &amp;data));</div>
<div class="line"><span class="lineno">  348</span>  }</div>
<div class="line"><span class="lineno">  349</span>  mock_clock_-&gt;SetCurrentTime(100);</div>
<div class="line"><span class="lineno">  350</span>  <span class="keyword">auto</span> *bdb_impl = <span class="keyword">static_cast&lt;</span>BlobDBImpl *<span class="keyword">&gt;</span>(blob_db_);</div>
<div class="line"><span class="lineno">  351</span>  <span class="keyword">auto</span> blob_files = bdb_impl-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno">  352</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno">  353</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(blob_files[0]-&gt;HasTTL());</div>
<div class="line"><span class="lineno">  354</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(bdb_impl-&gt;TEST_CloseBlobFile(blob_files[0]));</div>
<div class="line"><span class="lineno">  355</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  356</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a93023c149cf18e34ed48bcffc8df6246_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a93023c149cf18e34ed48bcffc8df6246_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a93023c149cf18e34ed48bcffc8df6246_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a93023c149cf18e34ed48bcffc8df6246_cgraph">
<area shape="rect" title=" " alt="" coords="5,56,187,101"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="235,5,416,50"/>
<area shape="poly" title=" " alt="" coords="186,56,219,48,220,54,187,61"/>
<area shape="rect" href="../../db/dfb/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBImpl.html#ae37cc4e0f7f1c0d5f0ba43c673729dec" title=" " alt="" coords="235,98,416,160"/>
<area shape="poly" title=" " alt="" coords="187,96,220,103,219,108,186,101"/>
<area shape="poly" title=" " alt="" coords="280,98,281,88,290,79,304,73,325,72,349,74,364,81,362,86,348,79,325,77,306,79,293,83,286,90,285,98"/>
</map>
</div>

</div>
</div>
<a id="aad871de9663ad7b0939b7e8ed7348a16" name="aad871de9663ad7b0939b7e8ed7348a16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad871de9663ad7b0939b7e8ed7348a16">&#9670;&#160;</a></span>TEST_F() <span class="overload">[28/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ShutdownWait</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l02324">2324</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2324</span>                                 {</div>
<div class="line"><span class="lineno"> 2325</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno"> 2326</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a97eda21126ffcde76fec2b594eaeabb6">ttl_range_secs</a> = 100;</div>
<div class="line"><span class="lineno"> 2327</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 2328</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2329</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 2330</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = mock_env_.get();</div>
<div class="line"><span class="lineno"> 2331</span> </div>
<div class="line"><span class="lineno"> 2332</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;LoadDependency({</div>
<div class="line"><span class="lineno"> 2333</span>      {<span class="stringliteral">&quot;BlobDBImpl::EvictExpiredFiles:0&quot;</span>, <span class="stringliteral">&quot;BlobDBTest.ShutdownWait:0&quot;</span>},</div>
<div class="line"><span class="lineno"> 2334</span>      {<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:1&quot;</span>, <span class="stringliteral">&quot;BlobDBImpl::EvictExpiredFiles:1&quot;</span>},</div>
<div class="line"><span class="lineno"> 2335</span>      {<span class="stringliteral">&quot;BlobDBImpl::EvictExpiredFiles:2&quot;</span>, <span class="stringliteral">&quot;BlobDBTest.ShutdownWait:2&quot;</span>},</div>
<div class="line"><span class="lineno"> 2336</span>      {<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:3&quot;</span>, <span class="stringliteral">&quot;BlobDBImpl::EvictExpiredFiles:3&quot;</span>},</div>
<div class="line"><span class="lineno"> 2337</span>  });</div>
<div class="line"><span class="lineno"> 2338</span>  <span class="comment">// Force all tasks to be scheduled immediately.</span></div>
<div class="line"><span class="lineno"> 2339</span>  SyncPoint::GetInstance()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 2340</span>      <span class="stringliteral">&quot;TimeQueue::Add:item.end&quot;</span>, [&amp;](<span class="keywordtype">void</span> *arg) {</div>
<div class="line"><span class="lineno"> 2341</span>        std::chrono::steady_clock::time_point *tp =</div>
<div class="line"><span class="lineno"> 2342</span>            <span class="keyword">static_cast&lt;</span>std::chrono::steady_clock::time_point *<span class="keyword">&gt;</span>(arg);</div>
<div class="line"><span class="lineno"> 2343</span>        *tp =</div>
<div class="line"><span class="lineno"> 2344</span>            std::chrono::steady_clock::now() - std::chrono::milliseconds(10000);</div>
<div class="line"><span class="lineno"> 2345</span>      });</div>
<div class="line"><span class="lineno"> 2346</span> </div>
<div class="line"><span class="lineno"> 2347</span>  SyncPoint::GetInstance()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 2348</span>      <span class="stringliteral">&quot;BlobDBImpl::EvictExpiredFiles:cb&quot;</span>, [&amp;](<span class="keywordtype">void</span> * <span class="comment">/*arg*/</span>) {</div>
<div class="line"><span class="lineno"> 2349</span>        <span class="comment">// Sleep 3 ms to increase the chance of data race.</span></div>
<div class="line"><span class="lineno"> 2350</span>        <span class="comment">// We&#39;ve synced up the code so that EvictExpiredFiles()</span></div>
<div class="line"><span class="lineno"> 2351</span>        <span class="comment">// is called concurrently with ~BlobDBImpl().</span></div>
<div class="line"><span class="lineno"> 2352</span>        <span class="comment">// ~BlobDBImpl() is supposed to wait for all background</span></div>
<div class="line"><span class="lineno"> 2353</span>        <span class="comment">// task to shutdown before doing anything else. In order</span></div>
<div class="line"><span class="lineno"> 2354</span>        <span class="comment">// to use the same test to reproduce a bug of the waiting</span></div>
<div class="line"><span class="lineno"> 2355</span>        <span class="comment">// logic, we wait a little bit here, so that TSAN can</span></div>
<div class="line"><span class="lineno"> 2356</span>        <span class="comment">// catch the data race.</span></div>
<div class="line"><span class="lineno"> 2357</span>        <span class="comment">// We should improve the test if we find a better way.</span></div>
<div class="line"><span class="lineno"> 2358</span>        Env::Default()-&gt;SleepForMicroseconds(3000);</div>
<div class="line"><span class="lineno"> 2359</span>      });</div>
<div class="line"><span class="lineno"> 2360</span> </div>
<div class="line"><span class="lineno"> 2361</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 2362</span> </div>
<div class="line"><span class="lineno"> 2363</span>  Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 2364</span>  mock_clock_-&gt;SetCurrentTime(50);</div>
<div class="line"><span class="lineno"> 2365</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 2366</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(PutWithTTL(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>, 100, &amp;data));</div>
<div class="line"><span class="lineno"> 2367</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2368</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno"> 2369</span>  <span class="keyword">auto</span> blob_file = blob_files[0];</div>
<div class="line"><span class="lineno"> 2370</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(blob_file-&gt;Immutable());</div>
<div class="line"><span class="lineno"> 2371</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(blob_file-&gt;Obsolete());</div>
<div class="line"><span class="lineno"> 2372</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno"> 2373</span> </div>
<div class="line"><span class="lineno"> 2374</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:0&quot;</span>);</div>
<div class="line"><span class="lineno"> 2375</span>  mock_clock_-&gt;SetCurrentTime(250);</div>
<div class="line"><span class="lineno"> 2376</span>  <span class="comment">// The key should expired now.</span></div>
<div class="line"><span class="lineno"> 2377</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:1&quot;</span>);</div>
<div class="line"><span class="lineno"> 2378</span> </div>
<div class="line"><span class="lineno"> 2379</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:2&quot;</span>);</div>
<div class="line"><span class="lineno"> 2380</span>  <a class="code hl_define" href="../../d4/d8e/sync__point_8h.html#aea27634f18fba890fccd36a797846e54">TEST_SYNC_POINT</a>(<span class="stringliteral">&quot;BlobDBTest.ShutdownWait:3&quot;</span>);</div>
<div class="line"><span class="lineno"> 2381</span>  <a class="code hl_function" href="../../d0/d81/namespacetesting_1_1internal_1_1posix.html#a15e5b8f2a535ef1b2529b85b861e4846">Close</a>();</div>
<div class="line"><span class="lineno"> 2382</span> </div>
<div class="line"><span class="lineno"> 2383</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 2384</span>}</div>
<div class="ttc" id="anamespacetesting_1_1internal_1_1posix_html_a15e5b8f2a535ef1b2529b85b861e4846"><div class="ttname"><a href="../../d0/d81/namespacetesting_1_1internal_1_1posix.html#a15e5b8f2a535ef1b2529b85b861e4846">testing::internal::posix::Close</a></div><div class="ttdeci">int Close(int fd)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d73/gtest_8h_source.html#l03789">gtest.h:3789</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aad871de9663ad7b0939b7e8ed7348a16_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aad871de9663ad7b0939b7e8ed7348a16_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aad871de9663ad7b0939b7e8ed7348a16_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aad871de9663ad7b0939b7e8ed7348a16_cgraph">
<area shape="rect" title=" " alt="" coords="5,228,187,273"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a6ab2e37815691608582aa44201663888" title=" " alt="" coords="235,181,416,226"/>
<area shape="poly" title=" " alt="" coords="186,229,219,223,220,228,187,235"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,275,416,319"/>
<area shape="poly" title=" " alt="" coords="187,266,220,273,219,278,186,271"/>
<area shape="poly" title=" " alt="" coords="281,181,280,171,288,162,303,157,325,155,350,157,365,164,363,169,349,162,325,160,304,162,291,167,285,173,287,180"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a089771243616199589dc45bd5f2e4df5" title=" " alt="" coords="481,29,662,74"/>
<area shape="poly" title=" " alt="" coords="346,179,396,131,428,106,463,84,474,78,476,83,465,89,432,110,400,135,350,183"/>
<area shape="rect" href="../../db/dcf/classROCKSDB__NAMESPACE_1_1CompressionContextCache.html#ab007e9786d861c32a6fbaadc5e63a85d" title=" " alt="" coords="473,122,670,184"/>
<area shape="poly" title=" " alt="" coords="416,182,457,174,458,179,417,188"/>
<area shape="rect" href="../../d9/da5/classROCKSDB__NAMESPACE_1_1ThreadLocalPtr.html#aac20bcf88d8e13bb58f0de0839318f81" title=" " alt="" coords="464,232,679,277"/>
<area shape="poly" title=" " alt="" coords="417,220,449,226,448,232,416,225"/>
<area shape="poly" title=" " alt="" coords="525,29,523,19,531,10,548,5,572,3,598,5,614,12,612,17,597,10,572,8,549,10,534,15,528,21,530,28"/>
<area shape="poly" title=" " alt="" coords="523,122,525,112,534,103,549,97,572,96,597,98,613,105,611,110,596,103,572,101,550,103,536,108,529,114,529,122"/>
<area shape="rect" href="../../db/dcf/classROCKSDB__NAMESPACE_1_1CompressionContextCache.html#a184b5c0ec80b25aff64fb30064afc8e8" title=" " alt="" coords="727,122,925,184"/>
<area shape="poly" title=" " alt="" coords="671,150,712,150,712,156,671,156"/>
<area shape="poly" title=" " alt="" coords="777,122,778,112,787,103,803,97,826,96,852,98,868,105,866,110,851,103,826,101,804,103,790,108,783,114,782,122"/>
<area shape="rect" href="../../db/dcf/classROCKSDB__NAMESPACE_1_1CompressionContextCache.html#a21346dea75268f5369ea5a58cf0bdfe8" title=" " alt="" coords="973,122,1178,184"/>
<area shape="poly" title=" " alt="" coords="925,150,957,150,957,156,925,156"/>
<area shape="poly" title=" " alt="" coords="1026,122,1028,112,1037,103,1053,97,1075,96,1101,98,1117,105,1115,110,1100,103,1075,101,1054,103,1040,108,1032,114,1032,122"/>
<area shape="poly" title=" " alt="" coords="525,232,523,222,531,213,548,207,572,205,598,208,614,214,612,219,597,213,572,211,549,213,534,217,528,223,530,231"/>
<area shape="rect" href="../../d9/da5/classROCKSDB__NAMESPACE_1_1ThreadLocalPtr.html#aa445d07a2bf5c5bf9237edb11d5c7efb" title=" " alt="" coords="735,232,917,277"/>
<area shape="poly" title=" " alt="" coords="680,252,720,252,720,257,680,257"/>
<area shape="poly" title=" " alt="" coords="779,232,777,222,785,213,802,207,826,205,853,208,869,214,867,219,852,213,826,211,803,213,788,217,782,223,784,231"/>
<area shape="poly" title=" " alt="" coords="281,275,280,265,288,256,303,250,325,248,350,251,365,257,363,262,349,256,325,253,304,255,291,260,285,266,287,274"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="481,325,662,370"/>
<area shape="poly" title=" " alt="" coords="417,313,466,323,465,328,416,318"/>
<area shape="poly" title=" " alt="" coords="525,325,523,315,531,306,548,301,572,299,598,301,614,308,612,313,597,306,572,304,549,306,534,311,528,317,530,324"/>
</map>
</div>

</div>
</div>
<a id="a3b03621f81f787f10eb2e6cfa515d2d5" name="a3b03621f81f787f10eb2e6cfa515d2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b03621f81f787f10eb2e6cfa515d2d5">&#9670;&#160;</a></span>TEST_F() <span class="overload">[29/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SnapshotAndGarbageCollection</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00865">865</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  865</span>                                                 {</div>
<div class="line"><span class="lineno">  866</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  867</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  868</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a25b10df716c48687f2cf26a0c9695331">enable_garbage_collection</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  869</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#adc68ba0cb89e555cc0d5a4ddf9a441d9">garbage_collection_cutoff</a> = 1.0;</div>
<div class="line"><span class="lineno">  870</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  871</span> </div>
<div class="line"><span class="lineno">  872</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno">  873</span>  options.<a class="code hl_variable" href="../../dc/d97/structROCKSDB__NAMESPACE_1_1ColumnFamilyOptions.html#a9c88ac11c0157cad1d949db3cb0eb3d7">disable_auto_compactions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  874</span> </div>
<div class="line"><span class="lineno">  875</span>  <span class="comment">// i = when to take snapshot</span></div>
<div class="line"><span class="lineno">  876</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div>
<div class="line"><span class="lineno">  877</span>    Destroy();</div>
<div class="line"><span class="lineno">  878</span>    Open(bdb_options, options);</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../d0/ddd/classROCKSDB__NAMESPACE_1_1Snapshot.html">Snapshot</a> *snapshot = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno">  881</span> </div>
<div class="line"><span class="lineno">  882</span>    <span class="comment">// First file</span></div>
<div class="line"><span class="lineno">  883</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key1&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>));</div>
<div class="line"><span class="lineno">  884</span>    <span class="keywordflow">if</span> (i == 0) {</div>
<div class="line"><span class="lineno">  885</span>      snapshot = blob_db_-&gt;GetSnapshot();</div>
<div class="line"><span class="lineno">  886</span>    }</div>
<div class="line"><span class="lineno">  887</span> </div>
<div class="line"><span class="lineno">  888</span>    <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno">  889</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno">  890</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_files[0]));</div>
<div class="line"><span class="lineno">  891</span> </div>
<div class="line"><span class="lineno">  892</span>    <span class="comment">// Second file</span></div>
<div class="line"><span class="lineno">  893</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key2&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>));</div>
<div class="line"><span class="lineno">  894</span>    <span class="keywordflow">if</span> (i == 1) {</div>
<div class="line"><span class="lineno">  895</span>      snapshot = blob_db_-&gt;GetSnapshot();</div>
<div class="line"><span class="lineno">  896</span>    }</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>    blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno">  899</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_files.size());</div>
<div class="line"><span class="lineno">  900</span>    <span class="keyword">auto</span> bfile = blob_files[1];</div>
<div class="line"><span class="lineno">  901</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a8197fa52f3538588d20d8af4834c9003">ASSERT_FALSE</a>(bfile-&gt;Immutable());</div>
<div class="line"><span class="lineno">  902</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(bfile));</div>
<div class="line"><span class="lineno">  903</span> </div>
<div class="line"><span class="lineno">  904</span>    <span class="comment">// Third file</span></div>
<div class="line"><span class="lineno">  905</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;key3&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>));</div>
<div class="line"><span class="lineno">  906</span>    <span class="keywordflow">if</span> (i == 2) {</div>
<div class="line"><span class="lineno">  907</span>      snapshot = blob_db_-&gt;GetSnapshot();</div>
<div class="line"><span class="lineno">  908</span>    }</div>
<div class="line"><span class="lineno">  909</span> </div>
<div class="line"><span class="lineno">  910</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno">  911</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(bfile-&gt;Obsolete());</div>
<div class="line"><span class="lineno">  912</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(),</div>
<div class="line"><span class="lineno">  913</span>              bfile-&gt;GetObsoleteSequence());</div>
<div class="line"><span class="lineno">  914</span> </div>
<div class="line"><span class="lineno">  915</span>    Delete(<span class="stringliteral">&quot;key2&quot;</span>);</div>
<div class="line"><span class="lineno">  916</span>    <span class="keywordflow">if</span> (i == 3) {</div>
<div class="line"><span class="lineno">  917</span>      snapshot = blob_db_-&gt;GetSnapshot();</div>
<div class="line"><span class="lineno">  918</span>    }</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(4, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno">  921</span>    blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno">  922</span> </div>
<div class="line"><span class="lineno">  923</span>    <span class="keywordflow">if</span> (i &gt;= 2) {</div>
<div class="line"><span class="lineno">  924</span>      <span class="comment">// The snapshot shouldn&#39;t see data in bfile</span></div>
<div class="line"><span class="lineno">  925</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno">  926</span>      blob_db_-&gt;ReleaseSnapshot(snapshot);</div>
<div class="line"><span class="lineno">  927</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  928</span>      <span class="comment">// The snapshot will see data in bfile, so the file shouldn&#39;t be deleted</span></div>
<div class="line"><span class="lineno">  929</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(4, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno">  930</span>      blob_db_-&gt;ReleaseSnapshot(snapshot);</div>
<div class="line"><span class="lineno">  931</span>      blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno">  932</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, blob_db_impl()-&gt;TEST_GetBlobFiles().size());</div>
<div class="line"><span class="lineno">  933</span>    }</div>
<div class="line"><span class="lineno">  934</span>  }</div>
<div class="line"><span class="lineno">  935</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Snapshot_html"><div class="ttname"><a href="../../d0/ddd/classROCKSDB__NAMESPACE_1_1Snapshot.html">ROCKSDB_NAMESPACE::Snapshot</a></div><div class="ttdef"><b>Definition</b> <a href="../../d4/dc8/snapshot_8h_source.html#l00020">snapshot.h:20</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b51f5c733b8e5b02796205bd100024c" name="a6b51f5c733b8e5b02796205bd100024c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b51f5c733b8e5b02796205bd100024c">&#9670;&#160;</a></span>TEST_F() <span class="overload">[30/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/db9/classROCKSDB__NAMESPACE_1_1SstFileManager.html">SstFileManager</a></td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00759">759</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  759</span>                                   {</div>
<div class="line"><span class="lineno">  760</span>  <span class="comment">// run the same test for Get(), MultiGet() and Iterator each.</span></div>
<div class="line"><span class="lineno">  761</span>  std::shared_ptr&lt;SstFileManager&gt; sst_file_manager(</div>
<div class="line"><span class="lineno">  762</span>      <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac11a938e48779e4761111ef2576171ad">NewSstFileManager</a>(mock_env_.get()));</div>
<div class="line"><span class="lineno">  763</span>  sst_file_manager-&gt;SetDeleteRateBytesPerSecond(1024 * 1024);</div>
<div class="line"><span class="lineno">  764</span>  <a class="code hl_class" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html">SstFileManagerImpl</a> *sfm =</div>
<div class="line"><span class="lineno">  765</span>      <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html">SstFileManagerImpl</a> *<span class="keyword">&gt;</span>(sst_file_manager.get());</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  768</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  769</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a25b10df716c48687f2cf26a0c9695331">enable_garbage_collection</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  770</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#adc68ba0cb89e555cc0d5a4ddf9a441d9">garbage_collection_cutoff</a> = 1.0;</div>
<div class="line"><span class="lineno">  771</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> db_options;</div>
<div class="line"><span class="lineno">  772</span> </div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordtype">int</span> files_scheduled_to_delete = 0;</div>
<div class="line"><span class="lineno">  774</span>  ROCKSDB_NAMESPACE::SyncPoint::GetInstance()-&gt;<a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ac9d49ea2171e1dbc126e802829a9800b">SetCallBack</a>(</div>
<div class="line"><span class="lineno">  775</span>      <span class="stringliteral">&quot;SstFileManagerImpl::ScheduleFileDeletion&quot;</span>, [&amp;](<span class="keywordtype">void</span> *arg) {</div>
<div class="line"><span class="lineno">  776</span>        assert(arg);</div>
<div class="line"><span class="lineno">  777</span>        <span class="keyword">const</span> std::string *<span class="keyword">const</span> file_path =</div>
<div class="line"><span class="lineno">  778</span>            <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>std::string *<span class="keyword">&gt;</span>(arg);</div>
<div class="line"><span class="lineno">  779</span>        <span class="keywordflow">if</span> (file_path-&gt;find(<span class="stringliteral">&quot;.blob&quot;</span>) != std::string::npos) {</div>
<div class="line"><span class="lineno">  780</span>          ++files_scheduled_to_delete;</div>
<div class="line"><span class="lineno">  781</span>        }</div>
<div class="line"><span class="lineno">  782</span>      });</div>
<div class="line"><span class="lineno">  783</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno">  784</span>  db_options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#ac2f777b696277d0282e5c3a3e5652dd0">sst_file_manager</a> = sst_file_manager;</div>
<div class="line"><span class="lineno">  785</span> </div>
<div class="line"><span class="lineno">  786</span>  Open(bdb_options, db_options);</div>
<div class="line"><span class="lineno">  787</span> </div>
<div class="line"><span class="lineno">  788</span>  <span class="comment">// Create one obselete file and clean it.</span></div>
<div class="line"><span class="lineno">  789</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Put(WriteOptions(), <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno">  790</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno">  791</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, blob_files.size());</div>
<div class="line"><span class="lineno">  792</span>  std::shared_ptr&lt;BlobFile&gt; bfile = blob_files[0];</div>
<div class="line"><span class="lineno">  793</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(bfile));</div>
<div class="line"><span class="lineno">  794</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno">  795</span>  blob_db_impl()-&gt;TEST_DeleteObsoleteFiles();</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>  <span class="comment">// Even if SSTFileManager is not set, DB is creating a dummy one.</span></div>
<div class="line"><span class="lineno">  798</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(1, files_scheduled_to_delete);</div>
<div class="line"><span class="lineno">  799</span>  Destroy();</div>
<div class="line"><span class="lineno">  800</span>  <span class="comment">// Make sure that DestroyBlobDB() also goes through delete scheduler.</span></div>
<div class="line"><span class="lineno">  801</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(2, files_scheduled_to_delete);</div>
<div class="line"><span class="lineno">  802</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno">  803</span>  sfm-&gt;<a class="code hl_function" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ad60a19f7f2c5aa0789016d05dda1df52">WaitForEmptyTrash</a>();</div>
<div class="line"><span class="lineno">  804</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1SstFileManagerImpl_html"><div class="ttname"><a href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html">ROCKSDB_NAMESPACE::SstFileManagerImpl</a></div><div class="ttdef"><b>Definition</b> <a href="../../dc/d3e/sst__file__manager__impl_8h_source.html#l00024">sst_file_manager_impl.h:24</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1SstFileManagerImpl_html_ad60a19f7f2c5aa0789016d05dda1df52"><div class="ttname"><a href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ad60a19f7f2c5aa0789016d05dda1df52">ROCKSDB_NAMESPACE::SstFileManagerImpl::WaitForEmptyTrash</a></div><div class="ttdeci">virtual void WaitForEmptyTrash()</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/sst__file__manager__impl_8cc_source.html#l00445">sst_file_manager_impl.cc:445</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1SyncPoint_html_ac9d49ea2171e1dbc126e802829a9800b"><div class="ttname"><a href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ac9d49ea2171e1dbc126e802829a9800b">ROCKSDB_NAMESPACE::SyncPoint::SetCallBack</a></div><div class="ttdeci">void SetCallBack(const std::string &amp;point, const std::function&lt; void(void *)&gt; &amp;callback)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d23/sync__point_8cc_source.html#l00036">sync_point.cc:36</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_ac11a938e48779e4761111ef2576171ad"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac11a938e48779e4761111ef2576171ad">ROCKSDB_NAMESPACE::NewSstFileManager</a></div><div class="ttdeci">SstFileManager * NewSstFileManager(Env *env, std::shared_ptr&lt; Logger &gt; info_log, std::string trash_dir, int64_t rate_bytes_per_sec, bool delete_existing_trash, Status *status, double max_trash_db_ratio, uint64_t bytes_max_delete_chunk)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/sst__file__manager__impl_8cc_source.html#l00481">sst_file_manager_impl.cc:481</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1DBOptions_html_ac2f777b696277d0282e5c3a3e5652dd0"><div class="ttname"><a href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#ac2f777b696277d0282e5c3a3e5652dd0">ROCKSDB_NAMESPACE::DBOptions::sst_file_manager</a></div><div class="ttdeci">std::shared_ptr&lt; SstFileManager &gt; sst_file_manager</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/options_8h_source.html#l00692">options.h:692</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6b51f5c733b8e5b02796205bd100024c_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6b51f5c733b8e5b02796205bd100024c_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6b51f5c733b8e5b02796205bd100024c_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a6b51f5c733b8e5b02796205bd100024c_cgraph">
<area shape="rect" title=" " alt="" coords="5,169,187,214"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="121,167,171,126,233,84,244,79,246,83,236,89,174,130,124,171"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac11a938e48779e4761111ef2576171ad" title=" " alt="" coords="235,123,416,167"/>
<area shape="poly" title=" " alt="" coords="186,171,219,164,220,169,187,176"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ac9d49ea2171e1dbc126e802829a9800b" title=" " alt="" coords="235,216,416,261"/>
<area shape="poly" title=" " alt="" coords="187,207,220,214,219,219,186,213"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ad60a19f7f2c5aa0789016d05dda1df52" title=" " alt="" coords="235,309,416,370"/>
<area shape="poly" title=" " alt="" coords="134,212,265,298,262,302,131,217"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,29,645,74"/>
<area shape="poly" title=" " alt="" coords="416,49,449,49,449,54,416,54"/>
<area shape="poly" title=" " alt="" coords="511,29,510,19,517,10,532,5,555,3,580,5,594,12,592,17,578,10,555,8,533,10,520,15,515,21,516,28"/>
<area shape="poly" title=" " alt="" coords="281,123,280,113,288,104,303,98,325,96,350,99,365,105,363,110,349,104,325,101,304,103,291,108,285,114,287,122"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a1be4ed1309b173fc7b7cad85e5ed1086" title=" " alt="" coords="464,123,645,167"/>
<area shape="poly" title=" " alt="" coords="416,142,449,142,449,148,416,148"/>
<area shape="poly" title=" " alt="" coords="511,123,510,113,517,104,532,98,555,96,580,99,594,105,592,110,578,104,555,101,533,103,520,108,515,114,516,122"/>
<area shape="poly" title=" " alt="" coords="281,216,280,206,288,197,303,191,325,189,350,192,365,198,363,203,349,197,325,195,304,197,291,201,285,207,287,215"/>
<area shape="poly" title=" " alt="" coords="280,308,281,298,290,290,304,284,325,282,349,285,364,292,362,297,348,290,325,287,306,289,293,294,286,301,285,309"/>
</map>
</div>

</div>
</div>
<a id="a5c5943cdcf2d065bbbce097aa7db9224" name="a5c5943cdcf2d065bbbce097aa7db9224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5943cdcf2d065bbbce097aa7db9224">&#9670;&#160;</a></span>TEST_F() <span class="overload">[31/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SstFileManagerRestart</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00806">806</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  806</span>                                          {</div>
<div class="line"><span class="lineno">  807</span>  <span class="keywordtype">int</span> files_scheduled_to_delete = 0;</div>
<div class="line"><span class="lineno">  808</span>  ROCKSDB_NAMESPACE::SyncPoint::GetInstance()-&gt;<a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ac9d49ea2171e1dbc126e802829a9800b">SetCallBack</a>(</div>
<div class="line"><span class="lineno">  809</span>      <span class="stringliteral">&quot;SstFileManagerImpl::ScheduleFileDeletion&quot;</span>, [&amp;](<span class="keywordtype">void</span> *arg) {</div>
<div class="line"><span class="lineno">  810</span>        assert(arg);</div>
<div class="line"><span class="lineno">  811</span>        <span class="keyword">const</span> std::string *<span class="keyword">const</span> file_path =</div>
<div class="line"><span class="lineno">  812</span>            <span class="keyword">static_cast&lt;</span><span class="keyword">const </span>std::string *<span class="keyword">&gt;</span>(arg);</div>
<div class="line"><span class="lineno">  813</span>        <span class="keywordflow">if</span> (file_path-&gt;find(<span class="stringliteral">&quot;.blob&quot;</span>) != std::string::npos) {</div>
<div class="line"><span class="lineno">  814</span>          ++files_scheduled_to_delete;</div>
<div class="line"><span class="lineno">  815</span>        }</div>
<div class="line"><span class="lineno">  816</span>      });</div>
<div class="line"><span class="lineno">  817</span> </div>
<div class="line"><span class="lineno">  818</span>  <span class="comment">// run the same test for Get(), MultiGet() and Iterator each.</span></div>
<div class="line"><span class="lineno">  819</span>  std::shared_ptr&lt;SstFileManager&gt; sst_file_manager(</div>
<div class="line"><span class="lineno">  820</span>      NewSstFileManager(mock_env_.get()));</div>
<div class="line"><span class="lineno">  821</span>  sst_file_manager-&gt;SetDeleteRateBytesPerSecond(1024 * 1024);</div>
<div class="line"><span class="lineno">  822</span>  SstFileManagerImpl *sfm =</div>
<div class="line"><span class="lineno">  823</span>      <span class="keyword">static_cast&lt;</span>SstFileManagerImpl *<span class="keyword">&gt;</span>(sst_file_manager.get());</div>
<div class="line"><span class="lineno">  824</span> </div>
<div class="line"><span class="lineno">  825</span>  BlobDBOptions bdb_options;</div>
<div class="line"><span class="lineno">  826</span>  bdb_options.min_blob_size = 0;</div>
<div class="line"><span class="lineno">  827</span>  Options db_options;</div>
<div class="line"><span class="lineno">  828</span> </div>
<div class="line"><span class="lineno">  829</span>  SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno">  830</span>  db_options.sst_file_manager = sst_file_manager;</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>  Open(bdb_options, db_options);</div>
<div class="line"><span class="lineno">  833</span>  std::string blob_dir = blob_db_impl()-&gt;TEST_blob_dir();</div>
<div class="line"><span class="lineno">  834</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Put(WriteOptions(), <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno">  835</span>  Close();</div>
<div class="line"><span class="lineno">  836</span> </div>
<div class="line"><span class="lineno">  837</span>  <span class="comment">// Create 3 dummy trash files under the blob_dir</span></div>
<div class="line"><span class="lineno">  838</span>  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;fs = db_options.env-&gt;GetFileSystem();</div>
<div class="line"><span class="lineno">  839</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(CreateFile(fs, blob_dir + <span class="stringliteral">&quot;/000666.blob.trash&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  840</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(CreateFile(fs, blob_dir + <span class="stringliteral">&quot;/000888.blob.trash&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">true</span>));</div>
<div class="line"><span class="lineno">  841</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(CreateFile(fs, blob_dir + <span class="stringliteral">&quot;/something_not_match.trash&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">false</span>));</div>
<div class="line"><span class="lineno">  842</span> </div>
<div class="line"><span class="lineno">  843</span>  <span class="comment">// Make sure that reopening the DB rescan the existing trash files</span></div>
<div class="line"><span class="lineno">  844</span>  Open(bdb_options, db_options);</div>
<div class="line"><span class="lineno">  845</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(files_scheduled_to_delete, 2);</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>  sfm-&gt;WaitForEmptyTrash();</div>
<div class="line"><span class="lineno">  848</span> </div>
<div class="line"><span class="lineno">  849</span>  <span class="comment">// There should be exact one file under the blob dir now.</span></div>
<div class="line"><span class="lineno">  850</span>  std::vector&lt;std::string&gt; all_files;</div>
<div class="line"><span class="lineno">  851</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(db_options.env-&gt;GetChildren(blob_dir, &amp;all_files));</div>
<div class="line"><span class="lineno">  852</span>  <span class="keywordtype">int</span> nfiles = 0;</div>
<div class="line"><span class="lineno">  853</span>  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;f : all_files) {</div>
<div class="line"><span class="lineno">  854</span>    assert(!f.empty());</div>
<div class="line"><span class="lineno">  855</span>    <span class="keywordflow">if</span> (f[0] == <span class="charliteral">&#39;.&#39;</span>) {</div>
<div class="line"><span class="lineno">  856</span>      <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  857</span>    }</div>
<div class="line"><span class="lineno">  858</span>    nfiles++;</div>
<div class="line"><span class="lineno">  859</span>  }</div>
<div class="line"><span class="lineno">  860</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(nfiles, 1);</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>  SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno">  863</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a5c5943cdcf2d065bbbce097aa7db9224_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a5c5943cdcf2d065bbbce097aa7db9224_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a5c5943cdcf2d065bbbce097aa7db9224_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a5c5943cdcf2d065bbbce097aa7db9224_cgraph">
<area shape="rect" title=" " alt="" coords="5,293,187,338"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a380d917e0efeb23a1320ceb9b57f58ff" title=" " alt="" coords="235,65,416,110"/>
<area shape="poly" title=" " alt="" coords="108,291,158,217,193,174,233,135,260,116,263,120,236,139,197,178,162,221,113,294"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ad821c7a23e52c37cab15fbaa14d31388" title=" " alt="" coords="235,149,416,194"/>
<area shape="poly" title=" " alt="" coords="122,291,173,252,233,211,255,199,258,203,236,215,176,256,126,295"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a1be4ed1309b173fc7b7cad85e5ed1086" title=" " alt="" coords="482,268,663,313"/>
<area shape="poly" title=" " alt="" coords="137,290,183,270,234,254,294,247,355,247,415,253,469,262,468,267,414,258,355,252,295,252,235,260,185,275,140,295"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,387,416,431"/>
<area shape="poly" title=" " alt="" coords="154,336,255,378,253,383,152,341"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#ac11a938e48779e4761111ef2576171ad" title=" " alt="" coords="235,293,416,338"/>
<area shape="poly" title=" " alt="" coords="187,313,219,313,219,318,187,318"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ac9d49ea2171e1dbc126e802829a9800b" title=" " alt="" coords="235,480,416,525"/>
<area shape="poly" title=" " alt="" coords="121,337,173,387,236,442,275,469,272,473,233,446,169,390,118,341"/>
<area shape="rect" href="../../d1/d0d/classROCKSDB__NAMESPACE_1_1SstFileManagerImpl.html#ad60a19f7f2c5aa0789016d05dda1df52" title=" " alt="" coords="235,573,416,634"/>
<area shape="poly" title=" " alt="" coords="110,337,159,428,195,483,237,535,265,561,262,565,233,539,191,487,155,431,106,340"/>
<area shape="poly" title=" " alt="" coords="281,65,280,55,288,46,303,41,325,39,350,41,365,48,363,53,349,46,325,44,304,46,291,51,285,57,287,64"/>
<area shape="rect" href="../../d3/d26/classROCKSDB__NAMESPACE_1_1FileSystem.html#a45c1624e35e2fe23fb70b0c67394a38d" title=" " alt="" coords="469,5,675,50"/>
<area shape="poly" title=" " alt="" coords="416,63,462,52,463,57,417,68"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a44cf4d9e0f59181d4838378a46b41c73" title=" " alt="" coords="728,65,910,110"/>
<area shape="poly" title=" " alt="" coords="416,85,713,85,713,90,416,90"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="958,36,1139,81"/>
<area shape="poly" title=" " alt="" coords="910,73,942,69,943,75,910,79"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="1187,67,1368,111"/>
<area shape="poly" title=" " alt="" coords="910,89,958,90,1139,90,1171,90,1171,95,1139,96,958,96,910,94"/>
<area shape="poly" title=" " alt="" coords="1140,68,1172,72,1171,77,1139,73"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#ac4e2dc68586206c59fa39a1143fecaeb" title=" " alt="" coords="464,149,680,194"/>
<area shape="poly" title=" " alt="" coords="417,178,448,178,448,183,417,183"/>
<area shape="poly" title=" " alt="" coords="639,146,736,113,737,118,641,151"/>
<area shape="poly" title=" " alt="" coords="463,165,432,165,432,160,463,160"/>
<area shape="poly" title=" " alt="" coords="525,149,524,139,532,130,548,125,572,123,599,125,615,132,613,137,598,130,572,128,549,130,535,135,529,141,530,148"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#af57b0deed23176c890dc764d7f8e5142" title=" " alt="" coords="728,135,910,179"/>
<area shape="poly" title=" " alt="" coords="681,163,712,161,713,166,681,168"/>
<area shape="rect" href="../../df/d9b/classROCKSDB__NAMESPACE_1_1Env.html#a860678565518d1be1e4a879dd197b7d8" title=" " alt="" coords="728,204,910,249"/>
<area shape="poly" title=" " alt="" coords="677,192,714,200,712,206,675,197"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a68c941da5f3083ca54122b381139b65b" title=" " alt="" coords="728,273,910,318"/>
<area shape="poly" title=" " alt="" coords="616,192,682,229,730,259,742,264,740,269,727,263,679,234,613,197"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="958,273,1139,318"/>
<area shape="poly" title=" " alt="" coords="910,293,942,293,942,298,910,298"/>
<area shape="poly" title=" " alt="" coords="525,268,524,258,532,249,548,243,572,241,599,244,615,250,613,255,598,249,572,247,549,249,535,253,529,259,530,267"/>
<area shape="poly" title=" " alt="" coords="281,387,280,377,288,368,303,362,325,360,350,363,365,369,363,374,349,368,325,365,304,367,291,372,285,378,287,386"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="482,387,663,431"/>
<area shape="poly" title=" " alt="" coords="417,406,466,406,466,412,417,412"/>
<area shape="poly" title=" " alt="" coords="525,387,524,377,532,368,548,362,572,360,599,363,615,369,613,374,598,368,572,365,549,367,535,372,529,378,530,386"/>
<area shape="poly" title=" " alt="" coords="416,304,466,299,466,304,417,309"/>
<area shape="poly" title=" " alt="" coords="281,293,280,283,288,274,303,269,325,267,350,269,365,276,363,281,349,274,325,272,304,274,291,279,285,285,287,292"/>
<area shape="poly" title=" " alt="" coords="281,480,280,470,288,461,303,455,325,453,350,456,365,462,363,467,349,461,325,459,304,461,291,465,285,471,287,479"/>
<area shape="poly" title=" " alt="" coords="280,572,281,562,290,554,304,548,325,546,349,549,364,556,362,561,348,554,325,551,306,553,293,558,286,565,285,573"/>
</map>
</div>

</div>
</div>
<a id="a0f7628ccf00a02145428a73870abe6fa" name="a0f7628ccf00a02145428a73870abe6fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f7628ccf00a02145428a73870abe6fa">&#9670;&#160;</a></span>TEST_F() <span class="overload">[32/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">StackableDBGet</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00384">384</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  384</span>                                   {</div>
<div class="line"><span class="lineno">  385</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  386</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  387</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  388</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  389</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  390</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  391</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  392</span>    PutRandom(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(i), &amp;rnd, &amp;data);</div>
<div class="line"><span class="lineno">  393</span>  }</div>
<div class="line"><span class="lineno">  394</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_class" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html">StackableDB</a> *db = blob_db_;</div>
<div class="line"><span class="lineno">  396</span>    <a class="code hl_class" href="../../da/d3d/classROCKSDB__NAMESPACE_1_1ColumnFamilyHandle.html">ColumnFamilyHandle</a> *column_family = db-&gt;<a class="code hl_function" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#aea67ec073a672333cad2d4df0c229cf0">DefaultColumnFamily</a>();</div>
<div class="line"><span class="lineno">  397</span>    std::string key = <span class="stringliteral">&quot;key&quot;</span> + std::to_string(i);</div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_class" href="../../d9/dd6/classROCKSDB__NAMESPACE_1_1PinnableSlice.html">PinnableSlice</a> pinnable_value;</div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(db-&gt;<a class="code hl_function" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#a9731601634d54ceb97359912d494d028">Get</a>(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), column_family, key, &amp;pinnable_value));</div>
<div class="line"><span class="lineno">  400</span>    std::string string_value;</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(db-&gt;<a class="code hl_function" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#a9731601634d54ceb97359912d494d028">Get</a>(<a class="code hl_struct" href="../../db/dea/structROCKSDB__NAMESPACE_1_1ReadOptions.html">ReadOptions</a>(), column_family, key, &amp;string_value));</div>
<div class="line"><span class="lineno">  402</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(string_value, pinnable_value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>());</div>
<div class="line"><span class="lineno">  403</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(string_value, data[key]);</div>
<div class="line"><span class="lineno">  404</span>  }</div>
<div class="line"><span class="lineno">  405</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1StackableDB_html"><div class="ttname"><a href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html">ROCKSDB_NAMESPACE::StackableDB</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/d2d/stackable__db_8h_source.html#l00021">stackable_db.h:21</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1StackableDB_html_a9731601634d54ceb97359912d494d028"><div class="ttname"><a href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#a9731601634d54ceb97359912d494d028">ROCKSDB_NAMESPACE::StackableDB::Get</a></div><div class="ttdeci">Status Get(const ReadOptions &amp;options, ColumnFamilyHandle *column_family, const Slice &amp;key, PinnableSlice *value, std::string *timestamp) override</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d2d/stackable__db_8h_source.html#l00099">stackable_db.h:99</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1StackableDB_html_aea67ec073a672333cad2d4df0c229cf0"><div class="ttname"><a href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#aea67ec073a672333cad2d4df0c229cf0">ROCKSDB_NAMESPACE::StackableDB::DefaultColumnFamily</a></div><div class="ttdeci">ColumnFamilyHandle * DefaultColumnFamily() const override</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d2d/stackable__db_8h_source.html#l00578">stackable_db.h:578</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0f7628ccf00a02145428a73870abe6fa_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0f7628ccf00a02145428a73870abe6fa_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0f7628ccf00a02145428a73870abe6fa_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a0f7628ccf00a02145428a73870abe6fa_cgraph">
<area shape="rect" title=" " alt="" coords="5,91,187,136"/>
<area shape="rect" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#aea67ec073a672333cad2d4df0c229cf0" title=" " alt="" coords="235,5,445,67"/>
<area shape="poly" title=" " alt="" coords="168,88,225,70,227,75,170,93"/>
<area shape="rect" href="../../dc/d62/classROCKSDB__NAMESPACE_1_1StackableDB.html#a9731601634d54ceb97359912d494d028" title=" " alt="" coords="249,91,430,136"/>
<area shape="poly" title=" " alt="" coords="187,111,233,111,233,116,187,116"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733" title=" " alt="" coords="249,184,430,229"/>
<area shape="poly" title=" " alt="" coords="157,134,266,176,264,181,155,139"/>
<area shape="poly" title=" " alt="" coords="293,184,292,174,300,165,316,160,340,158,366,160,382,167,380,172,365,166,340,163,317,165,303,170,297,176,299,184"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#af026b3da84709ab0bfb50788de9e04b7" title=" " alt="" coords="493,184,674,229"/>
<area shape="poly" title=" " alt="" coords="431,204,477,204,477,210,431,210"/>
<area shape="poly" title=" " alt="" coords="537,184,536,174,544,165,560,160,584,158,610,160,626,167,624,172,609,166,584,163,561,165,547,170,541,176,542,184"/>
</map>
</div>

</div>
</div>
<a id="a933a7a4b0c91bb64ff2970be5f3e2f00" name="a933a7a4b0c91bb64ff2970be5f3e2f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a933a7a4b0c91bb64ff2970be5f3e2f00">&#9670;&#160;</a></span>TEST_F() <span class="overload">[33/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SyncBlobFileBeforeClose</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l02386">2386</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2386</span>                                            {</div>
<div class="line"><span class="lineno"> 2387</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 2388</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a> = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 2389</span> </div>
<div class="line"><span class="lineno"> 2390</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> blob_options;</div>
<div class="line"><span class="lineno"> 2391</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 2392</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#acdc8ff0b9882a819083ebd94c96c5a61">bytes_per_sync</a> = 1 &lt;&lt; 20;</div>
<div class="line"><span class="lineno"> 2393</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2394</span> </div>
<div class="line"><span class="lineno"> 2395</span>  Open(blob_options, options);</div>
<div class="line"><span class="lineno"> 2396</span> </div>
<div class="line"><span class="lineno"> 2397</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno"> 2398</span> </div>
<div class="line"><span class="lineno"> 2399</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2400</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files.size(), 1);</div>
<div class="line"><span class="lineno"> 2401</span> </div>
<div class="line"><span class="lineno"> 2402</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_impl()-&gt;TEST_CloseBlobFile(blob_files[0]));</div>
<div class="line"><span class="lineno"> 2403</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a81c15e9e94de36077aa52dfec56e89e1">statistics</a>-&gt;getTickerCount(<a class="code hl_enumvalue" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a7bafe0d32ab8c419cedaa2411f40a962">BLOB_DB_BLOB_FILE_SYNCED</a>), 1);</div>
<div class="line"><span class="lineno"> 2404</span>}</div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a153247a8e045efa11bbb3134499dfc47a7bafe0d32ab8c419cedaa2411f40a962"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a153247a8e045efa11bbb3134499dfc47a7bafe0d32ab8c419cedaa2411f40a962">ROCKSDB_NAMESPACE::BLOB_DB_BLOB_FILE_SYNCED</a></div><div class="ttdeci">@ BLOB_DB_BLOB_FILE_SYNCED</div><div class="ttdef"><b>Definition</b> <a href="../../d7/dc5/statistics_8h_source.html#l00346">statistics.h:346</a></div></div>
<div class="ttc" id="astructROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions_html_acdc8ff0b9882a819083ebd94c96c5a61"><div class="ttname"><a href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#acdc8ff0b9882a819083ebd94c96c5a61">ROCKSDB_NAMESPACE::blob_db::BlobDBOptions::bytes_per_sync</a></div><div class="ttdeci">uint64_t bytes_per_sync</div><div class="ttdef"><b>Definition</b> <a href="../../d4/df3/blob__db_8h_source.html#l00064">blob_db.h:64</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a933a7a4b0c91bb64ff2970be5f3e2f00_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a933a7a4b0c91bb64ff2970be5f3e2f00_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a933a7a4b0c91bb64ff2970be5f3e2f00_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a933a7a4b0c91bb64ff2970be5f3e2f00_cgraph">
<area shape="rect" title=" " alt="" coords="5,29,187,74"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="187,49,219,49,219,54,187,54"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
</map>
</div>

</div>
</div>
<a id="aa8c72d94a9bd1255e493fa4656d9d25b" name="aa8c72d94a9bd1255e493fa4656d9d25b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8c72d94a9bd1255e493fa4656d9d25b">&#9670;&#160;</a></span>TEST_F() <span class="overload">[34/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SyncBlobFileBeforeCloseIOError</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l02406">2406</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2406</span>                                                   {</div>
<div class="line"><span class="lineno"> 2407</span>  <a class="code hl_struct" href="../../d9/d25/structROCKSDB__NAMESPACE_1_1Options.html">Options</a> options;</div>
<div class="line"><span class="lineno"> 2408</span>  options.<a class="code hl_variable" href="../../d8/d57/structROCKSDB__NAMESPACE_1_1DBOptions.html#a8e8130980785981b140f6291ab0ec8bc">env</a> = fault_injection_env_.get();</div>
<div class="line"><span class="lineno"> 2409</span> </div>
<div class="line"><span class="lineno"> 2410</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> blob_options;</div>
<div class="line"><span class="lineno"> 2411</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno"> 2412</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#acdc8ff0b9882a819083ebd94c96c5a61">bytes_per_sync</a> = 1 &lt;&lt; 20;</div>
<div class="line"><span class="lineno"> 2413</span>  blob_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2414</span> </div>
<div class="line"><span class="lineno"> 2415</span>  Open(blob_options, options);</div>
<div class="line"><span class="lineno"> 2416</span> </div>
<div class="line"><span class="lineno"> 2417</span>  <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(<span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>));</div>
<div class="line"><span class="lineno"> 2418</span> </div>
<div class="line"><span class="lineno"> 2419</span>  <span class="keyword">auto</span> blob_files = blob_db_impl()-&gt;TEST_GetBlobFiles();</div>
<div class="line"><span class="lineno"> 2420</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_files.size(), 1);</div>
<div class="line"><span class="lineno"> 2421</span> </div>
<div class="line"><span class="lineno"> 2422</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 2423</span>      <span class="stringliteral">&quot;BlobLogWriter::Sync&quot;</span>, [<span class="keyword">this</span>](<span class="keywordtype">void</span> * <span class="comment">/* arg */</span>) {</div>
<div class="line"><span class="lineno"> 2424</span>        fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">false</span>, <a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb">Status::IOError</a>());</div>
<div class="line"><span class="lineno"> 2425</span>      });</div>
<div class="line"><span class="lineno"> 2426</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 2427</span> </div>
<div class="line"><span class="lineno"> 2428</span>  <span class="keyword">const</span> <a class="code hl_class" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html">Status</a> s = blob_db_impl()-&gt;TEST_CloseBlobFile(blob_files[0]);</div>
<div class="line"><span class="lineno"> 2429</span> </div>
<div class="line"><span class="lineno"> 2430</span>  fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 2431</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 2432</span>  <a class="code hl_function" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf">SyncPoint::GetInstance</a>()-&gt;ClearAllCallBacks();</div>
<div class="line"><span class="lineno"> 2433</span> </div>
<div class="line"><span class="lineno"> 2434</span>  <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.<a class="code hl_function" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb">IsIOError</a>());</div>
<div class="line"><span class="lineno"> 2435</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa8c72d94a9bd1255e493fa4656d9d25b_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa8c72d94a9bd1255e493fa4656d9d25b_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa8c72d94a9bd1255e493fa4656d9d25b_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_aa8c72d94a9bd1255e493fa4656d9d25b_cgraph">
<area shape="rect" title=" " alt="" coords="5,99,187,143"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="235,29,416,74"/>
<area shape="poly" title=" " alt="" coords="171,96,234,76,236,82,173,101"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb" title=" " alt="" coords="235,99,416,143"/>
<area shape="poly" title=" " alt="" coords="187,118,219,118,219,124,187,124"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afbdbc286a17e980852073e5382cff0fb" title=" " alt="" coords="235,168,416,213"/>
<area shape="poly" title=" " alt="" coords="173,141,236,160,234,166,171,146"/>
<area shape="poly" title=" " alt="" coords="281,29,280,19,288,10,303,5,325,3,350,5,365,12,363,17,349,10,325,8,304,10,291,15,285,21,287,28"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="464,29,645,74"/>
<area shape="poly" title=" " alt="" coords="416,49,449,49,449,54,416,54"/>
<area shape="poly" title=" " alt="" coords="511,29,510,19,517,10,532,5,555,3,580,5,594,12,592,17,578,10,555,8,533,10,520,15,515,21,516,28"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="464,99,645,143"/>
<area shape="poly" title=" " alt="" coords="416,118,449,118,449,124,416,124"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#afc660ff45fc7c890834fd65eb0ee6c9c" title=" " alt="" coords="464,168,645,213"/>
<area shape="poly" title=" " alt="" coords="416,188,449,188,449,193,416,193"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#acf8261295e4ab4ec8c132ed51b6feb71" title=" " alt="" coords="693,199,875,243"/>
<area shape="poly" title=" " alt="" coords="404,211,464,222,574,229,678,227,678,232,574,234,464,228,403,216"/>
<area shape="poly" title=" " alt="" coords="646,200,678,204,677,209,645,205"/>
</map>
</div>

</div>
</div>
<a id="a97cb5584053f7e8ca3007adabd446a7e" name="a97cb5584053f7e8ca3007adabd446a7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97cb5584053f7e8ca3007adabd446a7e">&#9670;&#160;</a></span>TEST_F() <span class="overload">[35/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UserCompactionFilter</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01358">1358</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1358</span>                                         {</div>
<div class="line"><span class="lineno"> 1359</span>  <span class="keyword">class </span>CustomerFilter : <span class="keyword">public</span> <a class="code hl_class" href="../../d9/d15/classROCKSDB__NAMESPACE_1_1CompactionFilter.html">CompactionFilter</a> {</div>
<div class="line"><span class="lineno"> 1360</span>   <span class="keyword">public</span>:</div>
<div class="line"><span class="lineno"> 1361</span>    <span class="keywordtype">bool</span> <a class="code hl_class" href="../../d2/dc9/classROCKSDB__NAMESPACE_1_1Filter.html">Filter</a>(<span class="keywordtype">int</span> <span class="comment">/*level*/</span>, <span class="keyword">const</span> <a class="code hl_class" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a> &amp; <span class="comment">/*key*/</span>, <span class="keyword">const</span> <a class="code hl_class" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a> &amp;value,</div>
<div class="line"><span class="lineno"> 1362</span>                std::string *new_value, <span class="keywordtype">bool</span> *value_changed)<span class="keyword"> const override </span>{</div>
<div class="line"><span class="lineno"> 1363</span>      *value_changed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1364</span>      <span class="comment">// changing value size to test value transitions between inlined data</span></div>
<div class="line"><span class="lineno"> 1365</span>      <span class="comment">// and stored-in-blob data</span></div>
<div class="line"><span class="lineno"> 1366</span>      <span class="keywordflow">if</span> (value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c">size</a>() % 4 == 1) {</div>
<div class="line"><span class="lineno"> 1367</span>        *new_value = value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>();</div>
<div class="line"><span class="lineno"> 1368</span>        <span class="comment">// double size by duplicating value</span></div>
<div class="line"><span class="lineno"> 1369</span>        *new_value += *new_value;</div>
<div class="line"><span class="lineno"> 1370</span>        *value_changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1371</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1372</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c">size</a>() % 3 == 1) {</div>
<div class="line"><span class="lineno"> 1373</span>        *new_value = value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>();</div>
<div class="line"><span class="lineno"> 1374</span>        <span class="comment">// trancate value size by half</span></div>
<div class="line"><span class="lineno"> 1375</span>        *new_value = new_value-&gt;substr(0, new_value-&gt;size() / 2);</div>
<div class="line"><span class="lineno"> 1376</span>        *value_changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1377</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1378</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c">size</a>() % 2 == 1) {</div>
<div class="line"><span class="lineno"> 1379</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1380</span>      }</div>
<div class="line"><span class="lineno"> 1381</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1382</span>    }</div>
<div class="line"><span class="lineno"> 1383</span>    <span class="keywordtype">bool</span> IgnoreSnapshots()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><span class="lineno"> 1384</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *Name()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;CustomerFilter&quot;</span>; }</div>
<div class="line"><span class="lineno"> 1385</span>  };</div>
<div class="line"><span class="lineno"> 1386</span>  <span class="keyword">class </span>CustomerFilterFactory : <span class="keyword">public</span> CompactionFilterFactory {</div>
<div class="line"><span class="lineno"> 1387</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *Name()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;CustomerFilterFactory&quot;</span>; }</div>
<div class="line"><span class="lineno"> 1388</span>    std::unique_ptr&lt;CompactionFilter&gt; CreateCompactionFilter(</div>
<div class="line"><span class="lineno"> 1389</span>        <span class="keyword">const</span> CompactionFilter::Context &amp; <span class="comment">/*context*/</span>)<span class="keyword"> override </span>{</div>
<div class="line"><span class="lineno"> 1390</span>      <span class="keywordflow">return</span> std::unique_ptr&lt;CompactionFilter&gt;(<span class="keyword">new</span> CustomerFilter());</div>
<div class="line"><span class="lineno"> 1391</span>    }</div>
<div class="line"><span class="lineno"> 1392</span>  };</div>
<div class="line"><span class="lineno"> 1393</span> </div>
<div class="line"><span class="lineno"> 1394</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumPuts = 1 &lt;&lt; 10;</div>
<div class="line"><span class="lineno"> 1395</span>  <span class="comment">// Generate both inlined and blob value</span></div>
<div class="line"><span class="lineno"> 1396</span>  <span class="keyword">constexpr</span> uint64_t kMinValueSize = 1 &lt;&lt; 6;</div>
<div class="line"><span class="lineno"> 1397</span>  <span class="keyword">constexpr</span> uint64_t kMaxValueSize = 1 &lt;&lt; 8;</div>
<div class="line"><span class="lineno"> 1398</span>  <span class="keyword">constexpr</span> uint64_t kMinBlobSize = 1 &lt;&lt; 7;</div>
<div class="line"><span class="lineno"> 1399</span>  <span class="keyword">static_assert</span>(kMinValueSize &lt; kMinBlobSize);</div>
<div class="line"><span class="lineno"> 1400</span>  <span class="keyword">static_assert</span>(kMaxValueSize &gt; kMinBlobSize);</div>
<div class="line"><span class="lineno"> 1401</span> </div>
<div class="line"><span class="lineno"> 1402</span>  BlobDBOptions bdb_options;</div>
<div class="line"><span class="lineno"> 1403</span>  bdb_options.min_blob_size = kMinBlobSize;</div>
<div class="line"><span class="lineno"> 1404</span>  bdb_options.blob_file_size = kMaxValueSize * 10;</div>
<div class="line"><span class="lineno"> 1405</span>  bdb_options.disable_background_tasks = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1406</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a1e42d7722b406557d300cfdefcf795dc">Snappy_Supported</a>()) {</div>
<div class="line"><span class="lineno"> 1407</span>    bdb_options.compression = CompressionType::kSnappyCompression;</div>
<div class="line"><span class="lineno"> 1408</span>  }</div>
<div class="line"><span class="lineno"> 1409</span>  <span class="comment">// case_num == 0: Test user defined compaction filter</span></div>
<div class="line"><span class="lineno"> 1410</span>  <span class="comment">// case_num == 1: Test user defined compaction filter factory</span></div>
<div class="line"><span class="lineno"> 1411</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> case_num = 0; case_num &lt; 2; case_num++) {</div>
<div class="line"><span class="lineno"> 1412</span>    Options options;</div>
<div class="line"><span class="lineno"> 1413</span>    <span class="keywordflow">if</span> (case_num == 0) {</div>
<div class="line"><span class="lineno"> 1414</span>      options.compaction_filter = <span class="keyword">new</span> CustomerFilter();</div>
<div class="line"><span class="lineno"> 1415</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1416</span>      options.compaction_filter_factory.reset(<span class="keyword">new</span> CustomerFilterFactory());</div>
<div class="line"><span class="lineno"> 1417</span>    }</div>
<div class="line"><span class="lineno"> 1418</span>    options.disable_auto_compactions = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1419</span>    options.env = mock_env_.get();</div>
<div class="line"><span class="lineno"> 1420</span>    options.statistics = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1421</span>    Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1422</span> </div>
<div class="line"><span class="lineno"> 1423</span>    std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1424</span>    std::map&lt;std::string, std::string&gt; data_after_compact;</div>
<div class="line"><span class="lineno"> 1425</span>    Random rnd(301);</div>
<div class="line"><span class="lineno"> 1426</span>    uint64_t value_size = kMinValueSize;</div>
<div class="line"><span class="lineno"> 1427</span>    <span class="keywordtype">int</span> drop_record = 0;</div>
<div class="line"><span class="lineno"> 1428</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumPuts; ++i) {</div>
<div class="line"><span class="lineno"> 1429</span>      std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 1430</span>      oss &lt;&lt; <span class="stringliteral">&quot;key&quot;</span> &lt;&lt; std::setw(4) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; i;</div>
<div class="line"><span class="lineno"> 1431</span> </div>
<div class="line"><span class="lineno"> 1432</span>      <span class="keyword">const</span> std::string key(oss.str());</div>
<div class="line"><span class="lineno"> 1433</span>      <span class="keyword">const</span> std::string value = rnd.HumanReadableString((<span class="keywordtype">int</span>)value_size);</div>
<div class="line"><span class="lineno"> 1434</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(key, value));</div>
<div class="line"><span class="lineno"> 1437</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1438</span> </div>
<div class="line"><span class="lineno"> 1439</span>      data[key] = value;</div>
<div class="line"><span class="lineno"> 1440</span>      <span class="keywordflow">if</span> (value.length() % 4 == 1) {</div>
<div class="line"><span class="lineno"> 1441</span>        data_after_compact[key] = value + value;</div>
<div class="line"><span class="lineno"> 1442</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.length() % 3 == 1) {</div>
<div class="line"><span class="lineno"> 1443</span>        data_after_compact[key] = value.substr(0, value.size() / 2);</div>
<div class="line"><span class="lineno"> 1444</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value.length() % 2 == 1) {</div>
<div class="line"><span class="lineno"> 1445</span>        ++drop_record;</div>
<div class="line"><span class="lineno"> 1446</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1447</span>        data_after_compact[key] = value;</div>
<div class="line"><span class="lineno"> 1448</span>      }</div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span>      <span class="keywordflow">if</span> (++value_size &gt; kMaxValueSize) {</div>
<div class="line"><span class="lineno"> 1451</span>        value_size = kMinValueSize;</div>
<div class="line"><span class="lineno"> 1452</span>      }</div>
<div class="line"><span class="lineno"> 1453</span>    }</div>
<div class="line"><span class="lineno"> 1454</span>    <span class="comment">// Verify full data set</span></div>
<div class="line"><span class="lineno"> 1455</span>    VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1456</span>    <span class="comment">// Applying compaction filter for records</span></div>
<div class="line"><span class="lineno"> 1457</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>));</div>
<div class="line"><span class="lineno"> 1458</span>    <span class="comment">// Verify data after compaction, only value with even length left.</span></div>
<div class="line"><span class="lineno"> 1459</span>    VerifyDB(data_after_compact);</div>
<div class="line"><span class="lineno"> 1460</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(drop_record,</div>
<div class="line"><span class="lineno"> 1461</span>              options.statistics-&gt;getTickerCount(COMPACTION_KEY_DROP_USER));</div>
<div class="line"><span class="lineno"> 1462</span>    <span class="keyword">delete</span> options.compaction_filter;</div>
<div class="line"><span class="lineno"> 1463</span>    Destroy();</div>
<div class="line"><span class="lineno"> 1464</span>  }</div>
<div class="line"><span class="lineno"> 1465</span>}</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1CompactionFilter_html"><div class="ttname"><a href="../../d9/d15/classROCKSDB__NAMESPACE_1_1CompactionFilter.html">ROCKSDB_NAMESPACE::CompactionFilter</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/db6/compaction__filter_8h_source.html#l00054">compaction_filter.h:54</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Filter_html"><div class="ttname"><a href="../../d2/dc9/classROCKSDB__NAMESPACE_1_1Filter.html">ROCKSDB_NAMESPACE::Filter</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/d88/compaction__iterator__test_8cc_source.html#l00664">compaction_iterator_test.cc:664</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Slice_html"><div class="ttname"><a href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html">ROCKSDB_NAMESPACE::Slice</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d48/slice_8h_source.html#l00032">slice.h:32</a></div></div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1Slice_html_a47c51c16ecee27b619768f1b817a342c"><div class="ttname"><a href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c">ROCKSDB_NAMESPACE::Slice::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d48/slice_8h_source.html#l00060">slice.h:60</a></div></div>
<div class="ttc" id="anamespaceROCKSDB__NAMESPACE_html_a1e42d7722b406557d300cfdefcf795dc"><div class="ttname"><a href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a1e42d7722b406557d300cfdefcf795dc">ROCKSDB_NAMESPACE::Snappy_Supported</a></div><div class="ttdeci">bool Snappy_Supported()</div><div class="ttdef"><b>Definition</b> <a href="../../d1/daf/compression_8h_source.html#l00507">compression.h:507</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a97cb5584053f7e8ca3007adabd446a7e_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a97cb5584053f7e8ca3007adabd446a7e_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a97cb5584053f7e8ca3007adabd446a7e_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a97cb5584053f7e8ca3007adabd446a7e_cgraph">
<area shape="rect" title=" " alt="" coords="5,192,187,237"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="259,29,440,74"/>
<area shape="poly" title=" " alt="" coords="114,190,164,137,197,109,233,84,244,78,247,83,236,89,201,113,168,141,118,193"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,123,464,167"/>
<area shape="poly" title=" " alt="" coords="180,189,250,169,252,174,181,194"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a47c51c16ecee27b619768f1b817a342c" title=" " alt="" coords="259,192,440,237"/>
<area shape="poly" title=" " alt="" coords="187,212,244,212,244,217,187,217"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a1e42d7722b406557d300cfdefcf795dc" title=" " alt="" coords="259,285,440,330"/>
<area shape="poly" title=" " alt="" coords="160,235,273,277,271,282,158,240"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733" title=" " alt="" coords="259,379,440,423"/>
<area shape="poly" title=" " alt="" coords="120,235,171,286,236,340,285,369,282,374,233,345,167,290,116,239"/>
<area shape="poly" title=" " alt="" coords="301,29,300,19,308,10,325,5,349,3,377,5,393,12,391,17,375,10,349,8,326,10,311,15,305,21,306,28"/>
<area shape="poly" title=" " alt="" coords="301,123,300,112,308,104,325,98,349,96,377,99,393,105,391,110,375,104,349,101,326,103,311,108,305,114,306,122"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="512,123,693,167"/>
<area shape="poly" title=" " alt="" coords="465,142,496,142,496,148,465,148"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="741,123,923,167"/>
<area shape="poly" title=" " alt="" coords="694,142,726,142,726,148,694,148"/>
<area shape="poly" title=" " alt="" coords="301,285,300,275,308,266,325,261,349,259,377,261,393,268,391,273,375,266,349,264,326,266,311,271,305,277,306,284"/>
<area shape="poly" title=" " alt="" coords="301,379,300,368,308,360,325,354,349,352,377,355,393,361,391,366,375,360,349,357,326,359,311,364,305,370,306,378"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#af026b3da84709ab0bfb50788de9e04b7" title=" " alt="" coords="512,379,693,423"/>
<area shape="poly" title=" " alt="" coords="440,398,497,398,497,404,440,404"/>
<area shape="poly" title=" " alt="" coords="559,379,558,369,565,360,580,354,603,352,628,355,642,361,640,366,626,360,603,357,581,359,568,364,563,370,564,378"/>
</map>
</div>

</div>
</div>
<a id="a9c5be5c676bdb02666a9bf8288cac077" name="a9c5be5c676bdb02666a9bf8288cac077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5be5c676bdb02666a9bf8288cac077">&#9670;&#160;</a></span>TEST_F() <span class="overload">[36/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UserCompactionFilter_BlobIOError</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l01468">1468</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1468</span>                                                     {</div>
<div class="line"><span class="lineno"> 1469</span>  <span class="keyword">class </span>CustomerFilter : <span class="keyword">public</span> <a class="code hl_class" href="../../d9/d15/classROCKSDB__NAMESPACE_1_1CompactionFilter.html">CompactionFilter</a> {</div>
<div class="line"><span class="lineno"> 1470</span>   <span class="keyword">public</span>:</div>
<div class="line"><span class="lineno"> 1471</span>    <span class="keywordtype">bool</span> <a class="code hl_class" href="../../d2/dc9/classROCKSDB__NAMESPACE_1_1Filter.html">Filter</a>(<span class="keywordtype">int</span> <span class="comment">/*level*/</span>, <span class="keyword">const</span> <a class="code hl_class" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a> &amp; <span class="comment">/*key*/</span>, <span class="keyword">const</span> <a class="code hl_class" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html">Slice</a> &amp;value,</div>
<div class="line"><span class="lineno"> 1472</span>                std::string *new_value, <span class="keywordtype">bool</span> *value_changed)<span class="keyword"> const override </span>{</div>
<div class="line"><span class="lineno"> 1473</span>      *new_value = value.<a class="code hl_function" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733">ToString</a>() + <span class="stringliteral">&quot;_new&quot;</span>;</div>
<div class="line"><span class="lineno"> 1474</span>      *value_changed = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1475</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1476</span>    }</div>
<div class="line"><span class="lineno"> 1477</span>    <span class="keywordtype">bool</span> IgnoreSnapshots()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><span class="lineno"> 1478</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *Name()<span class="keyword"> const override </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;CustomerFilter&quot;</span>; }</div>
<div class="line"><span class="lineno"> 1479</span>  };</div>
<div class="line"><span class="lineno"> 1480</span> </div>
<div class="line"><span class="lineno"> 1481</span>  <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> kNumPuts = 100;</div>
<div class="line"><span class="lineno"> 1482</span>  <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kValueSize = 100;</div>
<div class="line"><span class="lineno"> 1483</span> </div>
<div class="line"><span class="lineno"> 1484</span>  BlobDBOptions bdb_options;</div>
<div class="line"><span class="lineno"> 1485</span>  bdb_options.min_blob_size = 0;</div>
<div class="line"><span class="lineno"> 1486</span>  bdb_options.blob_file_size = kValueSize * 10;</div>
<div class="line"><span class="lineno"> 1487</span>  bdb_options.disable_background_tasks = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1488</span>  bdb_options.compression = CompressionType::kNoCompression;</div>
<div class="line"><span class="lineno"> 1489</span> </div>
<div class="line"><span class="lineno"> 1490</span>  std::vector&lt;std::string&gt; io_failure_cases = {</div>
<div class="line"><span class="lineno"> 1491</span>      <span class="stringliteral">&quot;BlobDBImpl::CreateBlobFileAndWriter&quot;</span>,</div>
<div class="line"><span class="lineno"> 1492</span>      <span class="stringliteral">&quot;BlobIndexCompactionFilterBase::WriteBlobToNewFile&quot;</span>,</div>
<div class="line"><span class="lineno"> 1493</span>      <span class="stringliteral">&quot;BlobDBImpl::CloseBlobFile&quot;</span>};</div>
<div class="line"><span class="lineno"> 1494</span> </div>
<div class="line"><span class="lineno"> 1495</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> case_num = 0; case_num &lt; io_failure_cases.size(); case_num++) {</div>
<div class="line"><span class="lineno"> 1496</span>    Options options;</div>
<div class="line"><span class="lineno"> 1497</span>    options.compaction_filter = <span class="keyword">new</span> CustomerFilter();</div>
<div class="line"><span class="lineno"> 1498</span>    options.disable_auto_compactions = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 1499</span>    options.env = fault_injection_env_.get();</div>
<div class="line"><span class="lineno"> 1500</span>    options.statistics = <a class="code hl_function" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a">CreateDBStatistics</a>();</div>
<div class="line"><span class="lineno"> 1501</span>    Open(bdb_options, options);</div>
<div class="line"><span class="lineno"> 1502</span> </div>
<div class="line"><span class="lineno"> 1503</span>    std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno"> 1504</span>    Random rnd(301);</div>
<div class="line"><span class="lineno"> 1505</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; kNumPuts; ++i) {</div>
<div class="line"><span class="lineno"> 1506</span>      std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 1507</span>      oss &lt;&lt; <span class="stringliteral">&quot;key&quot;</span> &lt;&lt; std::setw(4) &lt;&lt; std::setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; i;</div>
<div class="line"><span class="lineno"> 1508</span> </div>
<div class="line"><span class="lineno"> 1509</span>      <span class="keyword">const</span> std::string key(oss.str());</div>
<div class="line"><span class="lineno"> 1510</span>      <span class="keyword">const</span> std::string value = rnd.HumanReadableString(kValueSize);</div>
<div class="line"><span class="lineno"> 1511</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a14421ad5fea786298ec0edd0f34bd96a">SequenceNumber</a> sequence = blob_db_-&gt;GetLatestSequenceNumber() + 1;</div>
<div class="line"><span class="lineno"> 1512</span> </div>
<div class="line"><span class="lineno"> 1513</span>      <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(Put(key, value));</div>
<div class="line"><span class="lineno"> 1514</span>      <a class="code hl_define" href="../../d8/d73/gtest_8h.html#a1a6db8b1338ee7040329322b77779086">ASSERT_EQ</a>(blob_db_-&gt;GetLatestSequenceNumber(), sequence);</div>
<div class="line"><span class="lineno"> 1515</span>      data[key] = value;</div>
<div class="line"><span class="lineno"> 1516</span>    }</div>
<div class="line"><span class="lineno"> 1517</span> </div>
<div class="line"><span class="lineno"> 1518</span>    <span class="comment">// Verify full data set</span></div>
<div class="line"><span class="lineno"> 1519</span>    VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1520</span> </div>
<div class="line"><span class="lineno"> 1521</span>    SyncPoint::GetInstance()-&gt;SetCallBack(</div>
<div class="line"><span class="lineno"> 1522</span>        io_failure_cases[case_num], [&amp;](<span class="keywordtype">void</span> * <span class="comment">/*arg*/</span>) {</div>
<div class="line"><span class="lineno"> 1523</span>          fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">false</span>, Status::IOError());</div>
<div class="line"><span class="lineno"> 1524</span>        });</div>
<div class="line"><span class="lineno"> 1525</span>    SyncPoint::GetInstance()-&gt;EnableProcessing();</div>
<div class="line"><span class="lineno"> 1526</span>    <span class="keyword">auto</span> s = blob_db_-&gt;CompactRange(CompactRangeOptions(), <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 1527</span>    <a class="code hl_define" href="../../d8/d73/gtest_8h.html#ae9244bfbda562e8b798789b001993fa5">ASSERT_TRUE</a>(s.IsIOError());</div>
<div class="line"><span class="lineno"> 1528</span> </div>
<div class="line"><span class="lineno"> 1529</span>    <span class="comment">// Reactivate file system to allow test to verify and close DB.</span></div>
<div class="line"><span class="lineno"> 1530</span>    fault_injection_env_-&gt;SetFilesystemActive(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 1531</span>    SyncPoint::GetInstance()-&gt;DisableProcessing();</div>
<div class="line"><span class="lineno"> 1532</span>    SyncPoint::GetInstance()-&gt;ClearAllCallBacks();</div>
<div class="line"><span class="lineno"> 1533</span> </div>
<div class="line"><span class="lineno"> 1534</span>    <span class="comment">// Verify full data set after compaction failure</span></div>
<div class="line"><span class="lineno"> 1535</span>    VerifyDB(data);</div>
<div class="line"><span class="lineno"> 1536</span> </div>
<div class="line"><span class="lineno"> 1537</span>    <span class="keyword">delete</span> options.compaction_filter;</div>
<div class="line"><span class="lineno"> 1538</span>    Destroy();</div>
<div class="line"><span class="lineno"> 1539</span>  }</div>
<div class="line"><span class="lineno"> 1540</span>}</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a9c5be5c676bdb02666a9bf8288cac077_cgraph.png" border="0" usemap="#ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a9c5be5c676bdb02666a9bf8288cac077_cgraph" alt=""/></div>
<map name="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a9c5be5c676bdb02666a9bf8288cac077_cgraph" id="ade/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db_a9c5be5c676bdb02666a9bf8288cac077_cgraph">
<area shape="rect" title=" " alt="" coords="5,216,187,261"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#a8c3db4bd98583598f1033f310ec2959a" title=" " alt="" coords="259,29,440,74"/>
<area shape="poly" title=" " alt="" coords="110,214,159,150,194,114,233,84,243,78,246,83,236,89,197,118,163,153,114,217"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#ab51d6b4ff6b172485e7fd0125304ebaf" title=" " alt="" coords="259,123,440,167"/>
<area shape="poly" title=" " alt="" coords="146,213,234,177,254,170,256,175,236,182,148,218"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a885d0acba62a438cf7726540f4488ddf" title=" " alt="" coords="235,216,464,261"/>
<area shape="poly" title=" " alt="" coords="187,236,219,236,219,241,187,241"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#ad2630fe63daa0a4ea6c63502e36384cb" title=" " alt="" coords="259,285,440,330"/>
<area shape="poly" title=" " alt="" coords="181,259,252,278,250,283,180,264"/>
<area shape="rect" href="../../de/dc6/classROCKSDB__NAMESPACE_1_1Slice.html#a290b26395e5d5df4b78f0a164c7da733" title=" " alt="" coords="259,379,440,423"/>
<area shape="poly" title=" " alt="" coords="126,259,176,299,236,340,288,369,285,374,233,345,173,303,123,263"/>
<area shape="poly" title=" " alt="" coords="301,29,300,19,308,10,325,5,349,3,377,5,393,12,391,17,375,10,349,8,326,10,311,15,305,21,306,28"/>
<area shape="poly" title=" " alt="" coords="301,123,300,112,308,104,325,98,349,96,377,99,393,105,391,110,375,104,349,101,326,103,311,108,305,114,306,122"/>
<area shape="rect" href="../../d1/d1f/classROCKSDB__NAMESPACE_1_1SyncPoint.html#a0481c3dbefa4d103b8b408a6e192c630" title=" " alt="" coords="512,123,693,167"/>
<area shape="poly" title=" " alt="" coords="440,142,497,142,497,148,440,148"/>
<area shape="poly" title=" " alt="" coords="559,123,558,113,565,104,580,98,603,96,628,99,642,105,640,110,626,104,603,101,581,103,568,108,563,114,564,122"/>
<area shape="poly" title=" " alt="" coords="301,216,300,206,308,197,325,191,349,189,377,192,393,198,391,203,375,197,349,195,326,197,311,201,305,207,306,215"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a0067d95cd09465bcf62dce27e27af49a" title=" " alt="" coords="512,216,693,261"/>
<area shape="poly" title=" " alt="" coords="465,236,496,236,496,241,465,241"/>
<area shape="rect" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html#a9ff3e8a580ce4819e421a85077070bef" title=" " alt="" coords="741,216,923,261"/>
<area shape="poly" title=" " alt="" coords="694,236,726,236,726,241,694,241"/>
<area shape="rect" href="../../d4/d5b/classROCKSDB__NAMESPACE_1_1Status.html#a9f76d02ed8e41702a1388cd092a12464" title=" " alt="" coords="512,285,693,330"/>
<area shape="poly" title=" " alt="" coords="440,305,497,305,497,310,440,310"/>
<area shape="poly" title=" " alt="" coords="301,379,300,368,308,360,325,354,349,352,377,355,393,361,391,366,375,360,349,357,326,359,311,364,305,370,306,378"/>
<area shape="rect" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html#af026b3da84709ab0bfb50788de9e04b7" title=" " alt="" coords="512,379,693,423"/>
<area shape="poly" title=" " alt="" coords="440,398,497,398,497,404,440,404"/>
<area shape="poly" title=" " alt="" coords="559,379,558,369,565,360,580,354,603,352,628,355,642,361,640,366,626,360,603,357,581,359,568,364,563,370,564,378"/>
</map>
</div>

</div>
</div>
<a id="ad35a412f9eb915082fc0469575046af6" name="ad35a412f9eb915082fc0469575046af6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad35a412f9eb915082fc0469575046af6">&#9670;&#160;</a></span>TEST_F() <span class="overload">[37/37]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ROCKSDB_NAMESPACE::blob_db::TEST_F </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/dd7/classROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBTest.html">BlobDBTest</a></td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a></td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d8/d60/blob__db__test_8cc_source.html">blob_db_test.cc</a> 파일의 <a class="el" href="../../d8/d60/blob__db__test_8cc_source.html#l00456">456</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  456</span>                               {</div>
<div class="line"><span class="lineno">  457</span>  <a class="code hl_class" href="../../d9/d54/classROCKSDB__NAMESPACE_1_1Random.html">Random</a> rnd(301);</div>
<div class="line"><span class="lineno">  458</span>  <a class="code hl_struct" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html">BlobDBOptions</a> bdb_options;</div>
<div class="line"><span class="lineno">  459</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a289326c43b447a98498dbc7337db3dec">min_blob_size</a> = 0;</div>
<div class="line"><span class="lineno">  460</span>  bdb_options.<a class="code hl_variable" href="../../dd/d7d/structROCKSDB__NAMESPACE_1_1blob__db_1_1BlobDBOptions.html#a21c53fe7e7eb9648831ed5f63e021bf3">disable_background_tasks</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  461</span>  Open(bdb_options);</div>
<div class="line"><span class="lineno">  462</span>  std::map&lt;std::string, std::string&gt; data;</div>
<div class="line"><span class="lineno">  463</span>  <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 100; i++) {</div>
<div class="line"><span class="lineno">  464</span>    <a class="code hl_class" href="../../d6/d09/classROCKSDB__NAMESPACE_1_1WriteBatch.html">WriteBatch</a> batch;</div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; 10; j++) {</div>
<div class="line"><span class="lineno">  466</span>      PutRandomToWriteBatch(<span class="stringliteral">&quot;key&quot;</span> + std::to_string(j * 100 + i), &amp;rnd, &amp;batch,</div>
<div class="line"><span class="lineno">  467</span>                            &amp;data);</div>
<div class="line"><span class="lineno">  468</span>    }</div>
<div class="line"><span class="lineno">  469</span> </div>
<div class="line"><span class="lineno">  470</span>    <a class="code hl_define" href="../../dc/d42/testharness_8h.html#a6892e90ee417adfb0c66aa7a49769895">ASSERT_OK</a>(blob_db_-&gt;Write(<a class="code hl_struct" href="../../da/d09/structROCKSDB__NAMESPACE_1_1WriteOptions.html">WriteOptions</a>(), &amp;batch));</div>
<div class="line"><span class="lineno">  471</span>  }</div>
<div class="line"><span class="lineno">  472</span>  VerifyDB(data);</div>
<div class="line"><span class="lineno">  473</span>}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">변수 문서화</h2>
<a id="a370c88ffe8d625dd0f8b028c385ea1d2" name="a370c88ffe8d625dd0f8b028c385ea1d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a370c88ffe8d625dd0f8b028c385ea1d2">&#9670;&#160;</a></span>kNoExpiration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ROCKSDB_NAMESPACE::blob_db::kNoExpiration = std::numeric_limits&lt;uint64_t&gt;::max()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel constexpr">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d4/df3/blob__db_8h_source.html">blob_db.h</a> 파일의 <a class="el" href="../../d4/df3/blob__db_8h_source.html#l00028">28</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html">ROCKSDB_NAMESPACE</a></li><li class="navelem"><a class="el" href="../../de/d03/namespaceROCKSDB__NAMESPACE_1_1blob__db.html">blob_db</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
