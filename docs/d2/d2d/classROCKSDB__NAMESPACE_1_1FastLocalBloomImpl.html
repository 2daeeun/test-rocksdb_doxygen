<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RocksDB Doxygen: ROCKSDB_NAMESPACE::FastLocalBloomImpl 클래스 참조</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RocksDB Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-static-methods">정적 Public 멤버 함수</a> &#124;
<a href="../../dd/d12/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl-members.html">모든 멤버 목록</a>  </div>
  <div class="headertitle"><div class="title">ROCKSDB_NAMESPACE::FastLocalBloomImpl 클래스 참조</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
정적 Public 멤버 함수</h2></td></tr>
<tr class="memitem:ad1ffa2edfe9a14d55e8ad24d6a3e7b3f" id="r_ad1ffa2edfe9a14d55e8ad24d6a3e7b3f"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad1ffa2edfe9a14d55e8ad24d6a3e7b3f">EstimatedFpRate</a> (size_t keys, size_t bytes, int num_probes, int hash_bits)</td></tr>
<tr class="separator:ad1ffa2edfe9a14d55e8ad24d6a3e7b3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fcb7aec25c65115877e1fe324001cee" id="r_a3fcb7aec25c65115877e1fe324001cee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3fcb7aec25c65115877e1fe324001cee">ChooseNumProbes</a> (int millibits_per_key)</td></tr>
<tr class="separator:a3fcb7aec25c65115877e1fe324001cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a8e15a73ffa40b3f9c9786702fee985" id="r_a1a8e15a73ffa40b3f9c9786702fee985"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a8e15a73ffa40b3f9c9786702fee985">AddHash</a> (uint32_t h1, uint32_t h2, uint32_t len_bytes, int num_probes, char *data)</td></tr>
<tr class="separator:a1a8e15a73ffa40b3f9c9786702fee985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a1c129eaacb353f3052a239db273c68" id="r_a4a1c129eaacb353f3052a239db273c68"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a1c129eaacb353f3052a239db273c68">AddHashPrepared</a> (uint32_t h2, int num_probes, char *data_at_cache_line)</td></tr>
<tr class="separator:a4a1c129eaacb353f3052a239db273c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5cc7f54e697021255be77dafe5fff2f" id="r_ab5cc7f54e697021255be77dafe5fff2f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5cc7f54e697021255be77dafe5fff2f">PrepareHash</a> (uint32_t h1, uint32_t len_bytes, const char *data, uint32_t *byte_offset)</td></tr>
<tr class="separator:ab5cc7f54e697021255be77dafe5fff2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf0554f75d79e9695304cdd872374ec" id="r_a7cf0554f75d79e9695304cdd872374ec"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cf0554f75d79e9695304cdd872374ec">HashMayMatch</a> (uint32_t h1, uint32_t h2, uint32_t len_bytes, int num_probes, const char *data)</td></tr>
<tr class="separator:a7cf0554f75d79e9695304cdd872374ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22445781f97e973e37fc80b04d4a641a" id="r_a22445781f97e973e37fc80b04d4a641a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22445781f97e973e37fc80b04d4a641a">HashMayMatchPrepared</a> (uint32_t h2, int num_probes, const char *data_at_cache_line)</td></tr>
<tr class="separator:a22445781f97e973e37fc80b04d4a641a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">상세한 설명</h2>
<div class="textblock">
<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00144">144</a> 번째 라인에서 정의되었습니다.</p>
</div><h2 class="groupheader">멤버 함수 문서화</h2>
<a id="a1a8e15a73ffa40b3f9c9786702fee985" name="a1a8e15a73ffa40b3f9c9786702fee985"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a8e15a73ffa40b3f9c9786702fee985">&#9670;&#160;</a></span>AddHash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ROCKSDB_NAMESPACE::FastLocalBloomImpl::AddHash </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_probes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00200">200</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  201</span>                                                         {</div>
<div class="line"><span class="lineno">  202</span>    uint32_t bytes_to_cache_line = <a class="code hl_function" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9">FastRange32</a>(h1, len_bytes &gt;&gt; 6) &lt;&lt; 6;</div>
<div class="line"><span class="lineno">  203</span>    <a class="code hl_function" href="#a4a1c129eaacb353f3052a239db273c68">AddHashPrepared</a>(h2, num_probes, data + bytes_to_cache_line);</div>
<div class="line"><span class="lineno">  204</span>  }</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_html_a4a1c129eaacb353f3052a239db273c68"><div class="ttname"><a href="#a4a1c129eaacb353f3052a239db273c68">ROCKSDB_NAMESPACE::FastLocalBloomImpl::AddHashPrepared</a></div><div class="ttdeci">static void AddHashPrepared(uint32_t h2, int num_probes, char *data_at_cache_line)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/df6/bloom__impl_8h_source.html#l00206">bloom_impl.h:206</a></div></div>
<div class="ttc" id="ahash__test_8cc_html_ace9094df44a43910378b2cb2b0dc71c9"><div class="ttname"><a href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9">FastRange32</a></div><div class="ttdeci">uint32_t FastRange32(uint32_t hash, uint32_t range)</div><div class="ttdef"><b>Definition</b> <a href="../../da/df2/hash__test_8cc_source.html#l00556">hash_test.cc:556</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a1a8e15a73ffa40b3f9c9786702fee985_cgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a1a8e15a73ffa40b3f9c9786702fee985_cgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a1a8e15a73ffa40b3f9c9786702fee985_cgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a1a8e15a73ffa40b3f9c9786702fee985_cgraph">
<area shape="rect" title=" " alt="" coords="5,40,187,102"/>
<area shape="rect" href="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html#a4a1c129eaacb353f3052a239db273c68" title=" " alt="" coords="235,5,416,67"/>
<area shape="poly" title=" " alt="" coords="187,54,219,50,220,55,187,60"/>
<area shape="rect" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9" title=" " alt="" coords="273,92,378,119"/>
<area shape="poly" title=" " alt="" coords="187,82,258,93,257,98,187,87"/>
</map>
</div>

</div>
</div>
<a id="a4a1c129eaacb353f3052a239db273c68" name="a4a1c129eaacb353f3052a239db273c68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a1c129eaacb353f3052a239db273c68">&#9670;&#160;</a></span>AddHashPrepared()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ROCKSDB_NAMESPACE::FastLocalBloomImpl::AddHashPrepared </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_probes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>data_at_cache_line</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00206">206</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  207</span>                                                               {</div>
<div class="line"><span class="lineno">  208</span>    uint32_t h = h2;</div>
<div class="line"><span class="lineno">  209</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_probes; ++i, h *= uint32_t{0x9e3779b9}) {</div>
<div class="line"><span class="lineno">  210</span>      <span class="comment">// 9-bit address within 512 bit cache line</span></div>
<div class="line"><span class="lineno">  211</span>      <span class="keywordtype">int</span> bitpos = h &gt;&gt; (32 - 9);</div>
<div class="line"><span class="lineno">  212</span>      data_at_cache_line[bitpos &gt;&gt; 3] |= (uint8_t{1} &lt;&lt; (bitpos &amp; 7));</div>
<div class="line"><span class="lineno">  213</span>    }</div>
<div class="line"><span class="lineno">  214</span>  }</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a4a1c129eaacb353f3052a239db273c68_icgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a4a1c129eaacb353f3052a239db273c68_icgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a4a1c129eaacb353f3052a239db273c68_icgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a4a1c129eaacb353f3052a239db273c68_icgraph">
<area shape="rect" title=" " alt="" coords="235,5,416,67"/>
<area shape="rect" href="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html#a1a8e15a73ffa40b3f9c9786702fee985" title=" " alt="" coords="5,5,187,67"/>
<area shape="poly" title=" " alt="" coords="219,39,187,39,187,34,219,34"/>
</map>
</div>

</div>
</div>
<a id="a3fcb7aec25c65115877e1fe324001cee" name="a3fcb7aec25c65115877e1fe324001cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fcb7aec25c65115877e1fe324001cee">&#9670;&#160;</a></span>ChooseNumProbes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ROCKSDB_NAMESPACE::FastLocalBloomImpl::ChooseNumProbes </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>millibits_per_key</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00156">156</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  156</span>                                                           {</div>
<div class="line"><span class="lineno">  157</span>    <span class="comment">// Since this implementation can (with AVX2) make up to 8 probes</span></div>
<div class="line"><span class="lineno">  158</span>    <span class="comment">// for the same cost, we pick the most accurate num_probes, based</span></div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">// on actual tests of the implementation. Note that for higher</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="comment">// bits/key, the best choice for cache-local Bloom can be notably</span></div>
<div class="line"><span class="lineno">  161</span>    <span class="comment">// smaller than standard bloom, e.g. 9 instead of 11 @ 16 b/k.</span></div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">if</span> (millibits_per_key &lt;= 2080) {</div>
<div class="line"><span class="lineno">  163</span>      <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">  164</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 3580) {</div>
<div class="line"><span class="lineno">  165</span>      <span class="keywordflow">return</span> 2;</div>
<div class="line"><span class="lineno">  166</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 5100) {</div>
<div class="line"><span class="lineno">  167</span>      <span class="keywordflow">return</span> 3;</div>
<div class="line"><span class="lineno">  168</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 6640) {</div>
<div class="line"><span class="lineno">  169</span>      <span class="keywordflow">return</span> 4;</div>
<div class="line"><span class="lineno">  170</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 8300) {</div>
<div class="line"><span class="lineno">  171</span>      <span class="keywordflow">return</span> 5;</div>
<div class="line"><span class="lineno">  172</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 10070) {</div>
<div class="line"><span class="lineno">  173</span>      <span class="keywordflow">return</span> 6;</div>
<div class="line"><span class="lineno">  174</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 11720) {</div>
<div class="line"><span class="lineno">  175</span>      <span class="keywordflow">return</span> 7;</div>
<div class="line"><span class="lineno">  176</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 14001) {</div>
<div class="line"><span class="lineno">  177</span>      <span class="comment">// Would be something like &lt;= 13800 but sacrificing *slightly* for</span></div>
<div class="line"><span class="lineno">  178</span>      <span class="comment">// more settings using &lt;= 8 probes.</span></div>
<div class="line"><span class="lineno">  179</span>      <span class="keywordflow">return</span> 8;</div>
<div class="line"><span class="lineno">  180</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 16050) {</div>
<div class="line"><span class="lineno">  181</span>      <span class="keywordflow">return</span> 9;</div>
<div class="line"><span class="lineno">  182</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 18300) {</div>
<div class="line"><span class="lineno">  183</span>      <span class="keywordflow">return</span> 10;</div>
<div class="line"><span class="lineno">  184</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 22001) {</div>
<div class="line"><span class="lineno">  185</span>      <span class="keywordflow">return</span> 11;</div>
<div class="line"><span class="lineno">  186</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &lt;= 25501) {</div>
<div class="line"><span class="lineno">  187</span>      <span class="keywordflow">return</span> 12;</div>
<div class="line"><span class="lineno">  188</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (millibits_per_key &gt; 50000) {</div>
<div class="line"><span class="lineno">  189</span>      <span class="comment">// Top out at 24 probes (three sets of 8)</span></div>
<div class="line"><span class="lineno">  190</span>      <span class="keywordflow">return</span> 24;</div>
<div class="line"><span class="lineno">  191</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  192</span>      <span class="comment">// Roughly optimal choices for remaining range</span></div>
<div class="line"><span class="lineno">  193</span>      <span class="comment">// e.g.</span></div>
<div class="line"><span class="lineno">  194</span>      <span class="comment">// 28000 -&gt; 12, 28001 -&gt; 13</span></div>
<div class="line"><span class="lineno">  195</span>      <span class="comment">// 50000 -&gt; 23, 50001 -&gt; 24</span></div>
<div class="line"><span class="lineno">  196</span>      <span class="keywordflow">return</span> (millibits_per_key - 1) / 2000 - 1;</div>
<div class="line"><span class="lineno">  197</span>    }</div>
<div class="line"><span class="lineno">  198</span>  }</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a3fcb7aec25c65115877e1fe324001cee_icgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a3fcb7aec25c65115877e1fe324001cee_icgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a3fcb7aec25c65115877e1fe324001cee_icgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a3fcb7aec25c65115877e1fe324001cee_icgraph">
<area shape="rect" title=" " alt="" coords="548,200,729,262"/>
<area shape="rect" href="../../dc/db2/classROCKSDB__NAMESPACE_1_1BloomLikeFilterPolicy.html#a9b089becaa6750d217824bf61730abe4" title=" " alt="" coords="319,200,500,262"/>
<area shape="poly" title=" " alt="" coords="533,234,500,234,500,228,533,228"/>
<area shape="poly" title=" " alt="" coords="446,188,432,181,409,179,390,181,377,185,370,192,369,200,364,200,365,190,374,181,388,175,409,173,433,176,448,183"/>
<area shape="rect" href="../../da/df5/classROCKSDB__NAMESPACE_1_1BloomFilterPolicy.html#a61f9bd14c5c802ce1b8a195026236f01" title=" " alt="" coords="30,29,246,91"/>
<area shape="poly" title=" " alt="" coords="370,191,325,146,269,105,245,93,247,88,272,101,328,142,374,187"/>
<area shape="rect" href="../../df/daa/classROCKSDB__NAMESPACE_1_1test_1_1FastLocalBloomFilterPolicy.html#a685d18c2484eb8e6243bbb11cfe5ca65" title=" " alt="" coords="17,115,259,176"/>
<area shape="poly" title=" " alt="" coords="303,200,238,179,239,174,305,195"/>
<area shape="rect" href="../../d2/de6/classROCKSDB__NAMESPACE_1_1test_1_1LegacyBloomFilterPolicy.html#ad62f153dbea980c99c104c839a7d70c8" title=" " alt="" coords="31,200,245,262"/>
<area shape="poly" title=" " alt="" coords="303,234,245,234,245,228,303,228"/>
<area shape="rect" href="../../dc/d17/classROCKSDB__NAMESPACE_1_1RibbonFilterPolicy.html#ac424d5c92a497eba039bc46420525f76" title=" " alt="" coords="47,309,229,371"/>
<area shape="poly" title=" " alt="" coords="318,271,218,311,216,306,315,266"/>
<area shape="rect" href="../../d2/d96/classROCKSDB__NAMESPACE_1_1test_1_1Standard128RibbonFilterPolicy.html#a27d75a2824e14c43e70b3f337f5c49b1" title=" " alt="" coords="5,395,271,456"/>
<area shape="poly" title=" " alt="" coords="381,276,334,333,304,361,272,385,252,397,249,392,269,381,301,357,330,329,376,273"/>
<area shape="poly" title=" " alt="" coords="182,17,165,11,138,8,114,10,99,15,91,21,90,30,85,29,86,19,96,10,113,5,138,3,166,5,184,13"/>
<area shape="poly" title=" " alt="" coords="182,297,165,291,138,288,114,290,99,295,91,301,90,310,85,309,86,299,96,290,113,285,138,283,166,285,184,293"/>
</map>
</div>

</div>
</div>
<a id="ad1ffa2edfe9a14d55e8ad24d6a3e7b3f" name="ad1ffa2edfe9a14d55e8ad24d6a3e7b3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1ffa2edfe9a14d55e8ad24d6a3e7b3f">&#9670;&#160;</a></span>EstimatedFpRate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double ROCKSDB_NAMESPACE::FastLocalBloomImpl::EstimatedFpRate </td>
          <td>(</td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>keys</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_probes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>hash_bits</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00148">148</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  149</span>                                               {</div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordflow">return</span> BloomMath::IndependentProbabilitySum(</div>
<div class="line"><span class="lineno">  151</span>        BloomMath::CacheLocalFpRate(8.0 * bytes / keys, num_probes,</div>
<div class="line"><span class="lineno">  152</span>                                    <span class="comment">/*cache line bits*/</span> 512),</div>
<div class="line"><span class="lineno">  153</span>        BloomMath::FingerprintFpRate(keys, hash_bits));</div>
<div class="line"><span class="lineno">  154</span>  }</div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ad1ffa2edfe9a14d55e8ad24d6a3e7b3f_cgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ad1ffa2edfe9a14d55e8ad24d6a3e7b3f_cgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ad1ffa2edfe9a14d55e8ad24d6a3e7b3f_cgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ad1ffa2edfe9a14d55e8ad24d6a3e7b3f_cgraph">
<area shape="rect" title=" " alt="" coords="5,66,187,128"/>
<area shape="rect" href="../../d3/d44/classROCKSDB__NAMESPACE_1_1BloomMath.html#aefc86cedf341c13145bd758fb0f5a26f" title=" " alt="" coords="265,5,489,50"/>
<area shape="poly" title=" " alt="" coords="186,72,234,60,266,52,268,57,235,65,188,77"/>
<area shape="rect" href="../../d3/d44/classROCKSDB__NAMESPACE_1_1BloomMath.html#a3b1aecaa7227fbf94fe71f4e7a02ae9f" title=" " alt="" coords="267,75,486,119"/>
<area shape="poly" title=" " alt="" coords="187,94,252,94,252,100,187,100"/>
<area shape="rect" href="../../d3/d44/classROCKSDB__NAMESPACE_1_1BloomMath.html#ae33d446637bc39072f63d9fb9f23d7dc" title=" " alt="" coords="235,144,519,189"/>
<area shape="poly" title=" " alt="" coords="188,117,235,129,268,137,266,142,234,134,186,122"/>
<area shape="rect" href="../../d3/d44/classROCKSDB__NAMESPACE_1_1BloomMath.html#aded40ede26e801fd5d6bf24c3fc348bd" title=" " alt="" coords="567,5,775,50"/>
<area shape="poly" title=" " alt="" coords="489,25,552,25,552,30,489,30"/>
</map>
</div>

</div>
</div>
<a id="a7cf0554f75d79e9695304cdd872374ec" name="a7cf0554f75d79e9695304cdd872374ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf0554f75d79e9695304cdd872374ec">&#9670;&#160;</a></span>HashMayMatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ROCKSDB_NAMESPACE::FastLocalBloomImpl::HashMayMatch </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_probes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00225">225</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  226</span>                                                                    {</div>
<div class="line"><span class="lineno">  227</span>    uint32_t bytes_to_cache_line = <a class="code hl_function" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9">FastRange32</a>(h1, len_bytes &gt;&gt; 6) &lt;&lt; 6;</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="#a22445781f97e973e37fc80b04d4a641a">HashMayMatchPrepared</a>(h2, num_probes, data + bytes_to_cache_line);</div>
<div class="line"><span class="lineno">  229</span>  }</div>
<div class="ttc" id="aclassROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_html_a22445781f97e973e37fc80b04d4a641a"><div class="ttname"><a href="#a22445781f97e973e37fc80b04d4a641a">ROCKSDB_NAMESPACE::FastLocalBloomImpl::HashMayMatchPrepared</a></div><div class="ttdeci">static bool HashMayMatchPrepared(uint32_t h2, int num_probes, const char *data_at_cache_line)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/df6/bloom__impl_8h_source.html#l00231">bloom_impl.h:231</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a7cf0554f75d79e9695304cdd872374ec_cgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a7cf0554f75d79e9695304cdd872374ec_cgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a7cf0554f75d79e9695304cdd872374ec_cgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a7cf0554f75d79e9695304cdd872374ec_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,187,85"/>
<area shape="rect" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9" title=" " alt="" coords="273,5,378,33"/>
<area shape="poly" title=" " alt="" coords="187,37,257,27,258,32,187,43"/>
<area shape="rect" href="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html#a22445781f97e973e37fc80b04d4a641a" title=" " alt="" coords="235,58,416,119"/>
<area shape="poly" title=" " alt="" coords="187,65,220,70,219,75,187,70"/>
</map>
</div>

</div>
</div>
<a id="a22445781f97e973e37fc80b04d4a641a" name="a22445781f97e973e37fc80b04d4a641a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22445781f97e973e37fc80b04d4a641a">&#9670;&#160;</a></span>HashMayMatchPrepared()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool ROCKSDB_NAMESPACE::FastLocalBloomImpl::HashMayMatchPrepared </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>num_probes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data_at_cache_line</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00231">231</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  232</span>                                                                          {</div>
<div class="line"><span class="lineno">  233</span>    uint32_t h = h2;</div>
<div class="line"><span class="lineno">  234</span><span class="preprocessor">#ifdef __AVX2__</span></div>
<div class="line"><span class="lineno">  235</span>    <span class="keywordtype">int</span> rem_probes = num_probes;</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>    <span class="comment">// NOTE: For better performance for num_probes in {1, 2, 9, 10, 17, 18,</span></div>
<div class="line"><span class="lineno">  238</span>    <span class="comment">// etc.} one can insert specialized code for rem_probes &lt;= 2, bypassing</span></div>
<div class="line"><span class="lineno">  239</span>    <span class="comment">// the SIMD code in those cases. There is a detectable but minor overhead</span></div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">// applied to other values of num_probes (when not statically determined),</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="comment">// but smoother performance curve vs. num_probes. But for now, when</span></div>
<div class="line"><span class="lineno">  242</span>    <span class="comment">// in doubt, don&#39;t add unnecessary code.</span></div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="comment">// Powers of 32-bit golden ratio, mod 2**32.</span></div>
<div class="line"><span class="lineno">  245</span>    <span class="keyword">const</span> __m256i multipliers =</div>
<div class="line"><span class="lineno">  246</span>        _mm256_setr_epi32(0x00000001, 0x9e3779b9, 0xe35e67b1, 0x734297e9,</div>
<div class="line"><span class="lineno">  247</span>                          0x35fbe861, 0xdeb7c719, 0x448b211, 0x3459b749);</div>
<div class="line"><span class="lineno">  248</span> </div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  250</span>      <span class="comment">// Eight copies of hash</span></div>
<div class="line"><span class="lineno">  251</span>      __m256i hash_vector = _mm256_set1_epi32(h);</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>      <span class="comment">// Same effect as repeated multiplication by 0x9e3779b9 thanks to</span></div>
<div class="line"><span class="lineno">  254</span>      <span class="comment">// associativity of multiplication.</span></div>
<div class="line"><span class="lineno">  255</span>      hash_vector = _mm256_mullo_epi32(hash_vector, multipliers);</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>      <span class="comment">// Now the top 9 bits of each of the eight 32-bit values in</span></div>
<div class="line"><span class="lineno">  258</span>      <span class="comment">// hash_vector are bit addresses for probes within the cache line.</span></div>
<div class="line"><span class="lineno">  259</span>      <span class="comment">// While the platform-independent code uses byte addressing (6 bits</span></div>
<div class="line"><span class="lineno">  260</span>      <span class="comment">// to pick a byte + 3 bits to pick a bit within a byte), here we work</span></div>
<div class="line"><span class="lineno">  261</span>      <span class="comment">// with 32-bit words (4 bits to pick a word + 5 bits to pick a bit</span></div>
<div class="line"><span class="lineno">  262</span>      <span class="comment">// within a word) because that works well with AVX2 and is equivalent</span></div>
<div class="line"><span class="lineno">  263</span>      <span class="comment">// under little-endian.</span></div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>      <span class="comment">// Shift each right by 28 bits to get 4-bit word addresses.</span></div>
<div class="line"><span class="lineno">  266</span>      <span class="keyword">const</span> __m256i word_addresses = _mm256_srli_epi32(hash_vector, 28);</div>
<div class="line"><span class="lineno">  267</span> </div>
<div class="line"><span class="lineno">  268</span>      <span class="comment">// Gather 32-bit values spread over 512 bits by 4-bit address. In</span></div>
<div class="line"><span class="lineno">  269</span>      <span class="comment">// essence, we are dereferencing eight pointers within the cache</span></div>
<div class="line"><span class="lineno">  270</span>      <span class="comment">// line.</span></div>
<div class="line"><span class="lineno">  271</span>      <span class="comment">//</span></div>
<div class="line"><span class="lineno">  272</span>      <span class="comment">// Option 1: AVX2 gather (seems to be a little slow - understandable)</span></div>
<div class="line"><span class="lineno">  273</span>      <span class="comment">// const __m256i value_vector =</span></div>
<div class="line"><span class="lineno">  274</span>      <span class="comment">//     _mm256_i32gather_epi32(static_cast&lt;const int</span></div>
<div class="line"><span class="lineno">  275</span>      <span class="comment">//     *&gt;(data_at_cache_line),</span></div>
<div class="line"><span class="lineno">  276</span>      <span class="comment">//                            word_addresses,</span></div>
<div class="line"><span class="lineno">  277</span>      <span class="comment">//                            /*bytes / i32*/ 4);</span></div>
<div class="line"><span class="lineno">  278</span>      <span class="comment">// END Option 1</span></div>
<div class="line"><span class="lineno">  279</span>      <span class="comment">// Potentially unaligned as we&#39;re not *always* cache-aligned -&gt; loadu</span></div>
<div class="line"><span class="lineno">  280</span>      <span class="keyword">const</span> __m256i *mm_data =</div>
<div class="line"><span class="lineno">  281</span>          <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span>__m256i *<span class="keyword">&gt;</span>(data_at_cache_line);</div>
<div class="line"><span class="lineno">  282</span>      __m256i lower = _mm256_loadu_si256(mm_data);</div>
<div class="line"><span class="lineno">  283</span>      __m256i upper = _mm256_loadu_si256(mm_data + 1);</div>
<div class="line"><span class="lineno">  284</span>      <span class="comment">// Option 2: AVX512VL permute hack</span></div>
<div class="line"><span class="lineno">  285</span>      <span class="comment">// Only negligibly faster than Option 3, so not yet worth supporting</span></div>
<div class="line"><span class="lineno">  286</span>      <span class="comment">// const __m256i value_vector =</span></div>
<div class="line"><span class="lineno">  287</span>      <span class="comment">//    _mm256_permutex2var_epi32(lower, word_addresses, upper);</span></div>
<div class="line"><span class="lineno">  288</span>      <span class="comment">// END Option 2</span></div>
<div class="line"><span class="lineno">  289</span>      <span class="comment">// Option 3: AVX2 permute+blend hack</span></div>
<div class="line"><span class="lineno">  290</span>      <span class="comment">// Use lowest three bits to order probing values, as if all from same</span></div>
<div class="line"><span class="lineno">  291</span>      <span class="comment">// 256 bit piece.</span></div>
<div class="line"><span class="lineno">  292</span>      lower = _mm256_permutevar8x32_epi32(lower, word_addresses);</div>
<div class="line"><span class="lineno">  293</span>      upper = _mm256_permutevar8x32_epi32(upper, word_addresses);</div>
<div class="line"><span class="lineno">  294</span>      <span class="comment">// Just top 1 bit of address, to select between lower and upper.</span></div>
<div class="line"><span class="lineno">  295</span>      <span class="keyword">const</span> __m256i upper_lower_selector = _mm256_srai_epi32(hash_vector, 31);</div>
<div class="line"><span class="lineno">  296</span>      <span class="comment">// Finally: the next 8 probed 32-bit values, in probing sequence order.</span></div>
<div class="line"><span class="lineno">  297</span>      <span class="keyword">const</span> __m256i value_vector =</div>
<div class="line"><span class="lineno">  298</span>          _mm256_blendv_epi8(lower, upper, upper_lower_selector);</div>
<div class="line"><span class="lineno">  299</span>      <span class="comment">// END Option 3</span></div>
<div class="line"><span class="lineno">  300</span> </div>
<div class="line"><span class="lineno">  301</span>      <span class="comment">// We might not need to probe all 8, so build a mask for selecting only</span></div>
<div class="line"><span class="lineno">  302</span>      <span class="comment">// what we need. (The k_selector(s) could be pre-computed but that</span></div>
<div class="line"><span class="lineno">  303</span>      <span class="comment">// doesn&#39;t seem to make a noticeable performance difference.)</span></div>
<div class="line"><span class="lineno">  304</span>      <span class="keyword">const</span> __m256i zero_to_seven = _mm256_setr_epi32(0, 1, 2, 3, 4, 5, 6, 7);</div>
<div class="line"><span class="lineno">  305</span>      <span class="comment">// Subtract rem_probes from each of those constants</span></div>
<div class="line"><span class="lineno">  306</span>      __m256i k_selector =</div>
<div class="line"><span class="lineno">  307</span>          _mm256_sub_epi32(zero_to_seven, _mm256_set1_epi32(rem_probes));</div>
<div class="line"><span class="lineno">  308</span>      <span class="comment">// Negative after subtract -&gt; use/select</span></div>
<div class="line"><span class="lineno">  309</span>      <span class="comment">// Keep only high bit (logical shift right each by 31).</span></div>
<div class="line"><span class="lineno">  310</span>      k_selector = _mm256_srli_epi32(k_selector, 31);</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>      <span class="comment">// Strip off the 4 bit word address (shift left)</span></div>
<div class="line"><span class="lineno">  313</span>      __m256i bit_addresses = _mm256_slli_epi32(hash_vector, 4);</div>
<div class="line"><span class="lineno">  314</span>      <span class="comment">// And keep only 5-bit (32 - 27) bit-within-32-bit-word addresses.</span></div>
<div class="line"><span class="lineno">  315</span>      bit_addresses = _mm256_srli_epi32(bit_addresses, 27);</div>
<div class="line"><span class="lineno">  316</span>      <span class="comment">// Build a bit mask</span></div>
<div class="line"><span class="lineno">  317</span>      <span class="keyword">const</span> __m256i bit_mask = _mm256_sllv_epi32(k_selector, bit_addresses);</div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>      <span class="comment">// Like ((~value_vector) &amp; bit_mask) == 0)</span></div>
<div class="line"><span class="lineno">  320</span>      <span class="keywordtype">bool</span> match = _mm256_testc_si256(value_vector, bit_mask) != 0;</div>
<div class="line"><span class="lineno">  321</span> </div>
<div class="line"><span class="lineno">  322</span>      <span class="comment">// This check first so that it&#39;s easy for branch predictor to optimize</span></div>
<div class="line"><span class="lineno">  323</span>      <span class="comment">// num_probes &lt;= 8 case, making it free of unpredictable branches.</span></div>
<div class="line"><span class="lineno">  324</span>      <span class="keywordflow">if</span> (rem_probes &lt;= 8) {</div>
<div class="line"><span class="lineno">  325</span>        <span class="keywordflow">return</span> match;</div>
<div class="line"><span class="lineno">  326</span>      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!match) {</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  328</span>      }</div>
<div class="line"><span class="lineno">  329</span>      <span class="comment">// otherwise</span></div>
<div class="line"><span class="lineno">  330</span>      <span class="comment">// Need another iteration. 0xab25f4c1 == golden ratio to the 8th power</span></div>
<div class="line"><span class="lineno">  331</span>      h *= 0xab25f4c1;</div>
<div class="line"><span class="lineno">  332</span>      rem_probes -= 8;</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_probes; ++i, h *= uint32_t{0x9e3779b9}) {</div>
<div class="line"><span class="lineno">  336</span>      <span class="comment">// 9-bit address within 512 bit cache line</span></div>
<div class="line"><span class="lineno">  337</span>      <span class="keywordtype">int</span> bitpos = h &gt;&gt; (32 - 9);</div>
<div class="line"><span class="lineno">  338</span>      <span class="keywordflow">if</span> ((data_at_cache_line[bitpos &gt;&gt; 3] &amp; (<span class="keywordtype">char</span>(1) &lt;&lt; (bitpos &amp; 7))) == 0) {</div>
<div class="line"><span class="lineno">  339</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  340</span>      }</div>
<div class="line"><span class="lineno">  341</span>    }</div>
<div class="line"><span class="lineno">  342</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  343</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  344</span>  }</div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a22445781f97e973e37fc80b04d4a641a_icgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a22445781f97e973e37fc80b04d4a641a_icgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a22445781f97e973e37fc80b04d4a641a_icgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_a22445781f97e973e37fc80b04d4a641a_icgraph">
<area shape="rect" title=" " alt="" coords="235,5,416,67"/>
<area shape="rect" href="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html#a7cf0554f75d79e9695304cdd872374ec" title=" " alt="" coords="5,5,187,67"/>
<area shape="poly" title=" " alt="" coords="219,39,187,39,187,34,219,34"/>
</map>
</div>

</div>
</div>
<a id="ab5cc7f54e697021255be77dafe5fff2f" name="ab5cc7f54e697021255be77dafe5fff2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5cc7f54e697021255be77dafe5fff2f">&#9670;&#160;</a></span>PrepareHash()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ROCKSDB_NAMESPACE::FastLocalBloomImpl::PrepareHash </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>h1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>len_bytes</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>byte_offset</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a> 파일의 <a class="el" href="../../dd/df6/bloom__impl_8h_source.html#l00216">216</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  218</span>                                                          {</div>
<div class="line"><span class="lineno">  219</span>    uint32_t bytes_to_cache_line = <a class="code hl_function" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9">FastRange32</a>(h1, len_bytes &gt;&gt; 6) &lt;&lt; 6;</div>
<div class="line"><span class="lineno">  220</span>    <a class="code hl_define" href="../../dc/d7c/port__posix_8h.html#a4ab872a9f47760fa61d748ac66017609">PREFETCH</a>(data + bytes_to_cache_line, 0 <span class="comment">/* rw */</span>, 1 <span class="comment">/* locality */</span>);</div>
<div class="line"><span class="lineno">  221</span>    <a class="code hl_define" href="../../dc/d7c/port__posix_8h.html#a4ab872a9f47760fa61d748ac66017609">PREFETCH</a>(data + bytes_to_cache_line + 63, 0 <span class="comment">/* rw */</span>, 1 <span class="comment">/* locality */</span>);</div>
<div class="line"><span class="lineno">  222</span>    *byte_offset = bytes_to_cache_line;</div>
<div class="line"><span class="lineno">  223</span>  }</div>
<div class="ttc" id="aport__posix_8h_html_a4ab872a9f47760fa61d748ac66017609"><div class="ttname"><a href="../../dc/d7c/port__posix_8h.html#a4ab872a9f47760fa61d748ac66017609">PREFETCH</a></div><div class="ttdeci">#define PREFETCH(addr, rw, locality)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d7c/port__posix_8h_source.html#l00226">port_posix.h:226</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ab5cc7f54e697021255be77dafe5fff2f_cgraph.png" border="0" usemap="#ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ab5cc7f54e697021255be77dafe5fff2f_cgraph" alt=""/></div>
<map name="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ab5cc7f54e697021255be77dafe5fff2f_cgraph" id="ad2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl_ab5cc7f54e697021255be77dafe5fff2f_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,187,67"/>
<area shape="rect" href="../../da/df2/hash__test_8cc.html#ace9094df44a43910378b2cb2b0dc71c9" title=" " alt="" coords="235,22,340,50"/>
<area shape="poly" title=" " alt="" coords="187,34,219,34,219,39,187,39"/>
</map>
</div>

</div>
</div>
<hr/>이 클래스에 대한 문서화 페이지는 다음의 파일로부터 생성되었습니다.:<ul>
<li>util/<a class="el" href="../../dd/df6/bloom__impl_8h_source.html">bloom_impl.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/d23/namespaceROCKSDB__NAMESPACE.html">ROCKSDB_NAMESPACE</a></li><li class="navelem"><a class="el" href="../../d2/d2d/classROCKSDB__NAMESPACE_1_1FastLocalBloomImpl.html">FastLocalBloomImpl</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
