<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RocksDB Doxygen: db_crashtest 네임스페이스 참조</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RocksDB Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 다음에 의해 생성됨 :  Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','검색',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d8b/namespacedb__crashtest.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">로딩중...</div>
<div class="SRStatus" id="Searching">검색중...</div>
<div class="SRStatus" id="NoMatches">일치하는것 없음</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">함수</a> &#124;
<a href="#var-members">변수</a>  </div>
  <div class="headertitle"><div class="title">db_crashtest 네임스페이스 참조</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
함수</h2></td></tr>
<tr class="memitem:a602c9e7b0779f85e1ae8aeb270c56629" id="r_a602c9e7b0779f85e1ae8aeb270c56629"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a602c9e7b0779f85e1ae8aeb270c56629">finalize_and_sanitize</a> (src_params)</td></tr>
<tr class="separator:a602c9e7b0779f85e1ae8aeb270c56629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a247dfd419bcf1647f7fda1921f31b826" id="r_a247dfd419bcf1647f7fda1921f31b826"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a247dfd419bcf1647f7fda1921f31b826">gen_cmd_params</a> (args)</td></tr>
<tr class="separator:a247dfd419bcf1647f7fda1921f31b826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff39856804a257b88f48247f250f9dcc" id="r_aff39856804a257b88f48247f250f9dcc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aff39856804a257b88f48247f250f9dcc">gen_cmd</a> (params, unknown_params)</td></tr>
<tr class="separator:aff39856804a257b88f48247f250f9dcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7ec292b759c920cb0aad1b63c6a57f" id="r_aae7ec292b759c920cb0aad1b63c6a57f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aae7ec292b759c920cb0aad1b63c6a57f">execute_cmd</a> (cmd, timeout=None, timeout_pstack=False)</td></tr>
<tr class="separator:aae7ec292b759c920cb0aad1b63c6a57f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a855292afa58d698d3609bd64e7694a39" id="r_a855292afa58d698d3609bd64e7694a39"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a855292afa58d698d3609bd64e7694a39">print_output_and_exit_on_error</a> (stdout, stderr, print_stderr_separately=False)</td></tr>
<tr class="separator:a855292afa58d698d3609bd64e7694a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c647a1669515481b02f35a6cdf5629" id="r_ae7c647a1669515481b02f35a6cdf5629"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7c647a1669515481b02f35a6cdf5629">cleanup_after_success</a> (<a class="el" href="../../d7/d62/c__test_8c.html#a75d845559336df6843f3b599960f89d2">dbname</a>)</td></tr>
<tr class="separator:ae7c647a1669515481b02f35a6cdf5629"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a55660bae4af1fe3c0ae39ee41f9fe2" id="r_a2a55660bae4af1fe3c0ae39ee41f9fe2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a55660bae4af1fe3c0ae39ee41f9fe2">blackbox_crash_main</a> (args, unknown_args)</td></tr>
<tr class="separator:a2a55660bae4af1fe3c0ae39ee41f9fe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a44897f5677909667a816f056531cc" id="r_a36a44897f5677909667a816f056531cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36a44897f5677909667a816f056531cc">whitebox_crash_main</a> (args, unknown_args)</td></tr>
<tr class="separator:a36a44897f5677909667a816f056531cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee4bef8cdb0b98b70b80a7f4b150a3df" id="r_aee4bef8cdb0b98b70b80a7f4b150a3df"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aee4bef8cdb0b98b70b80a7f4b150a3df">main</a> ()</td></tr>
<tr class="separator:aee4bef8cdb0b98b70b80a7f4b150a3df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
변수</h2></td></tr>
<tr class="memitem:a8915980076368f9dea78b2130c60260f" id="r_a8915980076368f9dea78b2130c60260f"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8915980076368f9dea78b2130c60260f">default_params</a></td></tr>
<tr class="separator:a8915980076368f9dea78b2130c60260f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead73131f2c205b8b0ce42492baa6013" id="r_aead73131f2c205b8b0ce42492baa6013"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aead73131f2c205b8b0ce42492baa6013">multiops_txn_default_params</a></td></tr>
<tr class="separator:aead73131f2c205b8b0ce42492baa6013"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a547f1aad31bd6957c7db475bbc0153ac" id="r_a547f1aad31bd6957c7db475bbc0153ac"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a547f1aad31bd6957c7db475bbc0153ac">multiops_wc_txn_params</a></td></tr>
<tr class="separator:a547f1aad31bd6957c7db475bbc0153ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ce92da39a98e365b109635d6f9b5d04" id="r_a7ce92da39a98e365b109635d6f9b5d04"><td class="memItemLeft" align="right" valign="top">dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7ce92da39a98e365b109635d6f9b5d04">multiops_wp_txn_params</a></td></tr>
<tr class="separator:a7ce92da39a98e365b109635d6f9b5d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">함수 문서화</h2>
<a id="a2a55660bae4af1fe3c0ae39ee41f9fe2" name="a2a55660bae4af1fe3c0ae39ee41f9fe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a55660bae4af1fe3c0ae39ee41f9fe2">&#9670;&#160;</a></span>blackbox_crash_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.blackbox_crash_main </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>args</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unknown_args</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01153">1153</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1153</span><span class="keyword">def </span>blackbox_crash_main(args, unknown_args):</div>
<div class="line"><span class="lineno"> 1154</span>    cmd_params = gen_cmd_params(args)</div>
<div class="line"><span class="lineno"> 1155</span>    dbname = get_dbname(<span class="stringliteral">&quot;blackbox&quot;</span>)</div>
<div class="line"><span class="lineno"> 1156</span>    exit_time = time.time() + cmd_params[<span class="stringliteral">&quot;duration&quot;</span>]</div>
<div class="line"><span class="lineno"> 1157</span> </div>
<div class="line"><span class="lineno"> 1158</span>    print(</div>
<div class="line"><span class="lineno"> 1159</span>        <span class="stringliteral">&quot;Running blackbox-crash-test with \n&quot;</span></div>
<div class="line"><span class="lineno"> 1160</span>        + <span class="stringliteral">&quot;interval_between_crash=&quot;</span></div>
<div class="line"><span class="lineno"> 1161</span>        + str(cmd_params[<span class="stringliteral">&quot;interval&quot;</span>])</div>
<div class="line"><span class="lineno"> 1162</span>        + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1163</span>        + <span class="stringliteral">&quot;total-duration=&quot;</span></div>
<div class="line"><span class="lineno"> 1164</span>        + str(cmd_params[<span class="stringliteral">&quot;duration&quot;</span>])</div>
<div class="line"><span class="lineno"> 1165</span>        + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1166</span>    )</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>    <span class="keywordflow">while</span> time.time() &lt; exit_time:</div>
<div class="line"><span class="lineno"> 1169</span>        cmd = gen_cmd(</div>
<div class="line"><span class="lineno"> 1170</span>            dict(list(cmd_params.items()) + list({<span class="stringliteral">&quot;db&quot;</span>: dbname}.items())), unknown_args</div>
<div class="line"><span class="lineno"> 1171</span>        )</div>
<div class="line"><span class="lineno"> 1172</span> </div>
<div class="line"><span class="lineno"> 1173</span>        hit_timeout, retcode, outs, errs = execute_cmd(cmd, cmd_params[<span class="stringliteral">&quot;interval&quot;</span>])</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> hit_timeout:</div>
<div class="line"><span class="lineno"> 1176</span>            print(<span class="stringliteral">&quot;Exit Before Killing&quot;</span>)</div>
<div class="line"><span class="lineno"> 1177</span>            print_output_and_exit_on_error(outs, errs, args.print_stderr_separately)</div>
<div class="line"><span class="lineno"> 1178</span>            sys.exit(2)</div>
<div class="line"><span class="lineno"> 1179</span> </div>
<div class="line"><span class="lineno"> 1180</span>        print_output_and_exit_on_error(outs, errs, args.print_stderr_separately)</div>
<div class="line"><span class="lineno"> 1181</span> </div>
<div class="line"><span class="lineno"> 1182</span>        time.sleep(1)  <span class="comment"># time to stabilize before the next run</span></div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>        time.sleep(1)  <span class="comment"># time to stabilize before the next run</span></div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>    <span class="comment"># We should run the test one more time with VerifyOnly setup and no-timeout</span></div>
<div class="line"><span class="lineno"> 1187</span>    <span class="comment"># Only do this if the tests are not failed for total-duration</span></div>
<div class="line"><span class="lineno"> 1188</span>    print(<span class="stringliteral">&quot;Running final time for verification&quot;</span>)</div>
<div class="line"><span class="lineno"> 1189</span>    cmd_params.update({<span class="stringliteral">&quot;verification_only&quot;</span>: 1})</div>
<div class="line"><span class="lineno"> 1190</span>    cmd_params.update({<span class="stringliteral">&quot;skip_verifydb&quot;</span>: 0})</div>
<div class="line"><span class="lineno"> 1191</span> </div>
<div class="line"><span class="lineno"> 1192</span>    cmd = gen_cmd(</div>
<div class="line"><span class="lineno"> 1193</span>        dict(list(cmd_params.items()) + list({<span class="stringliteral">&quot;db&quot;</span>: dbname}.items())), unknown_args</div>
<div class="line"><span class="lineno"> 1194</span>    )</div>
<div class="line"><span class="lineno"> 1195</span>    hit_timeout, retcode, outs, errs = execute_cmd(</div>
<div class="line"><span class="lineno"> 1196</span>        cmd, cmd_params[<span class="stringliteral">&quot;verify_timeout&quot;</span>], <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1197</span>    )</div>
<div class="line"><span class="lineno"> 1198</span> </div>
<div class="line"><span class="lineno"> 1199</span>    <span class="comment"># For the final run</span></div>
<div class="line"><span class="lineno"> 1200</span>    print_output_and_exit_on_error(outs, errs, args.print_stderr_separately)</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>    <span class="comment"># we need to clean up after ourselves -- only do this on test success</span></div>
<div class="line"><span class="lineno"> 1203</span>    cleanup_after_success(dbname)</div>
<div class="line"><span class="lineno"> 1204</span> </div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span><span class="comment"># This python script runs db_stress multiple times. Some runs with</span></div>
<div class="line"><span class="lineno"> 1207</span><span class="comment"># kill_random_test that causes rocksdb to crash at various points in code.</span></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_cgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_cgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_cgraph" id="ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_cgraph">
<area shape="rect" title=" " alt="" coords="5,117,173,162"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#ae7c647a1669515481b02f35a6cdf5629" title=" " alt="" coords="239,5,398,50"/>
<area shape="poly" title=" " alt="" coords="123,115,168,87,219,60,233,54,235,59,222,65,171,92,126,119"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aae7ec292b759c920cb0aad1b63c6a57f" title=" " alt="" coords="221,74,416,102"/>
<area shape="poly" title=" " alt="" coords="172,118,239,103,240,108,173,123"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aff39856804a257b88f48247f250f9dcc" title=" " alt="" coords="235,126,402,154"/>
<area shape="poly" title=" " alt="" coords="173,137,219,137,219,142,173,142"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a247dfd419bcf1647f7fda1921f31b826" title=" " alt="" coords="235,177,402,222"/>
<area shape="poly" title=" " alt="" coords="173,159,220,171,219,176,172,164"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a855292afa58d698d3609bd64e7694a39" title=" " alt="" coords="221,247,416,291"/>
<area shape="poly" title=" " alt="" coords="118,160,165,196,222,232,233,238,231,242,219,237,162,201,115,164"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a602c9e7b0779f85e1ae8aeb270c56629" title=" " alt="" coords="464,117,620,162"/>
<area shape="poly" title=" " alt="" coords="403,137,449,137,449,142,403,142"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_icgraph" id="ad2/d8b/namespacedb__crashtest_a2a55660bae4af1fe3c0ae39ee41f9fe2_icgraph">
<area shape="rect" title=" " alt="" coords="195,21,362,66"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,29,147,57"/>
<area shape="poly" title=" " alt="" coords="179,46,147,46,147,40,179,40"/>
<area shape="poly" title=" " alt="" coords="110,16,98,10,76,8,55,10,44,15,41,20,46,27,41,30,35,20,40,11,54,5,76,3,100,5,113,12"/>
</map>
</div>

</div>
</div>
<a id="ae7c647a1669515481b02f35a6cdf5629" name="ae7c647a1669515481b02f35a6cdf5629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7c647a1669515481b02f35a6cdf5629">&#9670;&#160;</a></span>cleanup_after_success()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.cleanup_after_success </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>dbname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01141">1141</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1141</span><span class="keyword">def </span>cleanup_after_success(dbname):</div>
<div class="line"><span class="lineno"> 1142</span>    shutil.rmtree(dbname, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1143</span>    <span class="keywordflow">if</span> cleanup_cmd <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1144</span>        print(<span class="stringliteral">&quot;Running DB cleanup command - %s\n&quot;</span> % cleanup_cmd)</div>
<div class="line"><span class="lineno"> 1145</span>        ret = os.system(cleanup_cmd)</div>
<div class="line"><span class="lineno"> 1146</span>        <span class="keywordflow">if</span> ret != 0:</div>
<div class="line"><span class="lineno"> 1147</span>            print(<span class="stringliteral">&quot;TEST FAILED. DB cleanup returned error %d\n&quot;</span> % ret)</div>
<div class="line"><span class="lineno"> 1148</span>            sys.exit(1)</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span> </div>
<div class="line"><span class="lineno"> 1151</span><span class="comment"># This script runs and kills db_stress multiple times. It checks consistency</span></div>
<div class="line"><span class="lineno"> 1152</span><span class="comment"># in case of unsafe crashes in RocksDB.</span></div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_ae7c647a1669515481b02f35a6cdf5629_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_ae7c647a1669515481b02f35a6cdf5629_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_ae7c647a1669515481b02f35a6cdf5629_icgraph" id="ad2/d8b/namespacedb__crashtest_ae7c647a1669515481b02f35a6cdf5629_icgraph">
<area shape="rect" title=" " alt="" coords="411,40,570,85"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="396,49,362,44,363,39,396,44"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="396,80,364,86,363,81,395,75"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="aae7ec292b759c920cb0aad1b63c6a57f" name="aae7ec292b759c920cb0aad1b63c6a57f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae7ec292b759c920cb0aad1b63c6a57f">&#9670;&#160;</a></span>execute_cmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.execute_cmd </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>cmd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>timeout</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>timeout_pstack</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01108">1108</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1108</span><span class="keyword">def </span>execute_cmd(cmd, timeout=None, timeout_pstack=False):</div>
<div class="line"><span class="lineno"> 1109</span>    child = subprocess.Popen(cmd, stderr=subprocess.PIPE, stdout=subprocess.PIPE)</div>
<div class="line"><span class="lineno"> 1110</span>    print(<span class="stringliteral">&quot;Running db_stress with pid=%d: %s\n\n&quot;</span> % (child.pid, <span class="stringliteral">&quot; &quot;</span>.join(cmd)))</div>
<div class="line"><span class="lineno"> 1111</span>    pid = child.pid</div>
<div class="line"><span class="lineno"> 1112</span> </div>
<div class="line"><span class="lineno"> 1113</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1114</span>        outs, errs = child.communicate(timeout=timeout)</div>
<div class="line"><span class="lineno"> 1115</span>        hit_timeout = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1116</span>        print(<span class="stringliteral">&quot;WARNING: db_stress ended before kill: exitcode=%d\n&quot;</span> % child.returncode)</div>
<div class="line"><span class="lineno"> 1117</span>    <span class="keywordflow">except</span> subprocess.TimeoutExpired:</div>
<div class="line"><span class="lineno"> 1118</span>        hit_timeout = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1119</span>        <span class="keywordflow">if</span> timeout_pstack:</div>
<div class="line"><span class="lineno"> 1120</span>            os.system(<span class="stringliteral">&quot;pstack %d&quot;</span> % pid)</div>
<div class="line"><span class="lineno"> 1121</span>        child.kill()</div>
<div class="line"><span class="lineno"> 1122</span>        print(<span class="stringliteral">&quot;KILLED %d\n&quot;</span> % child.pid)</div>
<div class="line"><span class="lineno"> 1123</span>        outs, errs = child.communicate()</div>
<div class="line"><span class="lineno"> 1124</span> </div>
<div class="line"><span class="lineno"> 1125</span>    <span class="keywordflow">return</span> hit_timeout, child.returncode, outs.decode(<span class="stringliteral">&quot;utf-8&quot;</span>), errs.decode(<span class="stringliteral">&quot;utf-8&quot;</span>)</div>
<div class="line"><span class="lineno"> 1126</span> </div>
<div class="line"><span class="lineno"> 1127</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_aae7ec292b759c920cb0aad1b63c6a57f_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_aae7ec292b759c920cb0aad1b63c6a57f_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_aae7ec292b759c920cb0aad1b63c6a57f_icgraph" id="ad2/d8b/namespacedb__crashtest_aae7ec292b759c920cb0aad1b63c6a57f_icgraph">
<area shape="rect" title=" " alt="" coords="411,48,606,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="398,48,363,43,363,38,398,43"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="398,82,364,87,363,82,397,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="a602c9e7b0779f85e1ae8aeb270c56629" name="a602c9e7b0779f85e1ae8aeb270c56629"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a602c9e7b0779f85e1ae8aeb270c56629">&#9670;&#160;</a></span>finalize_and_sanitize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.finalize_and_sanitize </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>src_params</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l00703">703</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno">  703</span><span class="keyword">def </span>finalize_and_sanitize(src_params):</div>
<div class="line"><span class="lineno">  704</span>    dest_params = {k: v() <span class="keywordflow">if</span> callable(v) <span class="keywordflow">else</span> v <span class="keywordflow">for</span> (k, v) <span class="keywordflow">in</span> src_params.items()}</div>
<div class="line"><span class="lineno">  705</span>    <span class="keywordflow">if</span> is_release_mode():</div>
<div class="line"><span class="lineno">  706</span>        dest_params[<span class="stringliteral">&quot;read_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  707</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;compression_max_dict_bytes&quot;</span>) == 0:</div>
<div class="line"><span class="lineno">  708</span>        dest_params[<span class="stringliteral">&quot;compression_zstd_max_train_bytes&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  709</span>        dest_params[<span class="stringliteral">&quot;compression_max_dict_buffer_bytes&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  710</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;compression_type&quot;</span>) != <span class="stringliteral">&quot;zstd&quot;</span>:</div>
<div class="line"><span class="lineno">  711</span>        dest_params[<span class="stringliteral">&quot;compression_zstd_max_train_bytes&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  712</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;mmap_read&quot;</span>] == 1:</div>
<div class="line"><span class="lineno">  713</span>        dest_params[<span class="stringliteral">&quot;use_direct_io_for_flush_and_compaction&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  714</span>        dest_params[<span class="stringliteral">&quot;use_direct_reads&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  715</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  716</span>        dest_params[<span class="stringliteral">&quot;use_direct_io_for_flush_and_compaction&quot;</span>] == 1</div>
<div class="line"><span class="lineno">  717</span>        <span class="keywordflow">or</span> dest_params[<span class="stringliteral">&quot;use_direct_reads&quot;</span>] == 1</div>
<div class="line"><span class="lineno">  718</span>    ) <span class="keywordflow">and</span> <span class="keywordflow">not</span> is_direct_io_supported(dest_params[<span class="stringliteral">&quot;db&quot;</span>]):</div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">if</span> is_release_mode():</div>
<div class="line"><span class="lineno">  720</span>            print(</div>
<div class="line"><span class="lineno">  721</span>                <span class="stringliteral">&quot;{} does not support direct IO. Disabling use_direct_reads and &quot;</span></div>
<div class="line"><span class="lineno">  722</span>                <span class="stringliteral">&quot;use_direct_io_for_flush_and_compaction.\n&quot;</span>.format(dest_params[<span class="stringliteral">&quot;db&quot;</span>])</div>
<div class="line"><span class="lineno">  723</span>            )</div>
<div class="line"><span class="lineno">  724</span>            dest_params[<span class="stringliteral">&quot;use_direct_reads&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  725</span>            dest_params[<span class="stringliteral">&quot;use_direct_io_for_flush_and_compaction&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  726</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  727</span>            dest_params[<span class="stringliteral">&quot;mock_direct_io&quot;</span>] = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  728</span> </div>
<div class="line"><span class="lineno">  729</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;test_batches_snapshots&quot;</span>] == 1:</div>
<div class="line"><span class="lineno">  730</span>        dest_params[<span class="stringliteral">&quot;enable_compaction_filter&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  731</span>        dest_params[<span class="stringliteral">&quot;inplace_update_support&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  732</span>        <span class="comment"># TODO(hx235): enable test_batches_snapshots with fault injection after stabilizing the CI</span></div>
<div class="line"><span class="lineno">  733</span>        dest_params[<span class="stringliteral">&quot;write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  734</span>        dest_params[<span class="stringliteral">&quot;metadata_write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  735</span>        dest_params[<span class="stringliteral">&quot;read_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  736</span>        dest_params[<span class="stringliteral">&quot;metadata_read_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  737</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;prefix_size&quot;</span>] &lt; 0:</div>
<div class="line"><span class="lineno">  738</span>            dest_params[<span class="stringliteral">&quot;prefix_size&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  739</span> </div>
<div class="line"><span class="lineno">  740</span>    <span class="comment"># BER disables WAL and tests unsynced data loss which</span></div>
<div class="line"><span class="lineno">  741</span>    <span class="comment"># does not work with inplace_update_support.</span></div>
<div class="line"><span class="lineno">  742</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;best_efforts_recovery&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  743</span>        dest_params[<span class="stringliteral">&quot;inplace_update_support&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>    <span class="comment"># Multi-key operations are not currently compatible with transactions or</span></div>
<div class="line"><span class="lineno">  746</span>    <span class="comment"># timestamp.</span></div>
<div class="line"><span class="lineno">  747</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  748</span>        dest_params.get(<span class="stringliteral">&quot;test_batches_snapshots&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  749</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;use_txn&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  750</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;user_timestamp_size&quot;</span>) &gt; 0</div>
<div class="line"><span class="lineno">  751</span>    ):</div>
<div class="line"><span class="lineno">  752</span>        dest_params[<span class="stringliteral">&quot;ingest_external_file_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  753</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  754</span>        dest_params.get(<span class="stringliteral">&quot;test_batches_snapshots&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  755</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;use_txn&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  756</span>    ):</div>
<div class="line"><span class="lineno">  757</span>        dest_params[<span class="stringliteral">&quot;delpercent&quot;</span>] += dest_params[<span class="stringliteral">&quot;delrangepercent&quot;</span>]</div>
<div class="line"><span class="lineno">  758</span>        dest_params[<span class="stringliteral">&quot;delrangepercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  759</span>    <span class="comment"># Since the value of inplace_update_support needs to be fixed across runs,</span></div>
<div class="line"><span class="lineno">  760</span>    <span class="comment"># we disable other incompatible options here instead of disabling</span></div>
<div class="line"><span class="lineno">  761</span>    <span class="comment"># inplace_update_support based on other option values, which may change</span></div>
<div class="line"><span class="lineno">  762</span>    <span class="comment"># across runs.</span></div>
<div class="line"><span class="lineno">  763</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;inplace_update_support&quot;</span>] == 1:</div>
<div class="line"><span class="lineno">  764</span>        dest_params[<span class="stringliteral">&quot;delpercent&quot;</span>] += dest_params[<span class="stringliteral">&quot;delrangepercent&quot;</span>]</div>
<div class="line"><span class="lineno">  765</span>        dest_params[<span class="stringliteral">&quot;delrangepercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  766</span>        dest_params[<span class="stringliteral">&quot;readpercent&quot;</span>] += dest_params[<span class="stringliteral">&quot;prefixpercent&quot;</span>]</div>
<div class="line"><span class="lineno">  767</span>        dest_params[<span class="stringliteral">&quot;prefixpercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  768</span>        dest_params[<span class="stringliteral">&quot;allow_concurrent_memtable_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  769</span>        <span class="comment"># inplace_update_support does not update sequence number. Our stress test recovery</span></div>
<div class="line"><span class="lineno">  770</span>        <span class="comment"># logic for unsynced data loss relies on max sequence number stored</span></div>
<div class="line"><span class="lineno">  771</span>        <span class="comment"># in MANIFEST, so they don&#39;t work together.</span></div>
<div class="line"><span class="lineno">  772</span>        dest_params[<span class="stringliteral">&quot;sync_fault_injection&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  773</span>        dest_params[<span class="stringliteral">&quot;disable_wal&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  774</span>        dest_params[<span class="stringliteral">&quot;manual_wal_flush_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  775</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  776</span>        dest_params.get(<span class="stringliteral">&quot;sync_fault_injection&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  777</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;disable_wal&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  778</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;manual_wal_flush_one_in&quot;</span>) &gt; 0</div>
<div class="line"><span class="lineno">  779</span>    ):</div>
<div class="line"><span class="lineno">  780</span>        <span class="comment"># File ingestion does not guarantee prefix-recoverability when unsynced</span></div>
<div class="line"><span class="lineno">  781</span>        <span class="comment"># data can be lost. Ingesting a file syncs data immediately that is</span></div>
<div class="line"><span class="lineno">  782</span>        <span class="comment"># newer than unsynced memtable data that can be lost on restart.</span></div>
<div class="line"><span class="lineno">  783</span>        <span class="comment">#</span></div>
<div class="line"><span class="lineno">  784</span>        <span class="comment"># Even if the above issue is fixed or worked around, our</span></div>
<div class="line"><span class="lineno">  785</span>        <span class="comment"># trace-and-replay does not trace file ingestion, so in its current form</span></div>
<div class="line"><span class="lineno">  786</span>        <span class="comment"># it would not recover the expected state to the correct point in time.</span></div>
<div class="line"><span class="lineno">  787</span>        dest_params[<span class="stringliteral">&quot;ingest_external_file_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  788</span>        <span class="comment"># The `DbStressCompactionFilter` can apply memtable updates to SST</span></div>
<div class="line"><span class="lineno">  789</span>        <span class="comment"># files, which would be problematic when unsynced data can be lost in</span></div>
<div class="line"><span class="lineno">  790</span>        <span class="comment"># crash recoveries.</span></div>
<div class="line"><span class="lineno">  791</span>        dest_params[<span class="stringliteral">&quot;enable_compaction_filter&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  792</span>    <span class="comment"># Remove the following once write-prepared/write-unprepared with/without</span></div>
<div class="line"><span class="lineno">  793</span>    <span class="comment"># unordered write supports timestamped snapshots</span></div>
<div class="line"><span class="lineno">  794</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;create_timestamped_snapshot_one_in&quot;</span>, 0) &gt; 0:</div>
<div class="line"><span class="lineno">  795</span>        dest_params[<span class="stringliteral">&quot;txn_write_policy&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  796</span>        dest_params[<span class="stringliteral">&quot;unordered_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  797</span>    <span class="comment"># Only under WritePrepared txns, unordered_write would provide the same guarnatees as vanilla rocksdb</span></div>
<div class="line"><span class="lineno">  798</span>    <span class="comment"># unordered_write is only enabled with --txn, and txn_params disables inplace_update_support, so</span></div>
<div class="line"><span class="lineno">  799</span>    <span class="comment"># setting allow_concurrent_memtable_write=1 won&#39;t conflcit with inplace_update_support.</span></div>
<div class="line"><span class="lineno">  800</span>    <span class="comment"># don&#39;t overwrite txn_write_policy</span></div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;unordered_write&quot;</span>, 0) == 1:</div>
<div class="line"><span class="lineno">  802</span>        <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;txn_write_policy&quot;</span>, 0) == 1:</div>
<div class="line"><span class="lineno">  803</span>            dest_params[<span class="stringliteral">&quot;allow_concurrent_memtable_write&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  804</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  805</span>            dest_params[<span class="stringliteral">&quot;unordered_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  806</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;disable_wal&quot;</span>, 0) == 1:</div>
<div class="line"><span class="lineno">  807</span>        dest_params[<span class="stringliteral">&quot;atomic_flush&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  808</span>        dest_params[<span class="stringliteral">&quot;sync&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  809</span>        dest_params[<span class="stringliteral">&quot;write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  810</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;open_files&quot;</span>, 1) != -1:</div>
<div class="line"><span class="lineno">  811</span>        <span class="comment"># Compaction TTL and periodic compactions are only compatible</span></div>
<div class="line"><span class="lineno">  812</span>        <span class="comment"># with open_files = -1</span></div>
<div class="line"><span class="lineno">  813</span>        dest_params[<span class="stringliteral">&quot;compaction_ttl&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  814</span>        dest_params[<span class="stringliteral">&quot;periodic_compaction_seconds&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  815</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;compaction_style&quot;</span>, 0) == 2:</div>
<div class="line"><span class="lineno">  816</span>        <span class="comment"># Disable compaction TTL in FIFO compaction, because right</span></div>
<div class="line"><span class="lineno">  817</span>        <span class="comment"># now assertion failures are triggered.</span></div>
<div class="line"><span class="lineno">  818</span>        dest_params[<span class="stringliteral">&quot;compaction_ttl&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  819</span>        dest_params[<span class="stringliteral">&quot;periodic_compaction_seconds&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  820</span>        <span class="comment"># Disable irrelevant tiering options</span></div>
<div class="line"><span class="lineno">  821</span>        dest_params[<span class="stringliteral">&quot;preclude_last_level_data_seconds&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  822</span>        dest_params[<span class="stringliteral">&quot;last_level_temperature&quot;</span>] = <span class="stringliteral">&quot;kUnknown&quot;</span></div>
<div class="line"><span class="lineno">  823</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  824</span>        <span class="comment"># Disable irrelevant tiering options</span></div>
<div class="line"><span class="lineno">  825</span>        dest_params[<span class="stringliteral">&quot;file_temperature_age_thresholds&quot;</span>] = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  826</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;partition_filters&quot;</span>] == 1:</div>
<div class="line"><span class="lineno">  827</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;index_type&quot;</span>] != 2:</div>
<div class="line"><span class="lineno">  828</span>            dest_params[<span class="stringliteral">&quot;partition_filters&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  829</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;atomic_flush&quot;</span>, 0) == 1:</div>
<div class="line"><span class="lineno">  830</span>        <span class="comment"># disable pipelined write when atomic flush is used.</span></div>
<div class="line"><span class="lineno">  831</span>        dest_params[<span class="stringliteral">&quot;enable_pipelined_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  832</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;sst_file_manager_bytes_per_sec&quot;</span>, 0) == 0:</div>
<div class="line"><span class="lineno">  833</span>        dest_params[<span class="stringliteral">&quot;sst_file_manager_bytes_per_truncate&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  834</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;prefix_size&quot;</span>) == -1:</div>
<div class="line"><span class="lineno">  835</span>        dest_params[<span class="stringliteral">&quot;readpercent&quot;</span>] += dest_params.get(<span class="stringliteral">&quot;prefixpercent&quot;</span>, 20)</div>
<div class="line"><span class="lineno">  836</span>        dest_params[<span class="stringliteral">&quot;prefixpercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  837</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  838</span>        dest_params.get(<span class="stringliteral">&quot;prefix_size&quot;</span>) == -1</div>
<div class="line"><span class="lineno">  839</span>        <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;memtable_whole_key_filtering&quot;</span>) == 0</div>
<div class="line"><span class="lineno">  840</span>    ):</div>
<div class="line"><span class="lineno">  841</span>        dest_params[<span class="stringliteral">&quot;memtable_prefix_bloom_size_ratio&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  842</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;two_write_queues&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  843</span>        dest_params[<span class="stringliteral">&quot;enable_pipelined_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  844</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;best_efforts_recovery&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  845</span>        dest_params[<span class="stringliteral">&quot;disable_wal&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  846</span>        dest_params[<span class="stringliteral">&quot;enable_compaction_filter&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  847</span>        dest_params[<span class="stringliteral">&quot;sync&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  848</span>        dest_params[<span class="stringliteral">&quot;write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  849</span>        dest_params[<span class="stringliteral">&quot;skip_verifydb&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  850</span>        dest_params[<span class="stringliteral">&quot;verify_db_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  851</span>    <span class="comment"># For TransactionDB, correctness testing with unsync data loss is currently</span></div>
<div class="line"><span class="lineno">  852</span>    <span class="comment"># compatible with only write committed policy</span></div>
<div class="line"><span class="lineno">  853</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;use_txn&quot;</span>) == 1 <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;txn_write_policy&quot;</span>, 0) != 0:</div>
<div class="line"><span class="lineno">  854</span>        dest_params[<span class="stringliteral">&quot;sync_fault_injection&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  855</span>        dest_params[<span class="stringliteral">&quot;disable_wal&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  856</span>        dest_params[<span class="stringliteral">&quot;manual_wal_flush_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  857</span>        <span class="comment"># Wide-column pessimistic transaction APIs are initially supported for</span></div>
<div class="line"><span class="lineno">  858</span>        <span class="comment"># WriteCommitted only</span></div>
<div class="line"><span class="lineno">  859</span>        dest_params[<span class="stringliteral">&quot;use_put_entity_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  860</span>        <span class="comment"># MultiCfIterator is currently only compatible with write committed policy</span></div>
<div class="line"><span class="lineno">  861</span>        dest_params[<span class="stringliteral">&quot;use_multi_cf_iterator&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  862</span>        <span class="comment"># only works with write committed policy</span></div>
<div class="line"><span class="lineno">  863</span>        dest_params[<span class="stringliteral">&quot;commit_bypass_memtable_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  864</span>    <span class="comment"># TODO(hx235): enable test_multi_ops_txns with fault injection after stabilizing the CI</span></div>
<div class="line"><span class="lineno">  865</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;test_multi_ops_txns&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  866</span>        dest_params[<span class="stringliteral">&quot;write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  867</span>        dest_params[<span class="stringliteral">&quot;metadata_write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  868</span>        dest_params[<span class="stringliteral">&quot;read_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  869</span>        dest_params[<span class="stringliteral">&quot;metadata_read_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  870</span>    <span class="comment"># Wide column stress tests require FullMergeV3</span></div>
<div class="line"><span class="lineno">  871</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;use_put_entity_one_in&quot;</span>] != 0:</div>
<div class="line"><span class="lineno">  872</span>        dest_params[<span class="stringliteral">&quot;use_full_merge_v1&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  873</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;file_checksum_impl&quot;</span>] == <span class="stringliteral">&quot;none&quot;</span>:</div>
<div class="line"><span class="lineno">  874</span>        dest_params[<span class="stringliteral">&quot;verify_file_checksums_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  875</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;write_fault_one_in&quot;</span>] &gt; 0:</div>
<div class="line"><span class="lineno">  876</span>        <span class="comment"># background work may be disabled while DB is resuming after some error</span></div>
<div class="line"><span class="lineno">  877</span>        dest_params[<span class="stringliteral">&quot;max_write_buffer_number&quot;</span>] = max(</div>
<div class="line"><span class="lineno">  878</span>            dest_params[<span class="stringliteral">&quot;max_write_buffer_number&quot;</span>], 10</div>
<div class="line"><span class="lineno">  879</span>        )</div>
<div class="line"><span class="lineno">  880</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;secondary_cache_uri&quot;</span>].find(<span class="stringliteral">&quot;compressed_secondary_cache&quot;</span>) &gt;= 0:</div>
<div class="line"><span class="lineno">  881</span>        dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  882</span>        dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_ratio&quot;</span>] = 0.0</div>
<div class="line"><span class="lineno">  883</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;cache_type&quot;</span>].find(<span class="stringliteral">&quot;tiered_&quot;</span>) &gt;= 0:</div>
<div class="line"><span class="lineno">  884</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>] &gt; 0:</div>
<div class="line"><span class="lineno">  885</span>            dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_ratio&quot;</span>] = float(</div>
<div class="line"><span class="lineno">  886</span>                dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>]</div>
<div class="line"><span class="lineno">  887</span>                / (</div>
<div class="line"><span class="lineno">  888</span>                    dest_params[<span class="stringliteral">&quot;cache_size&quot;</span>]</div>
<div class="line"><span class="lineno">  889</span>                    + dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>]</div>
<div class="line"><span class="lineno">  890</span>                )</div>
<div class="line"><span class="lineno">  891</span>            )</div>
<div class="line"><span class="lineno">  892</span>            dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  893</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  894</span>            dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_ratio&quot;</span>] = 0.0</div>
<div class="line"><span class="lineno">  895</span>            dest_params[<span class="stringliteral">&quot;cache_type&quot;</span>] = dest_params[<span class="stringliteral">&quot;cache_type&quot;</span>].replace(<span class="stringliteral">&quot;tiered_&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><span class="lineno">  896</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  897</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;secondary_cache_uri&quot;</span>]:</div>
<div class="line"><span class="lineno">  898</span>            dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_size&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  899</span>            dest_params[<span class="stringliteral">&quot;compressed_secondary_cache_ratio&quot;</span>] = 0.0</div>
<div class="line"><span class="lineno">  900</span>    <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;use_write_buffer_manager&quot;</span>]:</div>
<div class="line"><span class="lineno">  901</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;cache_size&quot;</span>] &lt;= 0 <span class="keywordflow">or</span> dest_params[<span class="stringliteral">&quot;db_write_buffer_size&quot;</span>] &lt;= 0:</div>
<div class="line"><span class="lineno">  902</span>            dest_params[<span class="stringliteral">&quot;use_write_buffer_manager&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  903</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  904</span>        dest_params[<span class="stringliteral">&quot;user_timestamp_size&quot;</span>] &gt; 0</div>
<div class="line"><span class="lineno">  905</span>        <span class="keywordflow">and</span> dest_params[<span class="stringliteral">&quot;persist_user_defined_timestamps&quot;</span>] == 0</div>
<div class="line"><span class="lineno">  906</span>    ):</div>
<div class="line"><span class="lineno">  907</span>        <span class="comment"># Features that are not compatible with UDT in memtable only feature.</span></div>
<div class="line"><span class="lineno">  908</span>        dest_params[<span class="stringliteral">&quot;enable_blob_files&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  909</span>        dest_params[<span class="stringliteral">&quot;allow_setting_blob_options_dynamically&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  910</span>        dest_params[<span class="stringliteral">&quot;atomic_flush&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  911</span>        dest_params[<span class="stringliteral">&quot;allow_concurrent_memtable_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  912</span>        dest_params[<span class="stringliteral">&quot;block_protection_bytes_per_key&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  913</span>        <span class="comment"># TODO(yuzhangyu): make stress test logic handle this and enable testing</span></div>
<div class="line"><span class="lineno">  914</span>        <span class="comment"># these APIs.</span></div>
<div class="line"><span class="lineno">  915</span>        <span class="comment"># These operations need to compare side to side one operation with another.</span></div>
<div class="line"><span class="lineno">  916</span>        <span class="comment"># It&#39;s hard to guarantee their consistency because when timestamps can be</span></div>
<div class="line"><span class="lineno">  917</span>        <span class="comment"># collapsed, only operations using the same SuperVersion can be consistent</span></div>
<div class="line"><span class="lineno">  918</span>        <span class="comment"># with each other. There is no external APIs to ensure that.</span></div>
<div class="line"><span class="lineno">  919</span>        dest_params[<span class="stringliteral">&quot;use_multiget&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  920</span>        dest_params[<span class="stringliteral">&quot;use_multi_get_entity&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  921</span>        dest_params[<span class="stringliteral">&quot;readpercent&quot;</span>] += dest_params.get(<span class="stringliteral">&quot;iterpercent&quot;</span>, 10)</div>
<div class="line"><span class="lineno">  922</span>        dest_params[<span class="stringliteral">&quot;iterpercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  923</span>        <span class="comment"># Only best efforts recovery test support disabling wal and</span></div>
<div class="line"><span class="lineno">  924</span>        <span class="comment"># disable atomic flush.</span></div>
<div class="line"><span class="lineno">  925</span>        <span class="keywordflow">if</span> dest_params[<span class="stringliteral">&quot;test_best_efforts_recovery&quot;</span>] == 0:</div>
<div class="line"><span class="lineno">  926</span>            dest_params[<span class="stringliteral">&quot;disable_wal&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  927</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;allow_concurrent_memtable_write&quot;</span>, 1) == 1:</div>
<div class="line"><span class="lineno">  928</span>        dest_params[<span class="stringliteral">&quot;memtablerep&quot;</span>] = <span class="stringliteral">&quot;skip_list&quot;</span></div>
<div class="line"><span class="lineno">  929</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  930</span>        dest_params.get(<span class="stringliteral">&quot;enable_compaction_filter&quot;</span>, 0) == 1</div>
<div class="line"><span class="lineno">  931</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;inplace_update_support&quot;</span>, 0) == 1</div>
<div class="line"><span class="lineno">  932</span>    ):</div>
<div class="line"><span class="lineno">  933</span>        <span class="comment"># Compaction filter, inplace update support are incompatible with snapshots. Need to avoid taking</span></div>
<div class="line"><span class="lineno">  934</span>        <span class="comment"># snapshots, as well as avoid operations that use snapshots for</span></div>
<div class="line"><span class="lineno">  935</span>        <span class="comment"># verification.</span></div>
<div class="line"><span class="lineno">  936</span>        dest_params[<span class="stringliteral">&quot;acquire_snapshot_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  937</span>        dest_params[<span class="stringliteral">&quot;compact_range_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  938</span>        <span class="comment"># Redistribute to maintain 100% total</span></div>
<div class="line"><span class="lineno">  939</span>        dest_params[<span class="stringliteral">&quot;readpercent&quot;</span>] += dest_params.get(</div>
<div class="line"><span class="lineno">  940</span>            <span class="stringliteral">&quot;iterpercent&quot;</span>, 10</div>
<div class="line"><span class="lineno">  941</span>        ) + dest_params.get(<span class="stringliteral">&quot;prefixpercent&quot;</span>, 20)</div>
<div class="line"><span class="lineno">  942</span>        dest_params[<span class="stringliteral">&quot;iterpercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  943</span>        dest_params[<span class="stringliteral">&quot;prefixpercent&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  944</span>        dest_params[<span class="stringliteral">&quot;check_multiget_consistency&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  945</span>        dest_params[<span class="stringliteral">&quot;check_multiget_entity_consistency&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  946</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;disable_wal&quot;</span>) == 0:</div>
<div class="line"><span class="lineno">  947</span>        <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;reopen&quot;</span>) &gt; 0 <span class="keywordflow">or</span> (</div>
<div class="line"><span class="lineno">  948</span>            dest_params.get(<span class="stringliteral">&quot;manual_wal_flush_one_in&quot;</span>)</div>
<div class="line"><span class="lineno">  949</span>            <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;column_families&quot;</span>) != 1</div>
<div class="line"><span class="lineno">  950</span>        ):</div>
<div class="line"><span class="lineno">  951</span>            <span class="comment"># Reopen with WAL currently requires persisting WAL data before closing for reopen.</span></div>
<div class="line"><span class="lineno">  952</span>            <span class="comment"># Previous injected WAL write errors may not be cleared by the time of closing and ready</span></div>
<div class="line"><span class="lineno">  953</span>            <span class="comment"># for persisting WAL.</span></div>
<div class="line"><span class="lineno">  954</span>            <span class="comment"># To simplify, we disable any WAL write error injection.</span></div>
<div class="line"><span class="lineno">  955</span>            <span class="comment"># TODO(hx235): support WAL write error injection with reopen</span></div>
<div class="line"><span class="lineno">  956</span>            <span class="comment"># TODO(hx235): support excluding WAL from metadata write fault injection so we don&#39;t</span></div>
<div class="line"><span class="lineno">  957</span>            <span class="comment"># have to disable metadata write fault injection to other file</span></div>
<div class="line"><span class="lineno">  958</span>            <span class="comment">#</span></div>
<div class="line"><span class="lineno">  959</span>            <span class="comment"># WAL write failure can drop buffered WAL data. This can cause</span></div>
<div class="line"><span class="lineno">  960</span>            <span class="comment"># inconsistency when one CF has a successful flush during auto</span></div>
<div class="line"><span class="lineno">  961</span>            <span class="comment"># recovery. Disable the fault injection in this path for now until</span></div>
<div class="line"><span class="lineno">  962</span>            <span class="comment"># we have a fix that allows auto recovery.</span></div>
<div class="line"><span class="lineno">  963</span>            dest_params[<span class="stringliteral">&quot;exclude_wal_from_write_fault_injection&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  964</span>            dest_params[<span class="stringliteral">&quot;metadata_write_fault_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  965</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;disable_wal&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  966</span>        <span class="comment"># disableWAL and recycle_log_file_num options are not mutually</span></div>
<div class="line"><span class="lineno">  967</span>        <span class="comment"># compatible at the moment</span></div>
<div class="line"><span class="lineno">  968</span>        dest_params[<span class="stringliteral">&quot;recycle_log_file_num&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  969</span>    <span class="comment"># Enabling block_align with compression is not supported</span></div>
<div class="line"><span class="lineno">  970</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;block_align&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  971</span>        dest_params[<span class="stringliteral">&quot;compression_type&quot;</span>] = <span class="stringliteral">&quot;none&quot;</span></div>
<div class="line"><span class="lineno">  972</span>        dest_params[<span class="stringliteral">&quot;bottommost_compression_type&quot;</span>] = <span class="stringliteral">&quot;none&quot;</span></div>
<div class="line"><span class="lineno">  973</span>    <span class="comment"># If periodic_compaction_seconds is not set, daily_offpeak_time_utc doesn&#39;t do anything</span></div>
<div class="line"><span class="lineno">  974</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;periodic_compaction_seconds&quot;</span>) == 0:</div>
<div class="line"><span class="lineno">  975</span>        dest_params[<span class="stringliteral">&quot;daily_offpeak_time_utc&quot;</span>] = <span class="stringliteral">&quot;&quot;</span></div>
<div class="line"><span class="lineno">  976</span>    <span class="comment"># `use_put_entity_one_in` cannot be enabled/disabled across runs, modify</span></div>
<div class="line"><span class="lineno">  977</span>    <span class="comment"># `use_timed_put_one_in` option so that they make sense together.</span></div>
<div class="line"><span class="lineno">  978</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;use_put_entity_one_in&quot;</span>) == 1:</div>
<div class="line"><span class="lineno">  979</span>        dest_params[<span class="stringliteral">&quot;use_timed_put_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  980</span>    <span class="keywordflow">elif</span> (</div>
<div class="line"><span class="lineno">  981</span>        dest_params.get(<span class="stringliteral">&quot;use_put_entity_one_in&quot;</span>) &gt; 1</div>
<div class="line"><span class="lineno">  982</span>        <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;use_timed_put_one_in&quot;</span>) == 1</div>
<div class="line"><span class="lineno">  983</span>    ):</div>
<div class="line"><span class="lineno">  984</span>        dest_params[<span class="stringliteral">&quot;use_timed_put_one_in&quot;</span>] = 3</div>
<div class="line"><span class="lineno">  985</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  986</span>        dest_params.get(<span class="stringliteral">&quot;write_dbid_to_manifest&quot;</span>) == 0</div>
<div class="line"><span class="lineno">  987</span>        <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;write_identity_file&quot;</span>) == 0</div>
<div class="line"><span class="lineno">  988</span>    ):</div>
<div class="line"><span class="lineno">  989</span>        <span class="comment"># At least one must be true</span></div>
<div class="line"><span class="lineno">  990</span>        dest_params[<span class="stringliteral">&quot;write_dbid_to_manifest&quot;</span>] = 1</div>
<div class="line"><span class="lineno">  991</span>    <span class="comment"># Checkpoint creation skips flush if the WAL is locked, so enabling lock_wal_one_in</span></div>
<div class="line"><span class="lineno">  992</span>    <span class="comment"># can cause checkpoint verification to fail. So make the two mutually exclusive.</span></div>
<div class="line"><span class="lineno">  993</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;checkpoint_one_in&quot;</span>) != 0:</div>
<div class="line"><span class="lineno">  994</span>        dest_params[<span class="stringliteral">&quot;lock_wal_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno">  995</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno">  996</span>        dest_params.get(<span class="stringliteral">&quot;ingest_external_file_one_in&quot;</span>) == 0</div>
<div class="line"><span class="lineno">  997</span>        <span class="keywordflow">or</span> dest_params.get(<span class="stringliteral">&quot;delrangepercent&quot;</span>) == 0</div>
<div class="line"><span class="lineno">  998</span>    ):</div>
<div class="line"><span class="lineno">  999</span>        dest_params[<span class="stringliteral">&quot;test_ingest_standalone_range_deletion_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1000</span>    <span class="keywordflow">if</span> dest_params.get(<span class="stringliteral">&quot;use_txn&quot;</span>, 0) == 1 <span class="keywordflow">and</span> dest_params.get(<span class="stringliteral">&quot;commit_bypass_memtable_one_in&quot;</span>, 0) &gt; 0:</div>
<div class="line"><span class="lineno"> 1001</span>        dest_params[<span class="stringliteral">&quot;enable_blob_files&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1002</span>        dest_params[<span class="stringliteral">&quot;allow_setting_blob_options_dynamically&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1003</span>        dest_params[<span class="stringliteral">&quot;atomic_flush&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1004</span>        dest_params[<span class="stringliteral">&quot;allow_concurrent_memtable_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1005</span>        dest_params[<span class="stringliteral">&quot;use_put_entity_one_in&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1006</span>        dest_params[<span class="stringliteral">&quot;use_get_entity&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1007</span>        dest_params[<span class="stringliteral">&quot;use_multi_get_entity&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1008</span>        dest_params[<span class="stringliteral">&quot;use_merge&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1009</span>        dest_params[<span class="stringliteral">&quot;use_full_merge_v1&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1010</span>        dest_params[<span class="stringliteral">&quot;enable_pipelined_write&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1011</span>        dest_params[<span class="stringliteral">&quot;use_attribute_group&quot;</span>] = 0</div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>    <span class="keywordflow">return</span> dest_params</div>
<div class="line"><span class="lineno"> 1014</span> </div>
<div class="line"><span class="lineno"> 1015</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a602c9e7b0779f85e1ae8aeb270c56629_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a602c9e7b0779f85e1ae8aeb270c56629_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a602c9e7b0779f85e1ae8aeb270c56629_icgraph" id="ad2/d8b/namespacedb__crashtest_a602c9e7b0779f85e1ae8aeb270c56629_icgraph">
<area shape="rect" title=" " alt="" coords="626,40,783,85"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aff39856804a257b88f48247f250f9dcc" title=" " alt="" coords="411,48,578,76"/>
<area shape="poly" title=" " alt="" coords="611,65,579,65,579,60,611,60"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="396,49,363,44,363,39,396,44"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="396,81,364,86,363,81,395,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="aff39856804a257b88f48247f250f9dcc" name="aff39856804a257b88f48247f250f9dcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff39856804a257b88f48247f250f9dcc">&#9670;&#160;</a></span>gen_cmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.gen_cmd </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>params</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unknown_params</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01073">1073</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1073</span><span class="keyword">def </span>gen_cmd(params, unknown_params):</div>
<div class="line"><span class="lineno"> 1074</span>    finalzied_params = finalize_and_sanitize(params)</div>
<div class="line"><span class="lineno"> 1075</span>    cmd = (</div>
<div class="line"><span class="lineno"> 1076</span>        [stress_cmd]</div>
<div class="line"><span class="lineno"> 1077</span>        + [</div>
<div class="line"><span class="lineno"> 1078</span>            f<span class="stringliteral">&quot;--{k}={v}&quot;</span></div>
<div class="line"><span class="lineno"> 1079</span>            <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> [(k, finalzied_params[k]) <span class="keywordflow">for</span> k <span class="keywordflow">in</span> sorted(finalzied_params)]</div>
<div class="line"><span class="lineno"> 1080</span>            <span class="keywordflow">if</span> k</div>
<div class="line"><span class="lineno"> 1081</span>            <span class="keywordflow">not</span> <span class="keywordflow">in</span> {</div>
<div class="line"><span class="lineno"> 1082</span>                <span class="stringliteral">&quot;test_type&quot;</span>,</div>
<div class="line"><span class="lineno"> 1083</span>                <span class="stringliteral">&quot;simple&quot;</span>,</div>
<div class="line"><span class="lineno"> 1084</span>                <span class="stringliteral">&quot;duration&quot;</span>,</div>
<div class="line"><span class="lineno"> 1085</span>                <span class="stringliteral">&quot;interval&quot;</span>,</div>
<div class="line"><span class="lineno"> 1086</span>                <span class="stringliteral">&quot;random_kill_odd&quot;</span>,</div>
<div class="line"><span class="lineno"> 1087</span>                <span class="stringliteral">&quot;cf_consistency&quot;</span>,</div>
<div class="line"><span class="lineno"> 1088</span>                <span class="stringliteral">&quot;txn&quot;</span>,</div>
<div class="line"><span class="lineno"> 1089</span>                <span class="stringliteral">&quot;optimistic_txn&quot;</span>,</div>
<div class="line"><span class="lineno"> 1090</span>                <span class="stringliteral">&quot;test_best_efforts_recovery&quot;</span>,</div>
<div class="line"><span class="lineno"> 1091</span>                <span class="stringliteral">&quot;enable_ts&quot;</span>,</div>
<div class="line"><span class="lineno"> 1092</span>                <span class="stringliteral">&quot;test_multiops_txn&quot;</span>,</div>
<div class="line"><span class="lineno"> 1093</span>                <span class="stringliteral">&quot;write_policy&quot;</span>,</div>
<div class="line"><span class="lineno"> 1094</span>                <span class="stringliteral">&quot;stress_cmd&quot;</span>,</div>
<div class="line"><span class="lineno"> 1095</span>                <span class="stringliteral">&quot;test_tiered_storage&quot;</span>,</div>
<div class="line"><span class="lineno"> 1096</span>                <span class="stringliteral">&quot;cleanup_cmd&quot;</span>,</div>
<div class="line"><span class="lineno"> 1097</span>                <span class="stringliteral">&quot;skip_tmpdir_check&quot;</span>,</div>
<div class="line"><span class="lineno"> 1098</span>                <span class="stringliteral">&quot;print_stderr_separately&quot;</span>,</div>
<div class="line"><span class="lineno"> 1099</span>                <span class="stringliteral">&quot;verify_timeout&quot;</span>,</div>
<div class="line"><span class="lineno"> 1100</span>            }</div>
<div class="line"><span class="lineno"> 1101</span>            <span class="keywordflow">and</span> v <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno"> 1102</span>        ]</div>
<div class="line"><span class="lineno"> 1103</span>        + unknown_params</div>
<div class="line"><span class="lineno"> 1104</span>    )</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="keywordflow">return</span> cmd</div>
<div class="line"><span class="lineno"> 1106</span> </div>
<div class="line"><span class="lineno"> 1107</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_cgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_cgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_cgraph" id="ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_cgraph">
<area shape="rect" title=" " alt="" coords="5,14,173,42"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a602c9e7b0779f85e1ae8aeb270c56629" title=" " alt="" coords="221,5,377,50"/>
<area shape="poly" title=" " alt="" coords="173,25,205,25,205,30,173,30"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_icgraph" id="ad2/d8b/namespacedb__crashtest_aff39856804a257b88f48247f250f9dcc_icgraph">
<area shape="rect" title=" " alt="" coords="411,48,578,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="396,49,363,44,363,39,396,44"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="396,81,364,86,363,81,395,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="a247dfd419bcf1647f7fda1921f31b826" name="a247dfd419bcf1647f7fda1921f31b826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a247dfd419bcf1647f7fda1921f31b826">&#9670;&#160;</a></span>gen_cmd_params()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.gen_cmd_params </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>args</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01016">1016</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1016</span><span class="keyword">def </span>gen_cmd_params(args):</div>
<div class="line"><span class="lineno"> 1017</span>    params = {}</div>
<div class="line"><span class="lineno"> 1018</span> </div>
<div class="line"><span class="lineno"> 1019</span>    params.update(default_params)</div>
<div class="line"><span class="lineno"> 1020</span>    <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;blackbox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1021</span>        params.update(blackbox_default_params)</div>
<div class="line"><span class="lineno"> 1022</span>    <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;whitebox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1023</span>        params.update(whitebox_default_params)</div>
<div class="line"><span class="lineno"> 1024</span>    <span class="keywordflow">if</span> args.simple:</div>
<div class="line"><span class="lineno"> 1025</span>        params.update(simple_default_params)</div>
<div class="line"><span class="lineno"> 1026</span>        <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;blackbox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1027</span>            params.update(blackbox_simple_default_params)</div>
<div class="line"><span class="lineno"> 1028</span>        <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;whitebox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1029</span>            params.update(whitebox_simple_default_params)</div>
<div class="line"><span class="lineno"> 1030</span>    <span class="keywordflow">if</span> args.cf_consistency:</div>
<div class="line"><span class="lineno"> 1031</span>        params.update(cf_consistency_params)</div>
<div class="line"><span class="lineno"> 1032</span>    <span class="keywordflow">if</span> args.txn:</div>
<div class="line"><span class="lineno"> 1033</span>        params.update(txn_params)</div>
<div class="line"><span class="lineno"> 1034</span>    <span class="keywordflow">if</span> args.optimistic_txn:</div>
<div class="line"><span class="lineno"> 1035</span>        params.update(optimistic_txn_params)</div>
<div class="line"><span class="lineno"> 1036</span>    <span class="keywordflow">if</span> args.test_best_efforts_recovery:</div>
<div class="line"><span class="lineno"> 1037</span>        params.update(best_efforts_recovery_params)</div>
<div class="line"><span class="lineno"> 1038</span>    <span class="keywordflow">if</span> args.enable_ts:</div>
<div class="line"><span class="lineno"> 1039</span>        params.update(ts_params)</div>
<div class="line"><span class="lineno"> 1040</span>    <span class="keywordflow">if</span> args.test_multiops_txn:</div>
<div class="line"><span class="lineno"> 1041</span>        params.update(multiops_txn_default_params)</div>
<div class="line"><span class="lineno"> 1042</span>        <span class="keywordflow">if</span> args.write_policy == <span class="stringliteral">&quot;write_committed&quot;</span>:</div>
<div class="line"><span class="lineno"> 1043</span>            params.update(multiops_wc_txn_params)</div>
<div class="line"><span class="lineno"> 1044</span>        <span class="keywordflow">elif</span> args.write_policy == <span class="stringliteral">&quot;write_prepared&quot;</span>:</div>
<div class="line"><span class="lineno"> 1045</span>            params.update(multiops_wp_txn_params)</div>
<div class="line"><span class="lineno"> 1046</span>    <span class="keywordflow">if</span> args.test_tiered_storage:</div>
<div class="line"><span class="lineno"> 1047</span>        params.update(tiered_params)</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>    <span class="comment"># Best-effort recovery, tiered storage are currently incompatible with BlobDB.</span></div>
<div class="line"><span class="lineno"> 1050</span>    <span class="comment"># Test BE recovery if specified on the command line; otherwise, apply BlobDB</span></div>
<div class="line"><span class="lineno"> 1051</span>    <span class="comment"># related overrides with a 10% chance.</span></div>
<div class="line"><span class="lineno"> 1052</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1053</span>        <span class="keywordflow">not</span> args.test_best_efforts_recovery</div>
<div class="line"><span class="lineno"> 1054</span>        <span class="keywordflow">and</span> <span class="keywordflow">not</span> args.test_tiered_storage</div>
<div class="line"><span class="lineno"> 1055</span>        <span class="keywordflow">and</span> random.choice([0] * 9 + [1]) == 1</div>
<div class="line"><span class="lineno"> 1056</span>    ):</div>
<div class="line"><span class="lineno"> 1057</span>        params.update(blob_params)</div>
<div class="line"><span class="lineno"> 1058</span> </div>
<div class="line"><span class="lineno"> 1059</span>    <span class="keywordflow">if</span> <span class="stringliteral">&quot;compaction_style&quot;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> params:</div>
<div class="line"><span class="lineno"> 1060</span>        <span class="comment"># Default to leveled compaction</span></div>
<div class="line"><span class="lineno"> 1061</span>        <span class="comment"># TODO: Fix &quot;Unsafe to store Seq later&quot; with tiered+leveled and</span></div>
<div class="line"><span class="lineno"> 1062</span>        <span class="comment"># enable that combination rather than falling back to universal.</span></div>
<div class="line"><span class="lineno"> 1063</span>        <span class="comment"># TODO: There is also an alleged bug with leveled compaction</span></div>
<div class="line"><span class="lineno"> 1064</span>        <span class="comment"># infinite looping but that likely would not fail the crash test.</span></div>
<div class="line"><span class="lineno"> 1065</span>        params[<span class="stringliteral">&quot;compaction_style&quot;</span>] = 0 <span class="keywordflow">if</span> <span class="keywordflow">not</span> args.test_tiered_storage <span class="keywordflow">else</span> 1</div>
<div class="line"><span class="lineno"> 1066</span> </div>
<div class="line"><span class="lineno"> 1067</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> vars(args).items():</div>
<div class="line"><span class="lineno"> 1068</span>        <span class="keywordflow">if</span> v <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1069</span>            params[k] = v</div>
<div class="line"><span class="lineno"> 1070</span>    <span class="keywordflow">return</span> params</div>
<div class="line"><span class="lineno"> 1071</span> </div>
<div class="line"><span class="lineno"> 1072</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a247dfd419bcf1647f7fda1921f31b826_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a247dfd419bcf1647f7fda1921f31b826_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a247dfd419bcf1647f7fda1921f31b826_icgraph" id="ad2/d8b/namespacedb__crashtest_a247dfd419bcf1647f7fda1921f31b826_icgraph">
<area shape="rect" title=" " alt="" coords="411,40,578,85"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="396,49,363,44,363,39,396,44"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="396,81,364,86,363,81,395,76"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="aee4bef8cdb0b98b70b80a7f4b150a3df" name="aee4bef8cdb0b98b70b80a7f4b150a3df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee4bef8cdb0b98b70b80a7f4b150a3df">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01389">1389</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1389</span><span class="keyword">def </span><a class="code hl_function" href="../../d0/db4/cache__bench_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>():</div>
<div class="line"><span class="lineno"> 1390</span>    <span class="keyword">global</span> stress_cmd</div>
<div class="line"><span class="lineno"> 1391</span>    <span class="keyword">global</span> cleanup_cmd</div>
<div class="line"><span class="lineno"> 1392</span> </div>
<div class="line"><span class="lineno"> 1393</span>    parser = argparse.ArgumentParser(</div>
<div class="line"><span class="lineno"> 1394</span>        description=<span class="stringliteral">&quot;This script runs and kills \</span></div>
<div class="line"><span class="lineno"> 1395</span><span class="stringliteral">        db_stress multiple times&quot;</span></div>
<div class="line"><span class="lineno"> 1396</span>    )</div>
<div class="line"><span class="lineno"> 1397</span>    parser.add_argument(<span class="stringliteral">&quot;test_type&quot;</span>, choices=[<span class="stringliteral">&quot;blackbox&quot;</span>, <span class="stringliteral">&quot;whitebox&quot;</span>])</div>
<div class="line"><span class="lineno"> 1398</span>    parser.add_argument(<span class="stringliteral">&quot;--simple&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1399</span>    parser.add_argument(<span class="stringliteral">&quot;--cf_consistency&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1400</span>    parser.add_argument(<span class="stringliteral">&quot;--txn&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1401</span>    parser.add_argument(<span class="stringliteral">&quot;--optimistic_txn&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1402</span>    parser.add_argument(<span class="stringliteral">&quot;--test_best_efforts_recovery&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1403</span>    parser.add_argument(<span class="stringliteral">&quot;--enable_ts&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1404</span>    parser.add_argument(<span class="stringliteral">&quot;--test_multiops_txn&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1405</span>    parser.add_argument(<span class="stringliteral">&quot;--write_policy&quot;</span>, choices=[<span class="stringliteral">&quot;write_committed&quot;</span>, <span class="stringliteral">&quot;write_prepared&quot;</span>])</div>
<div class="line"><span class="lineno"> 1406</span>    parser.add_argument(<span class="stringliteral">&quot;--stress_cmd&quot;</span>)</div>
<div class="line"><span class="lineno"> 1407</span>    parser.add_argument(<span class="stringliteral">&quot;--test_tiered_storage&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1408</span>    parser.add_argument(<span class="stringliteral">&quot;--cleanup_cmd&quot;</span>)</div>
<div class="line"><span class="lineno"> 1409</span>    parser.add_argument(<span class="stringliteral">&quot;--skip_tmpdir_check&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>)</div>
<div class="line"><span class="lineno"> 1410</span>    parser.add_argument(<span class="stringliteral">&quot;--print_stderr_separately&quot;</span>, action=<span class="stringliteral">&quot;store_true&quot;</span>, default=<span class="keyword">False</span>)</div>
<div class="line"><span class="lineno"> 1411</span> </div>
<div class="line"><span class="lineno"> 1412</span>    all_params = dict(</div>
<div class="line"><span class="lineno"> 1413</span>        list(default_params.items())</div>
<div class="line"><span class="lineno"> 1414</span>        + list(blackbox_default_params.items())</div>
<div class="line"><span class="lineno"> 1415</span>        + list(whitebox_default_params.items())</div>
<div class="line"><span class="lineno"> 1416</span>        + list(simple_default_params.items())</div>
<div class="line"><span class="lineno"> 1417</span>        + list(blackbox_simple_default_params.items())</div>
<div class="line"><span class="lineno"> 1418</span>        + list(whitebox_simple_default_params.items())</div>
<div class="line"><span class="lineno"> 1419</span>        + list(blob_params.items())</div>
<div class="line"><span class="lineno"> 1420</span>        + list(ts_params.items())</div>
<div class="line"><span class="lineno"> 1421</span>        + list(multiops_txn_default_params.items())</div>
<div class="line"><span class="lineno"> 1422</span>        + list(multiops_wc_txn_params.items())</div>
<div class="line"><span class="lineno"> 1423</span>        + list(multiops_wp_txn_params.items())</div>
<div class="line"><span class="lineno"> 1424</span>        + list(best_efforts_recovery_params.items())</div>
<div class="line"><span class="lineno"> 1425</span>        + list(cf_consistency_params.items())</div>
<div class="line"><span class="lineno"> 1426</span>        + list(tiered_params.items())</div>
<div class="line"><span class="lineno"> 1427</span>        + list(txn_params.items())</div>
<div class="line"><span class="lineno"> 1428</span>        + list(optimistic_txn_params.items())</div>
<div class="line"><span class="lineno"> 1429</span>    )</div>
<div class="line"><span class="lineno"> 1430</span> </div>
<div class="line"><span class="lineno"> 1431</span>    <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> all_params.items():</div>
<div class="line"><span class="lineno"> 1432</span>        parser.add_argument(<span class="stringliteral">&quot;--&quot;</span> + k, type=type(v() <span class="keywordflow">if</span> callable(v) <span class="keywordflow">else</span> v))</div>
<div class="line"><span class="lineno"> 1433</span>    <span class="comment"># unknown_args are passed directly to db_stress</span></div>
<div class="line"><span class="lineno"> 1434</span>    args, unknown_args = parser.parse_known_args()</div>
<div class="line"><span class="lineno"> 1435</span> </div>
<div class="line"><span class="lineno"> 1436</span>    test_tmpdir = os.environ.get(_TEST_DIR_ENV_VAR)</div>
<div class="line"><span class="lineno"> 1437</span>    <span class="keywordflow">if</span> test_tmpdir <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> args.skip_tmpdir_check:</div>
<div class="line"><span class="lineno"> 1438</span>        isdir = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1439</span>        <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1440</span>            isdir = os.path.isdir(test_tmpdir)</div>
<div class="line"><span class="lineno"> 1441</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isdir:</div>
<div class="line"><span class="lineno"> 1442</span>                print(</div>
<div class="line"><span class="lineno"> 1443</span>                    <span class="stringliteral">&quot;ERROR: %s env var is set to a non-existent directory: %s. Update it to correct directory path.&quot;</span></div>
<div class="line"><span class="lineno"> 1444</span>                    % (_TEST_DIR_ENV_VAR, test_tmpdir)</div>
<div class="line"><span class="lineno"> 1445</span>                )</div>
<div class="line"><span class="lineno"> 1446</span>                sys.exit(1)</div>
<div class="line"><span class="lineno"> 1447</span>        <span class="keywordflow">except</span> OSError:</div>
<div class="line"><span class="lineno"> 1448</span>            <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 1449</span> </div>
<div class="line"><span class="lineno"> 1450</span>    <span class="keywordflow">if</span> args.stress_cmd:</div>
<div class="line"><span class="lineno"> 1451</span>        stress_cmd = args.stress_cmd</div>
<div class="line"><span class="lineno"> 1452</span>    <span class="keywordflow">if</span> args.cleanup_cmd:</div>
<div class="line"><span class="lineno"> 1453</span>        cleanup_cmd = args.cleanup_cmd</div>
<div class="line"><span class="lineno"> 1454</span>    <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;blackbox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1455</span>        blackbox_crash_main(args, unknown_args)</div>
<div class="line"><span class="lineno"> 1456</span>    <span class="keywordflow">if</span> args.test_type == <span class="stringliteral">&quot;whitebox&quot;</span>:</div>
<div class="line"><span class="lineno"> 1457</span>        whitebox_crash_main(args, unknown_args)</div>
<div class="line"><span class="lineno"> 1458</span>    <span class="comment"># Only delete the `expected_values_dir` if test passes</span></div>
<div class="line"><span class="lineno"> 1459</span>    <span class="keywordflow">if</span> expected_values_dir <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1460</span>        shutil.rmtree(expected_values_dir)</div>
<div class="line"><span class="lineno"> 1461</span>    <span class="keywordflow">if</span> multiops_txn_key_spaces_file <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1462</span>        os.remove(multiops_txn_key_spaces_file)</div>
<div class="line"><span class="lineno"> 1463</span> </div>
<div class="line"><span class="lineno"> 1464</span> </div>
<div class="ttc" id="acache__bench_8cc_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="../../d0/db4/cache__bench_8cc.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> <a href="../../d0/db4/cache__bench_8cc_source.html#l00011">cache_bench.cc:11</a></div></div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_cgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_cgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_cgraph" id="ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_cgraph">
<area shape="rect" title=" " alt="" coords="5,139,147,167"/>
<area shape="poly" title=" " alt="" coords="41,140,35,130,40,121,54,115,76,113,100,115,113,121,110,126,98,120,76,118,55,120,44,125,41,130,46,137"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,96,362,141"/>
<area shape="poly" title=" " alt="" coords="146,138,179,133,180,138,147,144"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,165,363,210"/>
<area shape="poly" title=" " alt="" coords="147,162,180,168,179,173,146,168"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#ae7c647a1669515481b02f35a6cdf5629" title=" " alt="" coords="429,75,588,119"/>
<area shape="poly" title=" " alt="" coords="363,108,413,103,414,108,363,113"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aae7ec292b759c920cb0aad1b63c6a57f" title=" " alt="" coords="411,143,606,171"/>
<area shape="poly" title=" " alt="" coords="363,130,408,137,407,143,362,135"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aff39856804a257b88f48247f250f9dcc" title=" " alt="" coords="425,195,592,223"/>
<area shape="poly" title=" " alt="" coords="339,139,364,151,388,166,412,180,432,188,430,193,410,185,385,170,362,155,337,144"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a247dfd419bcf1647f7fda1921f31b826" title=" " alt="" coords="425,247,592,291"/>
<area shape="poly" title=" " alt="" coords="348,139,365,151,382,172,389,193,397,213,413,232,417,236,414,240,409,236,392,216,384,195,377,175,361,155,345,143"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a855292afa58d698d3609bd64e7694a39" title=" " alt="" coords="412,5,606,50"/>
<area shape="poly" title=" " alt="" coords="330,93,410,60,427,53,429,58,412,65,332,98"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a602c9e7b0779f85e1ae8aeb270c56629" title=" " alt="" coords="654,187,811,231"/>
<area shape="poly" title=" " alt="" coords="593,206,639,206,639,212,593,212"/>
<area shape="poly" title=" " alt="" coords="334,162,362,151,410,129,427,123,429,128,412,134,364,155,337,167"/>
<area shape="poly" title=" " alt="" coords="363,174,395,169,396,175,364,179"/>
<area shape="poly" title=" " alt="" coords="364,193,410,197,409,202,363,198"/>
<area shape="poly" title=" " alt="" coords="345,208,430,238,428,243,343,213"/>
<area shape="poly" title=" " alt="" coords="345,163,361,151,377,129,384,107,391,84,409,60,414,57,417,61,413,64,396,86,389,108,382,131,365,155,348,167"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_icgraph" id="ad2/d8b/namespacedb__crashtest_aee4bef8cdb0b98b70b80a7f4b150a3df_icgraph">
<area shape="rect" title=" " alt="" coords="5,29,147,57"/>
<area shape="poly" title=" " alt="" coords="99,16,91,10,76,8,62,10,54,14,52,20,56,28,51,30,47,20,50,11,60,5,76,3,93,5,102,11"/>
</map>
</div>

</div>
</div>
<a id="a855292afa58d698d3609bd64e7694a39" name="a855292afa58d698d3609bd64e7694a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a855292afa58d698d3609bd64e7694a39">&#9670;&#160;</a></span>print_output_and_exit_on_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.print_output_and_exit_on_error </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stdout</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>stderr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>print_stderr_separately</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01128">1128</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1128</span><span class="keyword">def </span>print_output_and_exit_on_error(stdout, stderr, print_stderr_separately=False):</div>
<div class="line"><span class="lineno"> 1129</span>    print(<span class="stringliteral">&quot;stdout:\n&quot;</span>, stdout)</div>
<div class="line"><span class="lineno"> 1130</span>    <span class="keywordflow">if</span> len(stderr) == 0:</div>
<div class="line"><span class="lineno"> 1131</span>        <span class="keywordflow">return</span></div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>    <span class="keywordflow">if</span> print_stderr_separately:</div>
<div class="line"><span class="lineno"> 1134</span>        print(<span class="stringliteral">&quot;stderr:\n&quot;</span>, stderr, file=sys.stderr)</div>
<div class="line"><span class="lineno"> 1135</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1136</span>        print(<span class="stringliteral">&quot;stderr:\n&quot;</span>, stderr)</div>
<div class="line"><span class="lineno"> 1137</span> </div>
<div class="line"><span class="lineno"> 1138</span>    sys.exit(2)</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a855292afa58d698d3609bd64e7694a39_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a855292afa58d698d3609bd64e7694a39_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a855292afa58d698d3609bd64e7694a39_icgraph" id="ad2/d8b/namespacedb__crashtest_a855292afa58d698d3609bd64e7694a39_icgraph">
<area shape="rect" title=" " alt="" coords="411,40,605,85"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a2a55660bae4af1fe3c0ae39ee41f9fe2" title=" " alt="" coords="195,5,362,50"/>
<area shape="poly" title=" " alt="" coords="395,48,362,43,363,38,396,43"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a36a44897f5677909667a816f056531cc" title=" " alt="" coords="195,75,363,119"/>
<area shape="poly" title=" " alt="" coords="396,82,364,87,363,82,395,77"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,48,147,76"/>
<area shape="poly" title=" " alt="" coords="180,47,147,53,147,48,179,42"/>
<area shape="poly" title=" " alt="" coords="110,36,98,29,76,27,55,29,44,34,41,39,46,47,41,49,35,40,40,30,54,24,76,22,100,24,113,31"/>
<area shape="poly" title=" " alt="" coords="179,83,147,77,148,72,180,77"/>
</map>
</div>

</div>
</div>
<a id="a36a44897f5677909667a816f056531cc" name="a36a44897f5677909667a816f056531cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a44897f5677909667a816f056531cc">&#9670;&#160;</a></span>whitebox_crash_main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">db_crashtest.whitebox_crash_main </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>args</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>unknown_args</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l01208">1208</a> 번째 라인에서 정의되었습니다.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1208</span><span class="keyword">def </span>whitebox_crash_main(args, unknown_args):</div>
<div class="line"><span class="lineno"> 1209</span>    cmd_params = gen_cmd_params(args)</div>
<div class="line"><span class="lineno"> 1210</span>    dbname = get_dbname(<span class="stringliteral">&quot;whitebox&quot;</span>)</div>
<div class="line"><span class="lineno"> 1211</span> </div>
<div class="line"><span class="lineno"> 1212</span>    cur_time = time.time()</div>
<div class="line"><span class="lineno"> 1213</span>    exit_time = cur_time + cmd_params[<span class="stringliteral">&quot;duration&quot;</span>]</div>
<div class="line"><span class="lineno"> 1214</span>    half_time = cur_time + cmd_params[<span class="stringliteral">&quot;duration&quot;</span>] // 2</div>
<div class="line"><span class="lineno"> 1215</span> </div>
<div class="line"><span class="lineno"> 1216</span>    print(</div>
<div class="line"><span class="lineno"> 1217</span>        <span class="stringliteral">&quot;Running whitebox-crash-test with \n&quot;</span></div>
<div class="line"><span class="lineno"> 1218</span>        + <span class="stringliteral">&quot;total-duration=&quot;</span></div>
<div class="line"><span class="lineno"> 1219</span>        + str(cmd_params[<span class="stringliteral">&quot;duration&quot;</span>])</div>
<div class="line"><span class="lineno"> 1220</span>        + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1221</span>    )</div>
<div class="line"><span class="lineno"> 1222</span> </div>
<div class="line"><span class="lineno"> 1223</span>    total_check_mode = 4</div>
<div class="line"><span class="lineno"> 1224</span>    check_mode = 0</div>
<div class="line"><span class="lineno"> 1225</span>    kill_random_test = cmd_params[<span class="stringliteral">&quot;random_kill_odd&quot;</span>]</div>
<div class="line"><span class="lineno"> 1226</span>    kill_mode = 0</div>
<div class="line"><span class="lineno"> 1227</span>    prev_compaction_style = -1</div>
<div class="line"><span class="lineno"> 1228</span>    succeeded = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1229</span>    hit_timeout = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1230</span>    <span class="keywordflow">while</span> time.time() &lt; exit_time:</div>
<div class="line"><span class="lineno"> 1231</span>        <span class="keywordflow">if</span> check_mode == 0:</div>
<div class="line"><span class="lineno"> 1232</span>            additional_opts = {</div>
<div class="line"><span class="lineno"> 1233</span>                <span class="comment"># use large ops per thread since we will kill it anyway</span></div>
<div class="line"><span class="lineno"> 1234</span>                <span class="stringliteral">&quot;ops_per_thread&quot;</span>: 100</div>
<div class="line"><span class="lineno"> 1235</span>                * cmd_params[<span class="stringliteral">&quot;ops_per_thread&quot;</span>],</div>
<div class="line"><span class="lineno"> 1236</span>            }</div>
<div class="line"><span class="lineno"> 1237</span>            <span class="comment"># run with kill_random_test, with three modes.</span></div>
<div class="line"><span class="lineno"> 1238</span>            <span class="comment"># Mode 0 covers all kill points. Mode 1 covers less kill points but</span></div>
<div class="line"><span class="lineno"> 1239</span>            <span class="comment"># increases change of triggering them. Mode 2 covers even less</span></div>
<div class="line"><span class="lineno"> 1240</span>            <span class="comment"># frequent kill points and further increases triggering change.</span></div>
<div class="line"><span class="lineno"> 1241</span>            <span class="keywordflow">if</span> kill_mode == 0:</div>
<div class="line"><span class="lineno"> 1242</span>                additional_opts.update(</div>
<div class="line"><span class="lineno"> 1243</span>                    {</div>
<div class="line"><span class="lineno"> 1244</span>                        <span class="stringliteral">&quot;kill_random_test&quot;</span>: kill_random_test,</div>
<div class="line"><span class="lineno"> 1245</span>                    }</div>
<div class="line"><span class="lineno"> 1246</span>                )</div>
<div class="line"><span class="lineno"> 1247</span>            <span class="keywordflow">elif</span> kill_mode == 1:</div>
<div class="line"><span class="lineno"> 1248</span>                <span class="keywordflow">if</span> cmd_params.get(<span class="stringliteral">&quot;disable_wal&quot;</span>, 0) == 1:</div>
<div class="line"><span class="lineno"> 1249</span>                    my_kill_odd = kill_random_test // 50 + 1</div>
<div class="line"><span class="lineno"> 1250</span>                <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1251</span>                    my_kill_odd = kill_random_test // 10 + 1</div>
<div class="line"><span class="lineno"> 1252</span>                additional_opts.update(</div>
<div class="line"><span class="lineno"> 1253</span>                    {</div>
<div class="line"><span class="lineno"> 1254</span>                        <span class="stringliteral">&quot;kill_random_test&quot;</span>: my_kill_odd,</div>
<div class="line"><span class="lineno"> 1255</span>                        <span class="stringliteral">&quot;kill_exclude_prefixes&quot;</span>: <span class="stringliteral">&quot;WritableFileWriter::Append,&quot;</span></div>
<div class="line"><span class="lineno"> 1256</span>                        + <span class="stringliteral">&quot;WritableFileWriter::WriteBuffered&quot;</span>,</div>
<div class="line"><span class="lineno"> 1257</span>                    }</div>
<div class="line"><span class="lineno"> 1258</span>                )</div>
<div class="line"><span class="lineno"> 1259</span>            <span class="keywordflow">elif</span> kill_mode == 2:</div>
<div class="line"><span class="lineno"> 1260</span>                <span class="comment"># TODO: May need to adjust random odds if kill_random_test</span></div>
<div class="line"><span class="lineno"> 1261</span>                <span class="comment"># is too small.</span></div>
<div class="line"><span class="lineno"> 1262</span>                additional_opts.update(</div>
<div class="line"><span class="lineno"> 1263</span>                    {</div>
<div class="line"><span class="lineno"> 1264</span>                        <span class="stringliteral">&quot;kill_random_test&quot;</span>: (kill_random_test // 5000 + 1),</div>
<div class="line"><span class="lineno"> 1265</span>                        <span class="stringliteral">&quot;kill_exclude_prefixes&quot;</span>: <span class="stringliteral">&quot;WritableFileWriter::Append,&quot;</span></div>
<div class="line"><span class="lineno"> 1266</span>                        <span class="stringliteral">&quot;WritableFileWriter::WriteBuffered,&quot;</span></div>
<div class="line"><span class="lineno"> 1267</span>                        <span class="stringliteral">&quot;PosixMmapFile::Allocate,WritableFileWriter::Flush&quot;</span>,</div>
<div class="line"><span class="lineno"> 1268</span>                    }</div>
<div class="line"><span class="lineno"> 1269</span>                )</div>
<div class="line"><span class="lineno"> 1270</span>            <span class="comment"># Run kill mode 0, 1 and 2 by turn.</span></div>
<div class="line"><span class="lineno"> 1271</span>            kill_mode = (kill_mode + 1) % 3</div>
<div class="line"><span class="lineno"> 1272</span>        <span class="keywordflow">elif</span> check_mode == 1:</div>
<div class="line"><span class="lineno"> 1273</span>            <span class="comment"># normal run with universal compaction mode</span></div>
<div class="line"><span class="lineno"> 1274</span>            additional_opts = {</div>
<div class="line"><span class="lineno"> 1275</span>                <span class="stringliteral">&quot;kill_random_test&quot;</span>: <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1276</span>                <span class="stringliteral">&quot;ops_per_thread&quot;</span>: cmd_params[<span class="stringliteral">&quot;ops_per_thread&quot;</span>],</div>
<div class="line"><span class="lineno"> 1277</span>                <span class="stringliteral">&quot;compaction_style&quot;</span>: 1,</div>
<div class="line"><span class="lineno"> 1278</span>            }</div>
<div class="line"><span class="lineno"> 1279</span>            <span class="comment"># Single level universal has a lot of special logic. Ensure we cover</span></div>
<div class="line"><span class="lineno"> 1280</span>            <span class="comment"># it sometimes.</span></div>
<div class="line"><span class="lineno"> 1281</span>            <span class="keywordflow">if</span> <span class="keywordflow">not</span> args.test_tiered_storage <span class="keywordflow">and</span> random.randint(0, 1) == 1:</div>
<div class="line"><span class="lineno"> 1282</span>                additional_opts[<span class="stringliteral">&quot;num_levels&quot;</span>] = 1</div>
<div class="line"><span class="lineno"> 1283</span>        <span class="keywordflow">elif</span> check_mode == 2:</div>
<div class="line"><span class="lineno"> 1284</span>            <span class="comment"># normal run with FIFO compaction mode</span></div>
<div class="line"><span class="lineno"> 1285</span>            <span class="comment"># ops_per_thread is divided by 5 because FIFO compaction</span></div>
<div class="line"><span class="lineno"> 1286</span>            <span class="comment"># style is quite a bit slower on reads with lot of files</span></div>
<div class="line"><span class="lineno"> 1287</span>            additional_opts = {</div>
<div class="line"><span class="lineno"> 1288</span>                <span class="stringliteral">&quot;kill_random_test&quot;</span>: <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1289</span>                <span class="stringliteral">&quot;ops_per_thread&quot;</span>: cmd_params[<span class="stringliteral">&quot;ops_per_thread&quot;</span>] // 5,</div>
<div class="line"><span class="lineno"> 1290</span>                <span class="stringliteral">&quot;compaction_style&quot;</span>: 2,</div>
<div class="line"><span class="lineno"> 1291</span>            }</div>
<div class="line"><span class="lineno"> 1292</span>            <span class="comment"># TODO: test transition from non-FIFO to FIFO with num_levels &gt; 1.</span></div>
<div class="line"><span class="lineno"> 1293</span>            <span class="comment"># See https://github.com/facebook/rocksdb/pull/10348</span></div>
<div class="line"><span class="lineno"> 1294</span>            <span class="comment"># For now, tiered storage FIFO (file_temperature_age_thresholds)</span></div>
<div class="line"><span class="lineno"> 1295</span>            <span class="comment"># requires num_levels == 1 and non-tiered operates that way.</span></div>
<div class="line"><span class="lineno"> 1296</span>            <span class="keywordflow">if</span> args.test_tiered_storage:</div>
<div class="line"><span class="lineno"> 1297</span>                additional_opts[<span class="stringliteral">&quot;num_levels&quot;</span>] = 1</div>
<div class="line"><span class="lineno"> 1298</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno"> 1299</span>            <span class="comment"># normal run</span></div>
<div class="line"><span class="lineno"> 1300</span>            additional_opts = {</div>
<div class="line"><span class="lineno"> 1301</span>                <span class="stringliteral">&quot;kill_random_test&quot;</span>: <span class="keywordtype">None</span>,</div>
<div class="line"><span class="lineno"> 1302</span>                <span class="stringliteral">&quot;ops_per_thread&quot;</span>: cmd_params[<span class="stringliteral">&quot;ops_per_thread&quot;</span>],</div>
<div class="line"><span class="lineno"> 1303</span>            }</div>
<div class="line"><span class="lineno"> 1304</span> </div>
<div class="line"><span class="lineno"> 1305</span>        cur_compaction_style = additional_opts.get(</div>
<div class="line"><span class="lineno"> 1306</span>            <span class="stringliteral">&quot;compaction_style&quot;</span>, cmd_params.get(<span class="stringliteral">&quot;compaction_style&quot;</span>, 0)</div>
<div class="line"><span class="lineno"> 1307</span>        )</div>
<div class="line"><span class="lineno"> 1308</span>        <span class="keywordflow">if</span> (</div>
<div class="line"><span class="lineno"> 1309</span>            prev_compaction_style != -1</div>
<div class="line"><span class="lineno"> 1310</span>            <span class="keywordflow">and</span> prev_compaction_style != cur_compaction_style</div>
<div class="line"><span class="lineno"> 1311</span>        ):</div>
<div class="line"><span class="lineno"> 1312</span>            print(</div>
<div class="line"><span class="lineno"> 1313</span>                <span class="stringliteral">&quot;`compaction_style` is changed in current run so `destroy_db_initially` is set to 1 as a short-term solution to avoid cycling through previous db of different compaction style.&quot;</span></div>
<div class="line"><span class="lineno"> 1314</span>                + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1315</span>            )</div>
<div class="line"><span class="lineno"> 1316</span>            additional_opts[<span class="stringliteral">&quot;destroy_db_initially&quot;</span>] = 1</div>
<div class="line"><span class="lineno"> 1317</span>        prev_compaction_style = cur_compaction_style</div>
<div class="line"><span class="lineno"> 1318</span> </div>
<div class="line"><span class="lineno"> 1319</span>        cmd = gen_cmd(</div>
<div class="line"><span class="lineno"> 1320</span>            dict(</div>
<div class="line"><span class="lineno"> 1321</span>                list(cmd_params.items())</div>
<div class="line"><span class="lineno"> 1322</span>                + list(additional_opts.items())</div>
<div class="line"><span class="lineno"> 1323</span>                + list({<span class="stringliteral">&quot;db&quot;</span>: dbname}.items())</div>
<div class="line"><span class="lineno"> 1324</span>            ),</div>
<div class="line"><span class="lineno"> 1325</span>            unknown_args,</div>
<div class="line"><span class="lineno"> 1326</span>        )</div>
<div class="line"><span class="lineno"> 1327</span> </div>
<div class="line"><span class="lineno"> 1328</span>        print(</div>
<div class="line"><span class="lineno"> 1329</span>            <span class="stringliteral">&quot;Running:&quot;</span> + <span class="stringliteral">&quot; &quot;</span>.join(cmd) + <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><span class="lineno"> 1330</span>        )  <span class="comment"># noqa: E999 T25377293 Grandfathered in</span></div>
<div class="line"><span class="lineno"> 1331</span> </div>
<div class="line"><span class="lineno"> 1332</span>        <span class="comment"># If the running time is 15 minutes over the run time, explicit kill and</span></div>
<div class="line"><span class="lineno"> 1333</span>        <span class="comment"># exit even if white box kill didn&#39;t hit. This is to guarantee run time</span></div>
<div class="line"><span class="lineno"> 1334</span>        <span class="comment"># limit, as if it runs as a job, running too long will create problems</span></div>
<div class="line"><span class="lineno"> 1335</span>        <span class="comment"># for job scheduling or execution.</span></div>
<div class="line"><span class="lineno"> 1336</span>        <span class="comment"># TODO detect a hanging condition. The job might run too long as RocksDB</span></div>
<div class="line"><span class="lineno"> 1337</span>        <span class="comment"># hits a hanging bug.</span></div>
<div class="line"><span class="lineno"> 1338</span>        hit_timeout, retncode, stdoutdata, stderrdata = execute_cmd(</div>
<div class="line"><span class="lineno"> 1339</span>            cmd, exit_time - time.time() + 900</div>
<div class="line"><span class="lineno"> 1340</span>        )</div>
<div class="line"><span class="lineno"> 1341</span>        msg = <span class="stringliteral">&quot;check_mode={}, kill option={}, exitcode={}\n&quot;</span>.format(</div>
<div class="line"><span class="lineno"> 1342</span>            check_mode, additional_opts[<span class="stringliteral">&quot;kill_random_test&quot;</span>], retncode</div>
<div class="line"><span class="lineno"> 1343</span>        )</div>
<div class="line"><span class="lineno"> 1344</span> </div>
<div class="line"><span class="lineno"> 1345</span>        print(msg)</div>
<div class="line"><span class="lineno"> 1346</span>        print_output_and_exit_on_error(</div>
<div class="line"><span class="lineno"> 1347</span>            stdoutdata, stderrdata, args.print_stderr_separately</div>
<div class="line"><span class="lineno"> 1348</span>        )</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>        <span class="keywordflow">if</span> hit_timeout:</div>
<div class="line"><span class="lineno"> 1351</span>            print(<span class="stringliteral">&quot;Killing the run for running too long&quot;</span>)</div>
<div class="line"><span class="lineno"> 1352</span>            <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno"> 1353</span> </div>
<div class="line"><span class="lineno"> 1354</span>        succeeded = <span class="keyword">False</span></div>
<div class="line"><span class="lineno"> 1355</span>        <span class="keywordflow">if</span> additional_opts[<span class="stringliteral">&quot;kill_random_test&quot;</span>] <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> (retncode == 0):</div>
<div class="line"><span class="lineno"> 1356</span>            <span class="comment"># we expect zero retncode if no kill option</span></div>
<div class="line"><span class="lineno"> 1357</span>            succeeded = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1358</span>        <span class="keywordflow">elif</span> additional_opts[<span class="stringliteral">&quot;kill_random_test&quot;</span>] <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> retncode &lt;= 0:</div>
<div class="line"><span class="lineno"> 1359</span>            <span class="comment"># When kill option is given, the test MIGHT kill itself.</span></div>
<div class="line"><span class="lineno"> 1360</span>            <span class="comment"># If it does, negative retncode is expected. Otherwise 0.</span></div>
<div class="line"><span class="lineno"> 1361</span>            succeeded = <span class="keyword">True</span></div>
<div class="line"><span class="lineno"> 1362</span> </div>
<div class="line"><span class="lineno"> 1363</span>        <span class="keywordflow">if</span> <span class="keywordflow">not</span> succeeded:</div>
<div class="line"><span class="lineno"> 1364</span>            print(<span class="stringliteral">&quot;TEST FAILED. See kill option and exit code above!!!\n&quot;</span>)</div>
<div class="line"><span class="lineno"> 1365</span>            sys.exit(1)</div>
<div class="line"><span class="lineno"> 1366</span> </div>
<div class="line"><span class="lineno"> 1367</span>        <span class="comment"># First half of the duration, keep doing kill test. For the next half,</span></div>
<div class="line"><span class="lineno"> 1368</span>        <span class="comment"># try different modes.</span></div>
<div class="line"><span class="lineno"> 1369</span>        <span class="keywordflow">if</span> time.time() &gt; half_time:</div>
<div class="line"><span class="lineno"> 1370</span>            cleanup_after_success(dbname)</div>
<div class="line"><span class="lineno"> 1371</span>            <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno"> 1372</span>                os.mkdir(dbname)</div>
<div class="line"><span class="lineno"> 1373</span>            <span class="keywordflow">except</span> OSError:</div>
<div class="line"><span class="lineno"> 1374</span>                <span class="keywordflow">pass</span></div>
<div class="line"><span class="lineno"> 1375</span>            <span class="keywordflow">if</span> expected_values_dir <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno"> 1376</span>                shutil.rmtree(expected_values_dir, <span class="keyword">True</span>)</div>
<div class="line"><span class="lineno"> 1377</span>                os.mkdir(expected_values_dir)</div>
<div class="line"><span class="lineno"> 1378</span> </div>
<div class="line"><span class="lineno"> 1379</span>            check_mode = (check_mode + 1) % total_check_mode</div>
<div class="line"><span class="lineno"> 1380</span> </div>
<div class="line"><span class="lineno"> 1381</span>        time.sleep(1)  <span class="comment"># time to stabilize after a kill</span></div>
<div class="line"><span class="lineno"> 1382</span> </div>
<div class="line"><span class="lineno"> 1383</span>    <span class="comment"># If successfully finished or timed out (we currently treat timed out test as passing)</span></div>
<div class="line"><span class="lineno"> 1384</span>    <span class="comment"># Clean up after ourselves</span></div>
<div class="line"><span class="lineno"> 1385</span>    <span class="keywordflow">if</span> succeeded <span class="keywordflow">or</span> hit_timeout:</div>
<div class="line"><span class="lineno"> 1386</span>        cleanup_after_success(dbname)</div>
<div class="line"><span class="lineno"> 1387</span> </div>
<div class="line"><span class="lineno"> 1388</span> </div>
</div><!-- fragment --><div class="dynheader">
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_cgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_cgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_cgraph" id="ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_cgraph">
<area shape="rect" title=" " alt="" coords="5,117,174,162"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#ae7c647a1669515481b02f35a6cdf5629" title=" " alt="" coords="240,5,399,50"/>
<area shape="poly" title=" " alt="" coords="124,115,169,87,221,60,234,54,236,59,223,65,172,92,127,119"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aae7ec292b759c920cb0aad1b63c6a57f" title=" " alt="" coords="222,74,417,102"/>
<area shape="poly" title=" " alt="" coords="174,118,240,103,241,108,175,123"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aff39856804a257b88f48247f250f9dcc" title=" " alt="" coords="236,126,403,154"/>
<area shape="poly" title=" " alt="" coords="174,137,220,137,220,142,174,142"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a247dfd419bcf1647f7fda1921f31b826" title=" " alt="" coords="236,177,403,222"/>
<area shape="poly" title=" " alt="" coords="175,159,221,171,220,176,173,164"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a855292afa58d698d3609bd64e7694a39" title=" " alt="" coords="222,247,416,291"/>
<area shape="poly" title=" " alt="" coords="119,160,166,196,223,232,234,238,232,242,220,237,163,201,116,164"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#a602c9e7b0779f85e1ae8aeb270c56629" title=" " alt="" coords="465,117,621,162"/>
<area shape="poly" title=" " alt="" coords="404,137,450,137,450,142,404,142"/>
</map>
</div>
<div class="dynheader">
이 함수를 호출하는 함수들에 대한 그래프입니다.:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_icgraph.png" border="0" usemap="#ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_icgraph" alt=""/></div>
<map name="ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_icgraph" id="ad2/d8b/namespacedb__crashtest_a36a44897f5677909667a816f056531cc_icgraph">
<area shape="rect" title=" " alt="" coords="195,21,363,66"/>
<area shape="rect" href="../../d2/d8b/namespacedb__crashtest.html#aee4bef8cdb0b98b70b80a7f4b150a3df" title=" " alt="" coords="5,29,147,57"/>
<area shape="poly" title=" " alt="" coords="179,46,147,46,147,40,179,40"/>
<area shape="poly" title=" " alt="" coords="110,16,98,10,76,8,55,10,44,15,41,20,46,27,41,30,35,20,40,11,54,5,76,3,100,5,113,12"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">변수 문서화</h2>
<a id="a8915980076368f9dea78b2130c60260f" name="a8915980076368f9dea78b2130c60260f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8915980076368f9dea78b2130c60260f">&#9670;&#160;</a></span>default_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict db_crashtest.default_params</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l00032">32</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<a id="aead73131f2c205b8b0ce42492baa6013" name="aead73131f2c205b8b0ce42492baa6013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead73131f2c205b8b0ce42492baa6013">&#9670;&#160;</a></span>multiops_txn_default_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict db_crashtest.multiops_txn_default_params</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l00616">616</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<a id="a547f1aad31bd6957c7db475bbc0153ac" name="a547f1aad31bd6957c7db475bbc0153ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a547f1aad31bd6957c7db475bbc0153ac">&#9670;&#160;</a></span>multiops_wc_txn_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict db_crashtest.multiops_wc_txn_params</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>초기값:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;txn_write_policy&quot;</span>: 0,</div>
<div class="line"><span class="lineno">    3</span>    <span class="comment"># TODO re-enable pipelined write. Not well tested atm</span></div>
<div class="line"><span class="lineno">    4</span>    <span class="stringliteral">&quot;enable_pipelined_write&quot;</span>: 0,</div>
<div class="line"><span class="lineno">    5</span>    <span class="stringliteral">&quot;commit_bypass_memtable_one_in&quot;</span>: random.choice([0] * 4 + [100]),</div>
<div class="line"><span class="lineno">    6</span>}</div>
</div><!-- fragment -->
<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l00676">676</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
<a id="a7ce92da39a98e365b109635d6f9b5d04" name="a7ce92da39a98e365b109635d6f9b5d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce92da39a98e365b109635d6f9b5d04">&#9670;&#160;</a></span>multiops_wp_txn_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dict db_crashtest.multiops_wp_txn_params</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>초기값:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  {</div>
<div class="line"><span class="lineno">    2</span>    <span class="stringliteral">&quot;txn_write_policy&quot;</span>: 1,</div>
<div class="line"><span class="lineno">    3</span>    <span class="stringliteral">&quot;wp_snapshot_cache_bits&quot;</span>: 1,</div>
<div class="line"><span class="lineno">    4</span>    <span class="comment"># try small wp_commit_cache_bits, e.g. 0 once we explore storing full</span></div>
<div class="line"><span class="lineno">    5</span>    <span class="comment"># commit sequence numbers in commit cache</span></div>
<div class="line"><span class="lineno">    6</span>    <span class="stringliteral">&quot;wp_commit_cache_bits&quot;</span>: 10,</div>
<div class="line"><span class="lineno">    7</span>    <span class="comment"># pipeline write is not currnetly compatible with WritePrepared txns</span></div>
<div class="line"><span class="lineno">    8</span>    <span class="stringliteral">&quot;enable_pipelined_write&quot;</span>: 0,</div>
<div class="line"><span class="lineno">    9</span>    <span class="comment"># OpenReadOnly after checkpoint is not currnetly compatible with WritePrepared txns</span></div>
<div class="line"><span class="lineno">   10</span>    <span class="stringliteral">&quot;checkpoint_one_in&quot;</span>: 0,</div>
<div class="line"><span class="lineno">   11</span>    <span class="comment"># Required to be 1 in order to use commit-time-batch</span></div>
<div class="line"><span class="lineno">   12</span>    <span class="stringliteral">&quot;use_only_the_last_commit_time_batch_for_recovery&quot;</span>: 1,</div>
<div class="line"><span class="lineno">   13</span>    <span class="stringliteral">&quot;clear_wp_commit_cache_one_in&quot;</span>: 10,</div>
<div class="line"><span class="lineno">   14</span>    <span class="stringliteral">&quot;create_timestamped_snapshot_one_in&quot;</span>: 0,</div>
<div class="line"><span class="lineno">   15</span>    <span class="comment"># sequence number can be advanced in SwitchMemtable::WriteRecoverableState() for WP.</span></div>
<div class="line"><span class="lineno">   16</span>    <span class="comment"># disable it for now until we find another way to test LockWAL().</span></div>
<div class="line"><span class="lineno">   17</span>    <span class="stringliteral">&quot;lock_wal_one_in&quot;</span>: 0,</div>
<div class="line"><span class="lineno">   18</span>}</div>
</div><!-- fragment -->
<p class="definition"><a class="el" href="../../d3/d2c/db__crashtest_8py_source.html">db_crashtest.py</a> 파일의 <a class="el" href="../../d3/d2c/db__crashtest_8py_source.html#l00683">683</a> 번째 라인에서 정의되었습니다.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d2/d8b/namespacedb__crashtest.html">db_crashtest</a></li>
    <li class="footer">다음에 의해 생성됨 :  <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
